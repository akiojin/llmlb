import{r as o,j as t,a as pn,R as Rl,u as Ze,c as O,b as Ae,d as Z,P as V,e as nt,f as Yn,g as P,h as ft,i as Us,k as ga,l as Fe,m as Xn,A as va,n as Zn,D as Jn,C as ya,o as El,p as ba,q as ja,s as I,t as wa,v as Ml,w as Tl,X as ks,x as Pl,y as Na,B as M,z as at,L as Y,I as me,E as $,F as xn,G as Ca,V as Il,U as qs,H as xs,J as gn,K as er,M as we,N as vn,O as Mn,Q as yt,S as bt,T as Al,W as Pe,Y as Sa,Z as Ft,_ as Lt,$ as vt,a0 as qr,a1 as Tn,a2 as gs,a3 as Dl,a4 as Ol,a5 as Fl}from"./index-Dy6TVFKh.js";import{T as Pn,C as Rs}from"./ticket-BIXKXupc.js";var qt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ll={setTimeout:(e,s)=>setTimeout(e,s),clearTimeout:e=>clearTimeout(e),setInterval:(e,s)=>setInterval(e,s),clearInterval:e=>clearInterval(e)},$l=class{#e=Ll;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,s){return this.#e.setTimeout(e,s)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,s){return this.#e.setInterval(e,s)}clearInterval(e){this.#e.clearInterval(e)}},gt=new $l;function Ul(e){setTimeout(e,0)}var jt=typeof window>"u"||"Deno"in globalThis;function Me(){}function ql(e,s){return typeof e=="function"?e(s):e}function In(e){return typeof e=="number"&&e>=0&&e!==1/0}function _a(e,s){return Math.max(e+(s||0)-Date.now(),0)}function ht(e,s){return typeof e=="function"?e(s):e}function Le(e,s){return typeof e=="function"?e(s):e}function Kr(e,s){const{type:n="all",exact:r,fetchStatus:a,predicate:i,queryKey:l,stale:c}=e;if(l){if(r){if(s.queryHash!==tr(l,s.options))return!1}else if(!Xt(s.queryKey,l))return!1}if(n!=="all"){const d=s.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof c=="boolean"&&s.isStale()!==c||a&&a!==s.state.fetchStatus||i&&!i(s))}function zr(e,s){const{exact:n,status:r,predicate:a,mutationKey:i}=e;if(i){if(!s.options.mutationKey)return!1;if(n){if(wt(s.options.mutationKey)!==wt(i))return!1}else if(!Xt(s.options.mutationKey,i))return!1}return!(r&&s.state.status!==r||a&&!a(s))}function tr(e,s){return(s?.queryKeyHashFn||wt)(e)}function wt(e){return JSON.stringify(e,(s,n)=>An(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function Xt(e,s){return e===s?!0:typeof e!=typeof s?!1:e&&s&&typeof e=="object"&&typeof s=="object"?Object.keys(s).every(n=>Xt(e[n],s[n])):!1}var Kl=Object.prototype.hasOwnProperty;function ka(e,s,n=0){if(e===s)return e;if(n>500)return s;const r=Br(e)&&Br(s);if(!r&&!(An(e)&&An(s)))return s;const i=(r?e:Object.keys(e)).length,l=r?s:Object.keys(s),c=l.length,d=r?new Array(c):{};let u=0;for(let h=0;h<c;h++){const m=r?h:l[h],p=e[m],x=s[m];if(p===x){d[m]=p,(r?h<i:Kl.call(e,m))&&u++;continue}if(p===null||x===null||typeof p!="object"||typeof x!="object"){d[m]=x;continue}const v=ka(p,x,n+1);d[m]=v,v===p&&u++}return i===c&&u===i?e:d}function Es(e,s){if(!s||Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}function Br(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function An(e){if(!Hr(e))return!1;const s=e.constructor;if(s===void 0)return!0;const n=s.prototype;return!(!Hr(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Hr(e){return Object.prototype.toString.call(e)==="[object Object]"}function zl(e){return new Promise(s=>{gt.setTimeout(s,e)})}function Dn(e,s,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,s):n.structuralSharing!==!1?ka(e,s):s}function Bl(e,s,n=0){const r=[...e,s];return n&&r.length>n?r.slice(1):r}function Hl(e,s,n=0){const r=[s,...e];return n&&r.length>n?r.slice(0,-1):r}var sr=Symbol();function Ra(e,s){return!e.queryFn&&s?.initialPromise?()=>s.initialPromise:!e.queryFn||e.queryFn===sr?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function nr(e,s){return typeof e=="function"?e(...s):!!e}function Vl(e,s,n){let r=!1,a;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(a??=s(),r||(r=!0,a.aborted?n():a.addEventListener("abort",n,{once:!0})),a)}),e}var Wl=class extends qt{#e;#t;#s;constructor(){super(),this.#s=e=>{if(!jt&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},rr=new Wl;function On(){let e,s;const n=new Promise((a,i)=>{e=a,s=i});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),s(a)},n}var Gl=Ul;function Ql(){let e=[],s=0,n=c=>{c()},r=c=>{c()},a=Gl;const i=c=>{s?e.push(c):a(()=>{n(c)})},l=()=>{const c=e;e=[],c.length&&a(()=>{r(()=>{c.forEach(d=>{n(d)})})})};return{batch:c=>{let d;s++;try{d=c()}finally{s--,s||l()}return d},batchCalls:c=>(...d)=>{i(()=>{c(...d)})},schedule:i,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{a=c}}}var ye=Ql(),Yl=class extends qt{#e=!0;#t;#s;constructor(){super(),this.#s=e=>{if(!jt&&window.addEventListener){const s=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},Ms=new Yl;function Xl(e){return Math.min(1e3*2**e,3e4)}function Ea(e){return(e??"online")==="online"?Ms.isOnline():!0}var Fn=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Ma(e){let s=!1,n=0,r;const a=On(),i=()=>a.status!=="pending",l=f=>{if(!i()){const g=new Fn(f);p(g),e.onCancel?.(g)}},c=()=>{s=!0},d=()=>{s=!1},u=()=>rr.isFocused()&&(e.networkMode==="always"||Ms.isOnline())&&e.canRun(),h=()=>Ea(e.networkMode)&&e.canRun(),m=f=>{i()||(r?.(),a.resolve(f))},p=f=>{i()||(r?.(),a.reject(f))},x=()=>new Promise(f=>{r=g=>{(i()||u())&&f(g)},e.onPause?.()}).then(()=>{r=void 0,i()||e.onContinue?.()}),v=()=>{if(i())return;let f;const g=n===0?e.initialPromise:void 0;try{f=g??e.fn()}catch(y){f=Promise.reject(y)}Promise.resolve(f).then(m).catch(y=>{if(i())return;const j=e.retry??(jt?0:3),N=e.retryDelay??Xl,R=typeof N=="function"?N(n,y):N,C=j===!0||typeof j=="number"&&n<j||typeof j=="function"&&j(n,y);if(s||!C){p(y);return}n++,e.onFail?.(n,y),zl(R).then(()=>u()?void 0:x()).then(()=>{s?p(y):v()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(r?.(),a),cancelRetry:c,continueRetry:d,canStart:h,start:()=>(h()?v():x().then(v),a)}}var Ta=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),In(this.gcTime)&&(this.#e=gt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(jt?1/0:300*1e3))}clearGcTimeout(){this.#e&&(gt.clearTimeout(this.#e),this.#e=void 0)}},Zl=class extends Ta{#e;#t;#s;#r;#n;#o;#i;constructor(e){super(),this.#i=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.client,this.#s=this.#r.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Wr(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=Wr(this.options);s.data!==void 0&&(this.setState(Vr(s.data,s.dataUpdatedAt)),this.#e=s)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(e,s){const n=Dn(this.state.data,e,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),n}setState(e,s){this.#a({type:"setState",state:e,setStateOptions:s})}cancel(e){const s=this.#n?.promise;return this.#n?.cancel(e),s?s.then(Me).catch(Me):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Le(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===sr||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ht(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!_a(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(this.#n&&(this.#i?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,s){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const c=this.observers.find(d=>d.options.queryFn);c&&this.setOptions(c.options)}const n=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},a=()=>{const c=Ra(this.options,s),u=(()=>{const h={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(h),h})();return this.#i=!1,this.options.persister?this.options.persister(c,u,this):c(u)},l=(()=>{const c={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:a};return r(c),c})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta}),this.#n=Ma({initialPromise:s?.initialPromise,fn:l.fetchFn,onCancel:c=>{c instanceof Fn&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(c,d)=>{this.#a({type:"failed",failureCount:c,error:d})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const c=await this.#n.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#s.config.onSuccess?.(c,this),this.#s.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof Fn){if(c.silent)return this.#n.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#a({type:"error",error:c}),this.#s.config.onError?.(c,this),this.#s.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#a(e){const s=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Pa(n.data,this.options),fetchMeta:e.meta??null};case"success":const r={...n,...Vr(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?r:void 0,r;case"error":const a=e.error;return{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=s(this.state),ye.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:e})})}};function Pa(e,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ea(s.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Vr(e,s){return{data:e,dataUpdatedAt:s??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Wr(e){const s=typeof e.initialData=="function"?e.initialData():e.initialData,n=s!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Jl=class extends qt{constructor(e,s){super(),this.options=s,this.#e=e,this.#a=null,this.#i=On(),this.bindMethods(),this.setOptions(s)}#e;#t=void 0;#s=void 0;#r=void 0;#n;#o;#i;#a;#p;#h;#m;#l;#d;#c;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Gr(this.#t,this.options)?this.#u():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ln(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ln(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#j(),this.#t.removeObserver(this)}setOptions(e){const s=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Le(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),s._defaulted&&!Es(this.options,s)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&Qr(this.#t,n,this.options,s)&&this.#u(),this.updateResult(),r&&(this.#t!==n||Le(this.options.enabled,this.#t)!==Le(s.enabled,this.#t)||ht(this.options.staleTime,this.#t)!==ht(s.staleTime,this.#t))&&this.#x();const a=this.#g();r&&(this.#t!==n||Le(this.options.enabled,this.#t)!==Le(s.enabled,this.#t)||a!==this.#c)&&this.#v(a)}getOptimisticResult(e){const s=this.#e.getQueryCache().build(this.#e,e),n=this.createResult(s,e);return td(this,n)&&(this.#r=n,this.#o=this.options,this.#n=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(e,s){return new Proxy(e,{get:(n,r)=>(this.trackProp(r),s?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,s);return n.fetch().then(()=>this.createResult(n,s))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#u(e){this.#w();let s=this.#t.fetch(this.options,e);return e?.throwOnError||(s=s.catch(Me)),s}#x(){this.#b();const e=ht(this.options.staleTime,this.#t);if(jt||this.#r.isStale||!In(e))return;const n=_a(this.#r.dataUpdatedAt,e)+1;this.#l=gt.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#j(),this.#c=e,!(jt||Le(this.options.enabled,this.#t)===!1||!In(this.#c)||this.#c===0)&&(this.#d=gt.setInterval(()=>{(this.options.refetchIntervalInBackground||rr.isFocused())&&this.#u()},this.#c))}#y(){this.#x(),this.#v(this.#g())}#b(){this.#l&&(gt.clearTimeout(this.#l),this.#l=void 0)}#j(){this.#d&&(gt.clearInterval(this.#d),this.#d=void 0)}createResult(e,s){const n=this.#t,r=this.options,a=this.#r,i=this.#n,l=this.#o,d=e!==n?e.state:this.#s,{state:u}=e;let h={...u},m=!1,p;if(s._optimisticResults){const T=this.hasListeners(),S=!T&&Gr(e,s),F=T&&Qr(e,n,s,r);(S||F)&&(h={...h,...Pa(u.data,e.options)}),s._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:x,errorUpdatedAt:v,status:f}=h;p=h.data;let g=!1;if(s.placeholderData!==void 0&&p===void 0&&f==="pending"){let T;a?.isPlaceholderData&&s.placeholderData===l?.placeholderData?(T=a.data,g=!0):T=typeof s.placeholderData=="function"?s.placeholderData(this.#m?.state.data,this.#m):s.placeholderData,T!==void 0&&(f="success",p=Dn(a?.data,T,s),m=!0)}if(s.select&&p!==void 0&&!g)if(a&&p===i?.data&&s.select===this.#p)p=this.#h;else try{this.#p=s.select,p=s.select(p),p=Dn(a?.data,p,s),this.#h=p,this.#a=null}catch(T){this.#a=T}this.#a&&(x=this.#a,p=this.#h,v=Date.now(),f="error");const y=h.fetchStatus==="fetching",j=f==="pending",N=f==="error",R=j&&y,C=p!==void 0,w={status:f,fetchStatus:h.fetchStatus,isPending:j,isSuccess:f==="success",isError:N,isInitialLoading:R,isLoading:R,data:p,dataUpdatedAt:h.dataUpdatedAt,error:x,errorUpdatedAt:v,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:y,isRefetching:y&&!j,isLoadingError:N&&!C,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:N&&C,isStale:ar(e,s),refetch:this.refetch,promise:this.#i,isEnabled:Le(s.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const T=w.data!==void 0,S=w.status==="error"&&!T,F=E=>{S?E.reject(w.error):T&&E.resolve(w.data)},U=()=>{const E=this.#i=w.promise=On();F(E)},K=this.#i;switch(K.status){case"pending":e.queryHash===n.queryHash&&F(K);break;case"fulfilled":(S||w.data!==K.value)&&U();break;case"rejected":(!S||w.error!==K.reason)&&U();break}}return w}updateResult(){const e=this.#r,s=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#o=this.options,this.#n.data!==void 0&&(this.#m=this.#t),Es(s,e))return;this.#r=s;const n=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,a=typeof r=="function"?r():r;if(a==="all"||!a&&!this.#f.size)return!0;const i=new Set(a??this.#f);return this.options.throwOnError&&i.add("error"),Object.keys(this.#r).some(l=>{const c=l;return this.#r[c]!==e[c]&&i.has(c)})};this.#N({listeners:n()})}#w(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const s=this.#t;this.#t=e,this.#s=e.state,this.hasListeners()&&(s?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#N(e){ye.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function ed(e,s){return Le(s.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&s.retryOnMount===!1)}function Gr(e,s){return ed(e,s)||e.state.data!==void 0&&Ln(e,s,s.refetchOnMount)}function Ln(e,s,n){if(Le(s.enabled,e)!==!1&&ht(s.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&ar(e,s)}return!1}function Qr(e,s,n,r){return(e!==s||Le(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&ar(e,n)}function ar(e,s){return Le(s.enabled,e)!==!1&&e.isStaleByTime(ht(s.staleTime,e))}function td(e,s){return!Es(e.getCurrentResult(),s)}function Yr(e){return{onFetch:(s,n)=>{const r=s.options,a=s.fetchOptions?.meta?.fetchMore?.direction,i=s.state.data?.pages||[],l=s.state.data?.pageParams||[];let c={pages:[],pageParams:[]},d=0;const u=async()=>{let h=!1;const m=v=>{Vl(v,()=>s.signal,()=>h=!0)},p=Ra(s.options,s.fetchOptions),x=async(v,f,g)=>{if(h)return Promise.reject();if(f==null&&v.pages.length)return Promise.resolve(v);const j=(()=>{const A={client:s.client,queryKey:s.queryKey,pageParam:f,direction:g?"backward":"forward",meta:s.options.meta};return m(A),A})(),N=await p(j),{maxPages:R}=s.options,C=g?Hl:Bl;return{pages:C(v.pages,N,R),pageParams:C(v.pageParams,f,R)}};if(a&&i.length){const v=a==="backward",f=v?sd:Xr,g={pages:i,pageParams:l},y=f(r,g);c=await x(g,y,v)}else{const v=e??i.length;do{const f=d===0?l[0]??r.initialPageParam:Xr(r,c);if(d>0&&f==null)break;c=await x(c,f),d++}while(d<v)}return c};s.options.persister?s.fetchFn=()=>s.options.persister?.(u,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},n):s.fetchFn=u}}}function Xr(e,{pages:s,pageParams:n}){const r=s.length-1;return s.length>0?e.getNextPageParam(s[r],s,n[r],n):void 0}function sd(e,{pages:s,pageParams:n}){return s.length>0?e.getPreviousPageParam?.(s[0],s,n[0],n):void 0}var nd=class extends Ta{#e;#t;#s;#r;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#s=e.mutationCache,this.#t=[],this.state=e.state||Ia(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(s=>s!==e),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#s.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const s=()=>{this.#n({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=Ma({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(i,l)=>{this.#n({type:"failed",failureCount:i,error:l})},onPause:()=>{this.#n({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});const r=this.state.status==="pending",a=!this.#r.canStart();try{if(r)s();else{this.#n({type:"pending",variables:e,isPaused:a}),this.#s.config.onMutate&&await this.#s.config.onMutate(e,this,n);const l=await this.options.onMutate?.(e,n);l!==this.state.context&&this.#n({type:"pending",context:l,variables:e,isPaused:a})}const i=await this.#r.start();return await this.#s.config.onSuccess?.(i,e,this.state.context,this,n),await this.options.onSuccess?.(i,e,this.state.context,n),await this.#s.config.onSettled?.(i,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(i,null,e,this.state.context,n),this.#n({type:"success",data:i}),i}catch(i){try{await this.#s.config.onError?.(i,e,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onError?.(i,e,this.state.context,n)}catch(l){Promise.reject(l)}try{await this.#s.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,n)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,i,e,this.state.context,n)}catch(l){Promise.reject(l)}throw this.#n({type:"error",error:i}),i}finally{this.#s.runNext(this)}}#n(e){const s=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),ye.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(e)}),this.#s.notify({mutation:this,type:"updated",action:e})})}};function Ia(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var rd=class extends qt{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(e,s,n){const r=new nd({client:e,mutationCache:this,mutationId:++this.#s,options:e.defaultMutationOptions(s),state:n});return this.add(r),r}add(e){this.#e.add(e);const s=vs(e);if(typeof s=="string"){const n=this.#t.get(s);n?n.push(e):this.#t.set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const s=vs(e);if(typeof s=="string"){const n=this.#t.get(s);if(n)if(n.length>1){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}else n[0]===e&&this.#t.delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=vs(e);if(typeof s=="string"){const r=this.#t.get(s)?.find(a=>a.state.status==="pending");return!r||r===e}else return!0}runNext(e){const s=vs(e);return typeof s=="string"?this.#t.get(s)?.find(r=>r!==e&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){ye.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const s={exact:!0,...e};return this.getAll().find(n=>zr(s,n))}findAll(e={}){return this.getAll().filter(s=>zr(e,s))}notify(e){ye.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return ye.batch(()=>Promise.all(e.map(s=>s.continue().catch(Me))))}};function vs(e){return e.options.scope?.id}var ad=class extends qt{#e;#t=void 0;#s;#r;constructor(s,n){super(),this.#e=s,this.setOptions(n),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){const n=this.options;this.options=this.#e.defaultMutationOptions(s),Es(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),n?.mutationKey&&this.options.mutationKey&&wt(n.mutationKey)!==wt(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(s){this.#n(),this.#o(s)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#o()}mutate(s,n){return this.#r=n,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(s)}#n(){const s=this.#s?.state??Ia();this.#t={...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset}}#o(s){ye.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context,a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(s?.type==="success"){try{this.#r.onSuccess?.(s.data,n,r,a)}catch(i){Promise.reject(i)}try{this.#r.onSettled?.(s.data,null,n,r,a)}catch(i){Promise.reject(i)}}else if(s?.type==="error"){try{this.#r.onError?.(s.error,n,r,a)}catch(i){Promise.reject(i)}try{this.#r.onSettled?.(void 0,s.error,n,r,a)}catch(i){Promise.reject(i)}}}this.listeners.forEach(n=>{n(this.#t)})})}},od=class extends qt{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,s,n){const r=s.queryKey,a=s.queryHash??tr(r,s);let i=this.get(a);return i||(i=new Zl({client:e,queryKey:r,queryHash:a,options:e.defaultQueryOptions(s),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=this.#e.get(e.queryHash);s&&(e.destroy(),s===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ye.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const s={exact:!0,...e};return this.getAll().find(n=>Kr(s,n))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(n=>Kr(e,n)):s}notify(e){ye.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){ye.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ye.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},id=class{#e;#t;#s;#r;#n;#o;#i;#a;constructor(e={}){this.#e=e.queryCache||new od,this.#t=e.mutationCache||new rd,this.#s=e.defaultOptions||{},this.#r=new Map,this.#n=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=rr.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Ms.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const s=this.defaultQueryOptions({queryKey:e});return this.#e.get(s.queryHash)?.state.data}ensureQueryData(e){const s=this.defaultQueryOptions(e),n=this.#e.build(this,s),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(ht(s.staleTime,n))&&this.prefetchQuery(s),Promise.resolve(r))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:s,state:n})=>{const r=n.data;return[s,r]})}setQueryData(e,s,n){const r=this.defaultQueryOptions({queryKey:e}),i=this.#e.get(r.queryHash)?.state.data,l=ql(s,i);if(l!==void 0)return this.#e.build(this,r).setData(l,{...n,manual:!0})}setQueriesData(e,s,n){return ye.batch(()=>this.#e.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,s,n)]))}getQueryState(e){const s=this.defaultQueryOptions({queryKey:e});return this.#e.get(s.queryHash)?.state}removeQueries(e){const s=this.#e;ye.batch(()=>{s.findAll(e).forEach(n=>{s.remove(n)})})}resetQueries(e,s){const n=this.#e;return ye.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},s)))}cancelQueries(e,s={}){const n={revert:!0,...s},r=ye.batch(()=>this.#e.findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(Me).catch(Me)}invalidateQueries(e,s={}){return ye.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},s)))}refetchQueries(e,s={}){const n={...s,cancelRefetch:s.cancelRefetch??!0},r=ye.batch(()=>this.#e.findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(Me)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Me)}fetchQuery(e){const s=this.defaultQueryOptions(e);s.retry===void 0&&(s.retry=!1);const n=this.#e.build(this,s);return n.isStaleByTime(ht(s.staleTime,n))?n.fetch(s):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Me).catch(Me)}fetchInfiniteQuery(e){return e.behavior=Yr(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Me).catch(Me)}ensureInfiniteQueryData(e){return e.behavior=Yr(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ms.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,s){this.#r.set(wt(e),{queryKey:e,defaultOptions:s})}getQueryDefaults(e){const s=[...this.#r.values()],n={};return s.forEach(r=>{Xt(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,s){this.#n.set(wt(e),{mutationKey:e,defaultOptions:s})}getMutationDefaults(e){const s=[...this.#n.values()],n={};return s.forEach(r=>{Xt(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const s={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return s.queryHash||(s.queryHash=tr(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===sr&&(s.enabled=!1),s}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Aa=o.createContext(void 0),ct=e=>{const s=o.useContext(Aa);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},cd=({client:e,children:s})=>(o.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),t.jsx(Aa.Provider,{value:e,children:s})),Da=o.createContext(!1),ld=()=>o.useContext(Da);Da.Provider;function dd(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var ud=o.createContext(dd()),hd=()=>o.useContext(ud),md=(e,s,n)=>{const r=n?.state.error&&typeof e.throwOnError=="function"?nr(e.throwOnError,[n.state.error,n]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||r)&&(s.isReset()||(e.retryOnMount=!1))},fd=e=>{o.useEffect(()=>{e.clearReset()},[e])},pd=({result:e,errorResetBoundary:s,throwOnError:n,query:r,suspense:a})=>e.isError&&!s.isReset()&&!e.isFetching&&r&&(a&&e.data===void 0||nr(n,[e.error,r])),xd=e=>{if(e.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...a)=>n(r(...a)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},gd=(e,s)=>e.isLoading&&e.isFetching&&!s,vd=(e,s)=>e?.suspense&&s.isPending,Zr=(e,s,n)=>s.fetchOptimistic(e).catch(()=>{n.clearReset()});function yd(e,s,n){const r=ld(),a=hd(),i=ct(),l=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(l);const c=i.getQueryCache().get(l.queryHash);l._optimisticResults=r?"isRestoring":"optimistic",xd(l),md(l,a,c),fd(a);const d=!i.getQueryCache().get(l.queryHash),[u]=o.useState(()=>new s(i,l)),h=u.getOptimisticResult(l),m=!r&&e.subscribed!==!1;if(o.useSyncExternalStore(o.useCallback(p=>{const x=m?u.subscribe(ye.batchCalls(p)):Me;return u.updateResult(),x},[u,m]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),o.useEffect(()=>{u.setOptions(l)},[l,u]),vd(l,h))throw Zr(l,u,a);if(pd({result:h,errorResetBoundary:a,throwOnError:l.throwOnError,query:c,suspense:l.suspense}))throw h.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(l,h),l.experimental_prefetchInRender&&!jt&&gd(h,r)&&(d?Zr(l,u,a):c?.promise)?.catch(Me).finally(()=>{u.updateResult()}),l.notifyOnChangeProps?h:u.trackResult(h)}function Ie(e,s){return yd(e,Jl)}function Be(e,s){const n=ct(),[r]=o.useState(()=>new ad(n,e));o.useEffect(()=>{r.setOptions(e)},[r,e]);const a=o.useSyncExternalStore(o.useCallback(l=>r.subscribe(ye.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=o.useCallback((l,c)=>{r.mutate(l,c).catch(Me)},[r]);if(a.error&&nr(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const Oa=o.createContext(null);function bd({children:e}){const[s,n]=o.useState(null),[r,a]=o.useState(!0),i=o.useCallback(async()=>{try{const d=await pn.me();n(d)}catch{n(null)}finally{a(!1)}},[]),l=o.useCallback(async(d,u)=>{await pn.login(d,u),await i()},[i]),c=o.useCallback(async()=>{await pn.logout(),n(null),window.location.href="/dashboard/login.html"},[]);return o.useEffect(()=>{i()},[i]),t.jsx(Oa.Provider,{value:{user:s,isLoading:r,isLoggedIn:!!s,login:l,logout:c,checkAuth:i},children:e})}function or(){const e=o.useContext(Oa);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}var jd=Rl[" useId ".trim().toString()]||(()=>{}),wd=0;function Ye(e){const[s,n]=o.useState(jd());return Ze(()=>{n(r=>r??String(wd++))},[e]),s?`radix-${s}`:""}const Nd=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Cd=O("activity",Nd);const Sd=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Fa=O("arrow-left",Sd);const _d=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kd=O("ban",_d);const Rd=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],La=O("bot",Rd);const Ed=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Md=O("box",Ed);const Td=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Pd=O("calendar",Td);const Id=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ad=O("chart-column",Id);const Dd=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Je=O("check",Dd);const Od=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ir=O("chevron-down",Od);const Fd=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],$a=O("chevron-left",Fd);const Ld=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],cr=O("chevron-right",Ld);const $d=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ua=O("chevron-up",$d);const Ud=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],lr=O("circle-alert",Ud);const qd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],Jr=O("circle-arrow-up",qd);const Kd=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zd=O("circle-check-big",Kd);const Bd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],Hd=O("circle-dot",Bd);const Vd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Zt=O("circle-x",Vd);const Wd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Gd=O("circle",Wd);const Qd=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Jt=O("clock",Qd);const Yd=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],qa=O("code",Yd);const Xd=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Nt=O("copy",Xd);const Zd=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],dr=O("download",Zd);const Jd=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],eu=O("external-link",Jd);const tu=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],su=O("eye-off",tu);const nu=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ru=O("eye",nu);const au=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ka=O("file-text",au);const ou=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],iu=O("gauge",ou);const cu=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],lu=O("globe",cu);const du=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],uu=O("hard-drive",du);const hu=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Gt=O("history",hu);const mu=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],fu=O("hourglass",mu);const pu=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],za=O("image",pu);const xu=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],gu=O("info",xu);const vu=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],yu=O("key-round",vu);const bu=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Ts=O("key",bu);const ju=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ne=O("loader-circle",ju);const wu=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Nu=O("log-out",wu);const Cu=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],$t=O("message-square",Cu);const Su=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],$n=O("mic",Su);const _u=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],ku=O("moon",_u);const Ru=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Ps=O("network",Ru);const Eu=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ur=O("play",Eu);const Mu=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ks=O("plus",Mu);const Tu=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],et=O("refresh-cw",Tu);const Pu=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Iu=O("save",Pu);const Au=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Du=O("search",Au);const Ou=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ba=O("send",Ou);const Fu=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],es=O("server",Fu);const Lu=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ha=O("settings",Lu);const $u=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Uu=O("shield",$u);const qu=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ku=O("square-pen",qu);const zu=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Bu=O("square",zu);const Hu=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Vu=O("sun",Hu);const Wu=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Kt=O("trash-2",Wu);const Gu=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Qu=O("trending-up",Gu);const Yu=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Un=O("users",Yu);const Xu=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Is=O("volume-2",Xu);const Zu=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ju=O("zap",Zu);function eh(e={}){const{onMessage:s,onConnect:n,onDisconnect:r,reconnectInterval:a=3e3}=e,i=ct(),l=o.useRef(null),c=o.useRef(null),[d,u]=o.useState(!1),[h,m]=o.useState(null),p=o.useCallback(()=>{const f=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws/dashboard`;try{const g=new WebSocket(f);l.current=g,g.onopen=()=>{u(!0),n?.()},g.onmessage=y=>{try{const j=JSON.parse(y.data);switch(m(j),s?.(j),j.type){case"NodeRegistered":case"NodeRemoved":case"NodeStatusChanged":i.invalidateQueries({queryKey:["dashboard-overview"]}),i.invalidateQueries({queryKey:["request-responses"]});break;case"MetricsUpdated":i.invalidateQueries({queryKey:["dashboard-overview"]});break}}catch(j){console.error("Failed to parse WebSocket message:",j)}},g.onclose=()=>{u(!1),r?.(),l.current=null,c.current&&clearTimeout(c.current),c.current=setTimeout(p,a)},g.onerror=y=>{console.error("WebSocket error:",y),g.close()}}catch(g){console.error("Failed to create WebSocket:",g),c.current=setTimeout(p,a)}},[s,n,r,a,i]),x=o.useCallback(()=>{c.current&&(clearTimeout(c.current),c.current=null),l.current&&(l.current.close(),l.current=null),u(!1)},[]);return o.useEffect(()=>(p(),()=>{x()}),[p,x]),{isConnected:d,lastEvent:h,reconnect:p,disconnect:x}}function th(){const{isConnected:e,lastEvent:s,reconnect:n}=eh({onConnect:()=>{console.log("Dashboard WebSocket connected")},onDisconnect:()=>{console.log("Dashboard WebSocket disconnected")}});return{isConnected:e,lastEvent:s,reconnect:n}}const yn="llmlb-theme";function sh(){const[e,s]=o.useState(()=>{if(typeof window>"u")return"dark";const r=localStorage.getItem(yn);return r==="light"||r==="dark"?r:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"});o.useEffect(()=>{document.documentElement.classList.toggle("dark",e==="dark"),localStorage.setItem(yn,e)},[e]),o.useEffect(()=>{const r=window.matchMedia("(prefers-color-scheme: dark)"),a=i=>{localStorage.getItem(yn)||s(i.matches?"dark":"light")};return r.addEventListener("change",a),()=>r.removeEventListener("change",a)},[]);const n=o.useCallback(()=>{s(r=>r==="dark"?"light":"dark")},[]);return{theme:e,setTheme:s,toggleTheme:n}}var nh=o.createContext(void 0);function ns(e){const s=o.useContext(nh);return e||s||"ltr"}var bn=0;function hr(){o.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??ea()),document.body.insertAdjacentElement("beforeend",e[1]??ea()),bn++,()=>{bn===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),bn--}},[])}function ea(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var jn="focusScope.autoFocusOnMount",wn="focusScope.autoFocusOnUnmount",ta={bubbles:!1,cancelable:!0},rh="FocusScope",zs=o.forwardRef((e,s)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...l}=e,[c,d]=o.useState(null),u=Ae(a),h=Ae(i),m=o.useRef(null),p=Z(s,f=>d(f)),x=o.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;o.useEffect(()=>{if(r){let f=function(N){if(x.paused||!c)return;const R=N.target;c.contains(R)?m.current=R:ut(m.current,{select:!0})},g=function(N){if(x.paused||!c)return;const R=N.relatedTarget;R!==null&&(c.contains(R)||ut(m.current,{select:!0}))},y=function(N){if(document.activeElement===document.body)for(const C of N)C.removedNodes.length>0&&ut(c)};document.addEventListener("focusin",f),document.addEventListener("focusout",g);const j=new MutationObserver(y);return c&&j.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",g),j.disconnect()}}},[r,c,x.paused]),o.useEffect(()=>{if(c){na.add(x);const f=document.activeElement;if(!c.contains(f)){const y=new CustomEvent(jn,ta);c.addEventListener(jn,u),c.dispatchEvent(y),y.defaultPrevented||(ah(dh(Va(c)),{select:!0}),document.activeElement===f&&ut(c))}return()=>{c.removeEventListener(jn,u),setTimeout(()=>{const y=new CustomEvent(wn,ta);c.addEventListener(wn,h),c.dispatchEvent(y),y.defaultPrevented||ut(f??document.body,{select:!0}),c.removeEventListener(wn,h),na.remove(x)},0)}}},[c,u,h,x]);const v=o.useCallback(f=>{if(!n&&!r||x.paused)return;const g=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,y=document.activeElement;if(g&&y){const j=f.currentTarget,[N,R]=oh(j);N&&R?!f.shiftKey&&y===R?(f.preventDefault(),n&&ut(N,{select:!0})):f.shiftKey&&y===N&&(f.preventDefault(),n&&ut(R,{select:!0})):y===j&&f.preventDefault()}},[n,r,x.paused]);return t.jsx(V.div,{tabIndex:-1,...l,ref:p,onKeyDown:v})});zs.displayName=rh;function ah(e,{select:s=!1}={}){const n=document.activeElement;for(const r of e)if(ut(r,{select:s}),document.activeElement!==n)return}function oh(e){const s=Va(e),n=sa(s,e),r=sa(s.reverse(),e);return[n,r]}function Va(e){const s=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function sa(e,s){for(const n of e)if(!ih(n,{upTo:s}))return n}function ih(e,{upTo:s}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(s!==void 0&&e===s)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ch(e){return e instanceof HTMLInputElement&&"select"in e}function ut(e,{select:s=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&ch(e)&&s&&e.select()}}var na=lh();function lh(){let e=[];return{add(s){const n=e[0];s!==n&&n?.pause(),e=ra(e,s),e.unshift(s)},remove(s){e=ra(e,s),e[0]?.resume()}}}function ra(e,s){const n=[...e],r=n.indexOf(s);return r!==-1&&n.splice(r,1),n}function dh(e){return e.filter(s=>s.tagName!=="A")}var Nn="rovingFocusGroup.onEntryFocus",uh={bubbles:!1,cancelable:!0},rs="RovingFocusGroup",[qn,Wa,hh]=Yn(rs),[mh,Bs]=nt(rs,[hh]),[fh,ph]=mh(rs),Ga=o.forwardRef((e,s)=>t.jsx(qn.Provider,{scope:e.__scopeRovingFocusGroup,children:t.jsx(qn.Slot,{scope:e.__scopeRovingFocusGroup,children:t.jsx(xh,{...e,ref:s})})}));Ga.displayName=rs;var xh=o.forwardRef((e,s)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...m}=e,p=o.useRef(null),x=Z(s,p),v=ns(i),[f,g]=ft({prop:l,defaultProp:c??null,onChange:d,caller:rs}),[y,j]=o.useState(!1),N=Ae(u),R=Wa(n),C=o.useRef(!1),[A,w]=o.useState(0);return o.useEffect(()=>{const T=p.current;if(T)return T.addEventListener(Nn,N),()=>T.removeEventListener(Nn,N)},[N]),t.jsx(fh,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:f,onItemFocus:o.useCallback(T=>g(T),[g]),onItemShiftTab:o.useCallback(()=>j(!0),[]),onFocusableItemAdd:o.useCallback(()=>w(T=>T+1),[]),onFocusableItemRemove:o.useCallback(()=>w(T=>T-1),[]),children:t.jsx(V.div,{tabIndex:y||A===0?-1:0,"data-orientation":r,...m,ref:x,style:{outline:"none",...e.style},onMouseDown:P(e.onMouseDown,()=>{C.current=!0}),onFocus:P(e.onFocus,T=>{const S=!C.current;if(T.target===T.currentTarget&&S&&!y){const F=new CustomEvent(Nn,uh);if(T.currentTarget.dispatchEvent(F),!F.defaultPrevented){const U=R().filter(z=>z.focusable),K=U.find(z=>z.active),E=U.find(z=>z.id===f),L=[K,E,...U].filter(Boolean).map(z=>z.ref.current);Xa(L,h)}}C.current=!1}),onBlur:P(e.onBlur,()=>j(!1))})})}),Qa="RovingFocusGroupItem",Ya=o.forwardRef((e,s)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:l,...c}=e,d=Ye(),u=i||d,h=ph(Qa,n),m=h.currentTabStopId===u,p=Wa(n),{onFocusableItemAdd:x,onFocusableItemRemove:v,currentTabStopId:f}=h;return o.useEffect(()=>{if(r)return x(),()=>v()},[r,x,v]),t.jsx(qn.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:t.jsx(V.span,{tabIndex:m?0:-1,"data-orientation":h.orientation,...c,ref:s,onMouseDown:P(e.onMouseDown,g=>{r?h.onItemFocus(u):g.preventDefault()}),onFocus:P(e.onFocus,()=>h.onItemFocus(u)),onKeyDown:P(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){h.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const y=yh(g,h.orientation,h.dir);if(y!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let N=p().filter(R=>R.focusable).map(R=>R.ref.current);if(y==="last")N.reverse();else if(y==="prev"||y==="next"){y==="prev"&&N.reverse();const R=N.indexOf(g.currentTarget);N=h.loop?bh(N,R+1):N.slice(R+1)}setTimeout(()=>Xa(N))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:f!=null}):l})})});Ya.displayName=Qa;var gh={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function vh(e,s){return s!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function yh(e,s,n){const r=vh(e.key,n);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return gh[r]}function Xa(e,s=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:s}),document.activeElement!==n))return}function bh(e,s){return e.map((n,r)=>e[(s+r)%e.length])}var Za=Ga,Ja=Ya,jh=function(e){if(typeof document>"u")return null;var s=Array.isArray(e)?e[0]:e;return s.ownerDocument.body},Mt=new WeakMap,ys=new WeakMap,bs={},Cn=0,eo=function(e){return e&&(e.host||eo(e.parentNode))},wh=function(e,s){return s.map(function(n){if(e.contains(n))return n;var r=eo(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Nh=function(e,s,n,r){var a=wh(s,Array.isArray(e)?e:[e]);bs[n]||(bs[n]=new WeakMap);var i=bs[n],l=[],c=new Set,d=new Set(a),u=function(m){!m||c.has(m)||(c.add(m),u(m.parentNode))};a.forEach(u);var h=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(p){if(c.has(p))h(p);else try{var x=p.getAttribute(r),v=x!==null&&x!=="false",f=(Mt.get(p)||0)+1,g=(i.get(p)||0)+1;Mt.set(p,f),i.set(p,g),l.push(p),f===1&&v&&ys.set(p,!0),g===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",p,y)}})};return h(s),c.clear(),Cn++,function(){l.forEach(function(m){var p=Mt.get(m)-1,x=i.get(m)-1;Mt.set(m,p),i.set(m,x),p||(ys.has(m)||m.removeAttribute(r),ys.delete(m)),x||m.removeAttribute(n)}),Cn--,Cn||(Mt=new WeakMap,Mt=new WeakMap,ys=new WeakMap,bs={})}},mr=function(e,s,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=jh(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live], script"))),Nh(r,a,n,"aria-hidden")):function(){return null}},We=function(){return We=Object.assign||function(s){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},We.apply(this,arguments)};function to(e,s){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&s.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function Ch(e,s,n){if(n||arguments.length===2)for(var r=0,a=s.length,i;r<a;r++)(i||!(r in s))&&(i||(i=Array.prototype.slice.call(s,0,r)),i[r]=s[r]);return e.concat(i||Array.prototype.slice.call(s))}var Cs="right-scroll-bar-position",Ss="width-before-scroll-bar",Sh="with-scroll-bars-hidden",_h="--removed-body-scroll-bar-size";function Sn(e,s){return typeof e=="function"?e(s):e&&(e.current=s),e}function kh(e,s){var n=o.useState(function(){return{value:e,callback:s,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=s,n.facade}var Rh=typeof window<"u"?o.useLayoutEffect:o.useEffect,aa=new WeakMap;function Eh(e,s){var n=kh(null,function(r){return e.forEach(function(a){return Sn(a,r)})});return Rh(function(){var r=aa.get(n);if(r){var a=new Set(r),i=new Set(e),l=n.current;a.forEach(function(c){i.has(c)||Sn(c,null)}),i.forEach(function(c){a.has(c)||Sn(c,l)})}aa.set(n,e)},[e]),n}function Mh(e){return e}function Th(e,s){s===void 0&&(s=Mh);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var l=s(i,r);return n.push(l),function(){n=n.filter(function(c){return c!==l})}},assignSyncMedium:function(i){for(r=!0;n.length;){var l=n;n=[],l.forEach(i)}n={push:function(c){return i(c)},filter:function(){return n}}},assignMedium:function(i){r=!0;var l=[];if(n.length){var c=n;n=[],c.forEach(i),l=n}var d=function(){var h=l;l=[],h.forEach(i)},u=function(){return Promise.resolve().then(d)};u(),n={push:function(h){l.push(h),u()},filter:function(h){return l=l.filter(h),n}}}};return a}function Ph(e){e===void 0&&(e={});var s=Th(null);return s.options=We({async:!0,ssr:!1},e),s}var so=function(e){var s=e.sideCar,n=to(e,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=s.read();if(!r)throw new Error("Sidecar medium not found");return o.createElement(r,We({},n))};so.isSideCarExport=!0;function Ih(e,s){return e.useMedium(s),so}var no=Ph(),_n=function(){},Hs=o.forwardRef(function(e,s){var n=o.useRef(null),r=o.useState({onScrollCapture:_n,onWheelCapture:_n,onTouchMoveCapture:_n}),a=r[0],i=r[1],l=e.forwardProps,c=e.children,d=e.className,u=e.removeScrollBar,h=e.enabled,m=e.shards,p=e.sideCar,x=e.noRelative,v=e.noIsolation,f=e.inert,g=e.allowPinchZoom,y=e.as,j=y===void 0?"div":y,N=e.gapMode,R=to(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=p,A=Eh([n,s]),w=We(We({},R),a);return o.createElement(o.Fragment,null,h&&o.createElement(C,{sideCar:no,removeScrollBar:u,shards:m,noRelative:x,noIsolation:v,inert:f,setCallbacks:i,allowPinchZoom:!!g,lockRef:n,gapMode:N}),l?o.cloneElement(o.Children.only(c),We(We({},w),{ref:A})):o.createElement(j,We({},w,{className:d,ref:A}),c))});Hs.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Hs.classNames={fullWidth:Ss,zeroRight:Cs};var Ah=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Dh(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var s=Ah();return s&&e.setAttribute("nonce",s),e}function Oh(e,s){e.styleSheet?e.styleSheet.cssText=s:e.appendChild(document.createTextNode(s))}function Fh(e){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(e)}var Lh=function(){var e=0,s=null;return{add:function(n){e==0&&(s=Dh())&&(Oh(s,n),Fh(s)),e++},remove:function(){e--,!e&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},$h=function(){var e=Lh();return function(s,n){o.useEffect(function(){return e.add(s),function(){e.remove()}},[s&&n])}},ro=function(){var e=$h(),s=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return s},Uh={left:0,top:0,right:0,gap:0},kn=function(e){return parseInt(e||"",10)||0},qh=function(e){var s=window.getComputedStyle(document.body),n=s[e==="padding"?"paddingLeft":"marginLeft"],r=s[e==="padding"?"paddingTop":"marginTop"],a=s[e==="padding"?"paddingRight":"marginRight"];return[kn(n),kn(r),kn(a)]},Kh=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Uh;var s=qh(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,r-n+s[2]-s[0])}},zh=ro(),Dt="data-scroll-locked",Bh=function(e,s,n,r){var a=e.left,i=e.top,l=e.right,c=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Sh,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(Dt,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Cs,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Ss,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Cs," .").concat(Cs,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ss," .").concat(Ss,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Dt,`] {
    `).concat(_h,": ").concat(c,`px;
  }
`)},oa=function(){var e=parseInt(document.body.getAttribute(Dt)||"0",10);return isFinite(e)?e:0},Hh=function(){o.useEffect(function(){return document.body.setAttribute(Dt,(oa()+1).toString()),function(){var e=oa()-1;e<=0?document.body.removeAttribute(Dt):document.body.setAttribute(Dt,e.toString())}},[])},Vh=function(e){var s=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;Hh();var i=o.useMemo(function(){return Kh(a)},[a]);return o.createElement(zh,{styles:Bh(i,!s,a,n?"":"!important")})},Kn=!1;if(typeof window<"u")try{var js=Object.defineProperty({},"passive",{get:function(){return Kn=!0,!0}});window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{Kn=!1}var Tt=Kn?{passive:!1}:!1,Wh=function(e){return e.tagName==="TEXTAREA"},ao=function(e,s){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[s]!=="hidden"&&!(n.overflowY===n.overflowX&&!Wh(e)&&n[s]==="visible")},Gh=function(e){return ao(e,"overflowY")},Qh=function(e){return ao(e,"overflowX")},ia=function(e,s){var n=s.ownerDocument,r=s;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=oo(e,r);if(a){var i=io(e,r),l=i[1],c=i[2];if(l>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Yh=function(e){var s=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[s,n,r]},Xh=function(e){var s=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[s,n,r]},oo=function(e,s){return e==="v"?Gh(s):Qh(s)},io=function(e,s){return e==="v"?Yh(s):Xh(s)},Zh=function(e,s){return e==="h"&&s==="rtl"?-1:1},Jh=function(e,s,n,r,a){var i=Zh(e,window.getComputedStyle(s).direction),l=i*r,c=n.target,d=s.contains(c),u=!1,h=l>0,m=0,p=0;do{if(!c)break;var x=io(e,c),v=x[0],f=x[1],g=x[2],y=f-g-i*v;(v||y)&&oo(e,c)&&(m+=y,p+=v);var j=c.parentNode;c=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!d&&c!==document.body||d&&(s.contains(c)||s===c));return(h&&Math.abs(m)<1||!h&&Math.abs(p)<1)&&(u=!0),u},ws=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ca=function(e){return[e.deltaX,e.deltaY]},la=function(e){return e&&"current"in e?e.current:e},em=function(e,s){return e[0]===s[0]&&e[1]===s[1]},tm=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},sm=0,Pt=[];function nm(e){var s=o.useRef([]),n=o.useRef([0,0]),r=o.useRef(),a=o.useState(sm++)[0],i=o.useState(ro)[0],l=o.useRef(e);o.useEffect(function(){l.current=e},[e]),o.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var f=Ch([e.lockRef.current],(e.shards||[]).map(la),!0).filter(Boolean);return f.forEach(function(g){return g.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),f.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var c=o.useCallback(function(f,g){if("touches"in f&&f.touches.length===2||f.type==="wheel"&&f.ctrlKey)return!l.current.allowPinchZoom;var y=ws(f),j=n.current,N="deltaX"in f?f.deltaX:j[0]-y[0],R="deltaY"in f?f.deltaY:j[1]-y[1],C,A=f.target,w=Math.abs(N)>Math.abs(R)?"h":"v";if("touches"in f&&w==="h"&&A.type==="range")return!1;var T=window.getSelection(),S=T&&T.anchorNode,F=S?S===A||S.contains(A):!1;if(F)return!1;var U=ia(w,A);if(!U)return!0;if(U?C=w:(C=w==="v"?"h":"v",U=ia(w,A)),!U)return!1;if(!r.current&&"changedTouches"in f&&(N||R)&&(r.current=C),!C)return!0;var K=r.current||C;return Jh(K,g,f,K==="h"?N:R)},[]),d=o.useCallback(function(f){var g=f;if(!(!Pt.length||Pt[Pt.length-1]!==i)){var y="deltaY"in g?ca(g):ws(g),j=s.current.filter(function(C){return C.name===g.type&&(C.target===g.target||g.target===C.shadowParent)&&em(C.delta,y)})[0];if(j&&j.should){g.cancelable&&g.preventDefault();return}if(!j){var N=(l.current.shards||[]).map(la).filter(Boolean).filter(function(C){return C.contains(g.target)}),R=N.length>0?c(g,N[0]):!l.current.noIsolation;R&&g.cancelable&&g.preventDefault()}}},[]),u=o.useCallback(function(f,g,y,j){var N={name:f,delta:g,target:y,should:j,shadowParent:rm(y)};s.current.push(N),setTimeout(function(){s.current=s.current.filter(function(R){return R!==N})},1)},[]),h=o.useCallback(function(f){n.current=ws(f),r.current=void 0},[]),m=o.useCallback(function(f){u(f.type,ca(f),f.target,c(f,e.lockRef.current))},[]),p=o.useCallback(function(f){u(f.type,ws(f),f.target,c(f,e.lockRef.current))},[]);o.useEffect(function(){return Pt.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",d,Tt),document.addEventListener("touchmove",d,Tt),document.addEventListener("touchstart",h,Tt),function(){Pt=Pt.filter(function(f){return f!==i}),document.removeEventListener("wheel",d,Tt),document.removeEventListener("touchmove",d,Tt),document.removeEventListener("touchstart",h,Tt)}},[]);var x=e.removeScrollBar,v=e.inert;return o.createElement(o.Fragment,null,v?o.createElement(i,{styles:tm(a)}):null,x?o.createElement(Vh,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function rm(e){for(var s=null;e!==null;)e instanceof ShadowRoot&&(s=e.host,e=e.host),e=e.parentNode;return s}const am=Ih(no,nm);var Vs=o.forwardRef(function(e,s){return o.createElement(Hs,We({},e,{ref:s,sideCar:am}))});Vs.classNames=Hs.classNames;var zn=["Enter"," "],om=["ArrowDown","PageUp","Home"],co=["ArrowUp","PageDown","End"],im=[...om,...co],cm={ltr:[...zn,"ArrowRight"],rtl:[...zn,"ArrowLeft"]},lm={ltr:["ArrowLeft"],rtl:["ArrowRight"]},as="Menu",[ts,dm,um]=Yn(as),[kt,lo]=nt(as,[um,Us,Bs]),Ws=Us(),uo=Bs(),[hm,Rt]=kt(as),[mm,os]=kt(as),ho=e=>{const{__scopeMenu:s,open:n=!1,children:r,dir:a,onOpenChange:i,modal:l=!0}=e,c=Ws(s),[d,u]=o.useState(null),h=o.useRef(!1),m=Ae(i),p=ns(a);return o.useEffect(()=>{const x=()=>{h.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>h.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),t.jsx(ba,{...c,children:t.jsx(hm,{scope:s,open:n,onOpenChange:m,content:d,onContentChange:u,children:t.jsx(mm,{scope:s,onClose:o.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:h,dir:p,modal:l,children:r})})})};ho.displayName=as;var fm="MenuAnchor",fr=o.forwardRef((e,s)=>{const{__scopeMenu:n,...r}=e,a=Ws(n);return t.jsx(va,{...a,...r,ref:s})});fr.displayName=fm;var pr="MenuPortal",[pm,mo]=kt(pr,{forceMount:void 0}),fo=e=>{const{__scopeMenu:s,forceMount:n,children:r,container:a}=e,i=Rt(pr,s);return t.jsx(pm,{scope:s,forceMount:n,children:t.jsx(Fe,{present:n||i.open,children:t.jsx(Xn,{asChild:!0,container:a,children:r})})})};fo.displayName=pr;var $e="MenuContent",[xm,xr]=kt($e),po=o.forwardRef((e,s)=>{const n=mo($e,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Rt($e,e.__scopeMenu),l=os($e,e.__scopeMenu);return t.jsx(ts.Provider,{scope:e.__scopeMenu,children:t.jsx(Fe,{present:r||i.open,children:t.jsx(ts.Slot,{scope:e.__scopeMenu,children:l.modal?t.jsx(gm,{...a,ref:s}):t.jsx(vm,{...a,ref:s})})})})}),gm=o.forwardRef((e,s)=>{const n=Rt($e,e.__scopeMenu),r=o.useRef(null),a=Z(s,r);return o.useEffect(()=>{const i=r.current;if(i)return mr(i)},[]),t.jsx(gr,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:P(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),vm=o.forwardRef((e,s)=>{const n=Rt($e,e.__scopeMenu);return t.jsx(gr,{...e,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),ym=Zn("MenuContent.ScrollLock"),gr=o.forwardRef((e,s)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:c,onEntryFocus:d,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:p,onDismiss:x,disableOutsideScroll:v,...f}=e,g=Rt($e,n),y=os($e,n),j=Ws(n),N=uo(n),R=dm(n),[C,A]=o.useState(null),w=o.useRef(null),T=Z(s,w,g.onContentChange),S=o.useRef(0),F=o.useRef(""),U=o.useRef(0),K=o.useRef(null),E=o.useRef("right"),q=o.useRef(0),L=v?Vs:o.Fragment,z=v?{as:ym,allowPinchZoom:!0}:void 0,ae=D=>{const be=F.current+D,se=R().filter(b=>!b.disabled),xe=document.activeElement,de=se.find(b=>b.ref.current===xe)?.textValue,fe=se.map(b=>b.textValue),je=Tm(fe,be,de),ue=se.find(b=>b.textValue===je)?.ref.current;(function b(B){F.current=B,window.clearTimeout(S.current),B!==""&&(S.current=window.setTimeout(()=>b(""),1e3))})(be),ue&&setTimeout(()=>ue.focus())};o.useEffect(()=>()=>window.clearTimeout(S.current),[]),hr();const he=o.useCallback(D=>E.current===K.current?.side&&Im(D,K.current?.area),[]);return t.jsx(xm,{scope:n,searchRef:F,onItemEnter:o.useCallback(D=>{he(D)&&D.preventDefault()},[he]),onItemLeave:o.useCallback(D=>{he(D)||(w.current?.focus(),A(null))},[he]),onTriggerLeave:o.useCallback(D=>{he(D)&&D.preventDefault()},[he]),pointerGraceTimerRef:U,onPointerGraceIntentChange:o.useCallback(D=>{K.current=D},[]),children:t.jsx(L,{...z,children:t.jsx(zs,{asChild:!0,trapped:a,onMountAutoFocus:P(i,D=>{D.preventDefault(),w.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:t.jsx(Jn,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:p,onDismiss:x,children:t.jsx(Za,{asChild:!0,...N,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:C,onCurrentTabStopIdChange:A,onEntryFocus:P(d,D=>{y.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:t.jsx(ya,{role:"menu","aria-orientation":"vertical","data-state":To(g.open),"data-radix-menu-content":"",dir:y.dir,...j,...f,ref:T,style:{outline:"none",...f.style},onKeyDown:P(f.onKeyDown,D=>{const se=D.target.closest("[data-radix-menu-content]")===D.currentTarget,xe=D.ctrlKey||D.altKey||D.metaKey,de=D.key.length===1;se&&(D.key==="Tab"&&D.preventDefault(),!xe&&de&&ae(D.key));const fe=w.current;if(D.target!==fe||!im.includes(D.key))return;D.preventDefault();const ue=R().filter(b=>!b.disabled).map(b=>b.ref.current);co.includes(D.key)&&ue.reverse(),Em(ue)}),onBlur:P(e.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(S.current),F.current="")}),onPointerMove:P(e.onPointerMove,ss(D=>{const be=D.target,se=q.current!==D.clientX;if(D.currentTarget.contains(be)&&se){const xe=D.clientX>q.current?"right":"left";E.current=xe,q.current=D.clientX}}))})})})})})})});po.displayName=$e;var bm="MenuGroup",vr=o.forwardRef((e,s)=>{const{__scopeMenu:n,...r}=e;return t.jsx(V.div,{role:"group",...r,ref:s})});vr.displayName=bm;var jm="MenuLabel",xo=o.forwardRef((e,s)=>{const{__scopeMenu:n,...r}=e;return t.jsx(V.div,{...r,ref:s})});xo.displayName=jm;var As="MenuItem",da="menu.itemSelect",Gs=o.forwardRef((e,s)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=o.useRef(null),l=os(As,e.__scopeMenu),c=xr(As,e.__scopeMenu),d=Z(s,i),u=o.useRef(!1),h=()=>{const m=i.current;if(!n&&m){const p=new CustomEvent(da,{bubbles:!0,cancelable:!0});m.addEventListener(da,x=>r?.(x),{once:!0}),El(m,p),p.defaultPrevented?u.current=!1:l.onClose()}};return t.jsx(go,{...a,ref:d,disabled:n,onClick:P(e.onClick,h),onPointerDown:m=>{e.onPointerDown?.(m),u.current=!0},onPointerUp:P(e.onPointerUp,m=>{u.current||m.currentTarget?.click()}),onKeyDown:P(e.onKeyDown,m=>{const p=c.searchRef.current!=="";n||p&&m.key===" "||zn.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Gs.displayName=As;var go=o.forwardRef((e,s)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,l=xr(As,n),c=uo(n),d=o.useRef(null),u=Z(s,d),[h,m]=o.useState(!1),[p,x]=o.useState("");return o.useEffect(()=>{const v=d.current;v&&x((v.textContent??"").trim())},[i.children]),t.jsx(ts.ItemSlot,{scope:n,disabled:r,textValue:a??p,children:t.jsx(Ja,{asChild:!0,...c,focusable:!r,children:t.jsx(V.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:P(e.onPointerMove,ss(v=>{r?l.onItemLeave(v):(l.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:P(e.onPointerLeave,ss(v=>l.onItemLeave(v))),onFocus:P(e.onFocus,()=>m(!0)),onBlur:P(e.onBlur,()=>m(!1))})})})}),wm="MenuCheckboxItem",vo=o.forwardRef((e,s)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return t.jsx(No,{scope:e.__scopeMenu,checked:n,children:t.jsx(Gs,{role:"menuitemcheckbox","aria-checked":Ds(n)?"mixed":n,...a,ref:s,"data-state":br(n),onSelect:P(a.onSelect,()=>r?.(Ds(n)?!0:!n),{checkForDefaultPrevented:!1})})})});vo.displayName=wm;var yo="MenuRadioGroup",[Nm,Cm]=kt(yo,{value:void 0,onValueChange:()=>{}}),bo=o.forwardRef((e,s)=>{const{value:n,onValueChange:r,...a}=e,i=Ae(r);return t.jsx(Nm,{scope:e.__scopeMenu,value:n,onValueChange:i,children:t.jsx(vr,{...a,ref:s})})});bo.displayName=yo;var jo="MenuRadioItem",wo=o.forwardRef((e,s)=>{const{value:n,...r}=e,a=Cm(jo,e.__scopeMenu),i=n===a.value;return t.jsx(No,{scope:e.__scopeMenu,checked:i,children:t.jsx(Gs,{role:"menuitemradio","aria-checked":i,...r,ref:s,"data-state":br(i),onSelect:P(r.onSelect,()=>a.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});wo.displayName=jo;var yr="MenuItemIndicator",[No,Sm]=kt(yr,{checked:!1}),Co=o.forwardRef((e,s)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=Sm(yr,n);return t.jsx(Fe,{present:r||Ds(i.checked)||i.checked===!0,children:t.jsx(V.span,{...a,ref:s,"data-state":br(i.checked)})})});Co.displayName=yr;var _m="MenuSeparator",So=o.forwardRef((e,s)=>{const{__scopeMenu:n,...r}=e;return t.jsx(V.div,{role:"separator","aria-orientation":"horizontal",...r,ref:s})});So.displayName=_m;var km="MenuArrow",_o=o.forwardRef((e,s)=>{const{__scopeMenu:n,...r}=e,a=Ws(n);return t.jsx(ja,{...a,...r,ref:s})});_o.displayName=km;var Rm="MenuSub",[Ox,ko]=kt(Rm),Qt="MenuSubTrigger",Ro=o.forwardRef((e,s)=>{const n=Rt(Qt,e.__scopeMenu),r=os(Qt,e.__scopeMenu),a=ko(Qt,e.__scopeMenu),i=xr(Qt,e.__scopeMenu),l=o.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:d}=i,u={__scopeMenu:e.__scopeMenu},h=o.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return o.useEffect(()=>h,[h]),o.useEffect(()=>{const m=c.current;return()=>{window.clearTimeout(m),d(null)}},[c,d]),t.jsx(fr,{asChild:!0,...u,children:t.jsx(go,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":To(n.open),...e,ref:ga(s,a.onTriggerChange),onClick:m=>{e.onClick?.(m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:P(e.onPointerMove,ss(m=>{i.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!n.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:P(e.onPointerLeave,ss(m=>{h();const p=n.content?.getBoundingClientRect();if(p){const x=n.content?.dataset.side,v=x==="right",f=v?-5:5,g=p[v?"left":"right"],y=p[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+f,y:m.clientY},{x:g,y:p.top},{x:y,y:p.top},{x:y,y:p.bottom},{x:g,y:p.bottom}],side:x}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:P(e.onKeyDown,m=>{const p=i.searchRef.current!=="";e.disabled||p&&m.key===" "||cm[r.dir].includes(m.key)&&(n.onOpenChange(!0),n.content?.focus(),m.preventDefault())})})})});Ro.displayName=Qt;var Eo="MenuSubContent",Mo=o.forwardRef((e,s)=>{const n=mo($e,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Rt($e,e.__scopeMenu),l=os($e,e.__scopeMenu),c=ko(Eo,e.__scopeMenu),d=o.useRef(null),u=Z(s,d);return t.jsx(ts.Provider,{scope:e.__scopeMenu,children:t.jsx(Fe,{present:r||i.open,children:t.jsx(ts.Slot,{scope:e.__scopeMenu,children:t.jsx(gr,{id:c.contentId,"aria-labelledby":c.triggerId,...a,ref:u,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{l.isUsingKeyboardRef.current&&d.current?.focus(),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:P(e.onFocusOutside,h=>{h.target!==c.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:P(e.onEscapeKeyDown,h=>{l.onClose(),h.preventDefault()}),onKeyDown:P(e.onKeyDown,h=>{const m=h.currentTarget.contains(h.target),p=lm[l.dir].includes(h.key);m&&p&&(i.onOpenChange(!1),c.trigger?.focus(),h.preventDefault())})})})})})});Mo.displayName=Eo;function To(e){return e?"open":"closed"}function Ds(e){return e==="indeterminate"}function br(e){return Ds(e)?"indeterminate":e?"checked":"unchecked"}function Em(e){const s=document.activeElement;for(const n of e)if(n===s||(n.focus(),document.activeElement!==s))return}function Mm(e,s){return e.map((n,r)=>e[(s+r)%e.length])}function Tm(e,s,n){const a=s.length>1&&Array.from(s).every(u=>u===s[0])?s[0]:s,i=n?e.indexOf(n):-1;let l=Mm(e,Math.max(i,0));a.length===1&&(l=l.filter(u=>u!==n));const d=l.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return d!==n?d:void 0}function Pm(e,s){const{x:n,y:r}=e;let a=!1;for(let i=0,l=s.length-1;i<s.length;l=i++){const c=s[i],d=s[l],u=c.x,h=c.y,m=d.x,p=d.y;h>r!=p>r&&n<(m-u)*(r-h)/(p-h)+u&&(a=!a)}return a}function Im(e,s){if(!s)return!1;const n={x:e.clientX,y:e.clientY};return Pm(n,s)}function ss(e){return s=>s.pointerType==="mouse"?e(s):void 0}var Am=ho,Dm=fr,Om=fo,Fm=po,Lm=vr,$m=xo,Um=Gs,qm=vo,Km=bo,zm=wo,Bm=Co,Hm=So,Vm=_o,Wm=Ro,Gm=Mo,Qs="DropdownMenu",[Qm]=nt(Qs,[lo]),Te=lo(),[Ym,Po]=Qm(Qs),Io=e=>{const{__scopeDropdownMenu:s,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:l,modal:c=!0}=e,d=Te(s),u=o.useRef(null),[h,m]=ft({prop:a,defaultProp:i??!1,onChange:l,caller:Qs});return t.jsx(Ym,{scope:s,triggerId:Ye(),triggerRef:u,contentId:Ye(),open:h,onOpenChange:m,onOpenToggle:o.useCallback(()=>m(p=>!p),[m]),modal:c,children:t.jsx(Am,{...d,open:h,onOpenChange:m,dir:r,modal:c,children:n})})};Io.displayName=Qs;var Ao="DropdownMenuTrigger",Do=o.forwardRef((e,s)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=Po(Ao,n),l=Te(n);return t.jsx(Dm,{asChild:!0,...l,children:t.jsx(V.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:ga(s,i.triggerRef),onPointerDown:P(e.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(i.onOpenToggle(),i.open||c.preventDefault())}),onKeyDown:P(e.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&i.onOpenToggle(),c.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});Do.displayName=Ao;var Xm="DropdownMenuPortal",Oo=e=>{const{__scopeDropdownMenu:s,...n}=e,r=Te(s);return t.jsx(Om,{...r,...n})};Oo.displayName=Xm;var Fo="DropdownMenuContent",Lo=o.forwardRef((e,s)=>{const{__scopeDropdownMenu:n,...r}=e,a=Po(Fo,n),i=Te(n),l=o.useRef(!1);return t.jsx(Fm,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:s,onCloseAutoFocus:P(e.onCloseAutoFocus,c=>{l.current||a.triggerRef.current?.focus(),l.current=!1,c.preventDefault()}),onInteractOutside:P(e.onInteractOutside,c=>{const d=c.detail.originalEvent,u=d.button===0&&d.ctrlKey===!0,h=d.button===2||u;(!a.modal||h)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Lo.displayName=Fo;var Zm="DropdownMenuGroup",Jm=o.forwardRef((e,s)=>{const{__scopeDropdownMenu:n,...r}=e,a=Te(n);return t.jsx(Lm,{...a,...r,ref:s})});Jm.displayName=Zm;var ef="DropdownMenuLabel",$o=o.forwardRef((e,s)=>{const{__scopeDropdownMenu:n,...r}=e,a=Te(n);return t.jsx($m,{...a,...r,ref:s})});$o.displayName=ef;var tf="DropdownMenuItem",Uo=o.forwardRef((e,s)=>{const{__scopeDropdownMenu:n,...r}=e,a=Te(n);return t.jsx(Um,{...a,...r,ref:s})});Uo.displayName=tf;var sf="DropdownMenuCheckboxItem",qo=o.forwardRef((e,s)=>{const{__scopeDropdownMenu:n,...r}=e,a=Te(n);return t.jsx(qm,{...a,...r,ref:s})});qo.displayName=sf;var nf="DropdownMenuRadioGroup",rf=o.forwardRef((e,s)=>{const{__scopeDropdownMenu:n,...r}=e,a=Te(n);return t.jsx(Km,{...a,...r,ref:s})});rf.displayName=nf;var af="DropdownMenuRadioItem",Ko=o.forwardRef((e,s)=>{const{__scopeDropdownMenu:n,...r}=e,a=Te(n);return t.jsx(zm,{...a,...r,ref:s})});Ko.displayName=af;var of="DropdownMenuItemIndicator",zo=o.forwardRef((e,s)=>{const{__scopeDropdownMenu:n,...r}=e,a=Te(n);return t.jsx(Bm,{...a,...r,ref:s})});zo.displayName=of;var cf="DropdownMenuSeparator",Bo=o.forwardRef((e,s)=>{const{__scopeDropdownMenu:n,...r}=e,a=Te(n);return t.jsx(Hm,{...a,...r,ref:s})});Bo.displayName=cf;var lf="DropdownMenuArrow",df=o.forwardRef((e,s)=>{const{__scopeDropdownMenu:n,...r}=e,a=Te(n);return t.jsx(Vm,{...a,...r,ref:s})});df.displayName=lf;var uf="DropdownMenuSubTrigger",Ho=o.forwardRef((e,s)=>{const{__scopeDropdownMenu:n,...r}=e,a=Te(n);return t.jsx(Wm,{...a,...r,ref:s})});Ho.displayName=uf;var hf="DropdownMenuSubContent",Vo=o.forwardRef((e,s)=>{const{__scopeDropdownMenu:n,...r}=e,a=Te(n);return t.jsx(Gm,{...a,...r,ref:s,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Vo.displayName=hf;var mf=Io,ff=Do,pf=Oo,Wo=Lo,Go=$o,Qo=Uo,Yo=qo,Xo=Ko,Zo=zo,Jo=Bo,ei=Ho,ti=Vo;const xf=mf,gf=ff,vf=o.forwardRef(({className:e,inset:s,children:n,...r},a)=>t.jsxs(ei,{ref:a,className:I("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",e),...r,children:[n,t.jsx(cr,{className:"ml-auto"})]}));vf.displayName=ei.displayName;const yf=o.forwardRef(({className:e,...s},n)=>t.jsx(ti,{ref:n,className:I("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));yf.displayName=ti.displayName;const si=o.forwardRef(({className:e,sideOffset:s=4,...n},r)=>t.jsx(pf,{children:t.jsx(Wo,{ref:r,sideOffset:s,className:I("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));si.displayName=Wo.displayName;const At=o.forwardRef(({className:e,inset:s,...n},r)=>t.jsx(Qo,{ref:r,className:I("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",s&&"pl-8",e),...n}));At.displayName=Qo.displayName;const bf=o.forwardRef(({className:e,children:s,checked:n,...r},a)=>t.jsxs(Yo,{ref:a,className:I("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Zo,{children:t.jsx(Je,{className:"h-4 w-4"})})}),s]}));bf.displayName=Yo.displayName;const jf=o.forwardRef(({className:e,children:s,...n},r)=>t.jsxs(Xo,{ref:r,className:I("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Zo,{children:t.jsx(Gd,{className:"h-2 w-2 fill-current"})})}),s]}));jf.displayName=Xo.displayName;const ni=o.forwardRef(({className:e,inset:s,...n},r)=>t.jsx(Go,{ref:r,className:I("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",e),...n}));ni.displayName=Go.displayName;const _s=o.forwardRef(({className:e,...s},n)=>t.jsx(Jo,{ref:n,className:I("-mx-1 my-1 h-px bg-muted",e),...s}));_s.displayName=Jo.displayName;function jr(e){const s=o.useRef({value:e,previous:e});return o.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}var Ys="Checkbox",[wf]=nt(Ys),[Nf,wr]=wf(Ys);function Cf(e){const{__scopeCheckbox:s,checked:n,children:r,defaultChecked:a,disabled:i,form:l,name:c,onCheckedChange:d,required:u,value:h="on",internal_do_not_use_render:m}=e,[p,x]=ft({prop:n,defaultProp:a??!1,onChange:d,caller:Ys}),[v,f]=o.useState(null),[g,y]=o.useState(null),j=o.useRef(!1),N=v?!!l||!!v.closest("form"):!0,R={checked:p,disabled:i,setChecked:x,control:v,setControl:f,name:c,form:l,value:h,hasConsumerStoppedPropagationRef:j,required:u,defaultChecked:mt(a)?!1:a,isFormControl:N,bubbleInput:g,setBubbleInput:y};return t.jsx(Nf,{scope:s,...R,children:Sf(m)?m(R):r})}var ri="CheckboxTrigger",ai=o.forwardRef(({__scopeCheckbox:e,onKeyDown:s,onClick:n,...r},a)=>{const{control:i,value:l,disabled:c,checked:d,required:u,setControl:h,setChecked:m,hasConsumerStoppedPropagationRef:p,isFormControl:x,bubbleInput:v}=wr(ri,e),f=Z(a,h),g=o.useRef(d);return o.useEffect(()=>{const y=i?.form;if(y){const j=()=>m(g.current);return y.addEventListener("reset",j),()=>y.removeEventListener("reset",j)}},[i,m]),t.jsx(V.button,{type:"button",role:"checkbox","aria-checked":mt(d)?"mixed":d,"aria-required":u,"data-state":di(d),"data-disabled":c?"":void 0,disabled:c,value:l,...r,ref:f,onKeyDown:P(s,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:P(n,y=>{m(j=>mt(j)?!0:!j),v&&x&&(p.current=y.isPropagationStopped(),p.current||y.stopPropagation())})})});ai.displayName=ri;var Nr=o.forwardRef((e,s)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:l,disabled:c,value:d,onCheckedChange:u,form:h,...m}=e;return t.jsx(Cf,{__scopeCheckbox:n,checked:a,defaultChecked:i,disabled:c,required:l,onCheckedChange:u,name:r,form:h,value:d,internal_do_not_use_render:({isFormControl:p})=>t.jsxs(t.Fragment,{children:[t.jsx(ai,{...m,ref:s,__scopeCheckbox:n}),p&&t.jsx(li,{__scopeCheckbox:n})]})})});Nr.displayName=Ys;var oi="CheckboxIndicator",ii=o.forwardRef((e,s)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=wr(oi,n);return t.jsx(Fe,{present:r||mt(i.checked)||i.checked===!0,children:t.jsx(V.span,{"data-state":di(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:s,style:{pointerEvents:"none",...e.style}})})});ii.displayName=oi;var ci="CheckboxBubbleInput",li=o.forwardRef(({__scopeCheckbox:e,...s},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:l,required:c,disabled:d,name:u,value:h,form:m,bubbleInput:p,setBubbleInput:x}=wr(ci,e),v=Z(n,x),f=jr(i),g=wa(r);o.useEffect(()=>{const j=p;if(!j)return;const N=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(N,"checked").set,A=!a.current;if(f!==i&&C){const w=new Event("click",{bubbles:A});j.indeterminate=mt(i),C.call(j,mt(i)?!1:i),j.dispatchEvent(w)}},[p,f,i,a]);const y=o.useRef(mt(i)?!1:i);return t.jsx(V.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??y.current,required:c,disabled:d,name:u,value:h,form:m,...s,tabIndex:-1,ref:v,style:{...s.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});li.displayName=ci;function Sf(e){return typeof e=="function"}function mt(e){return e==="indeterminate"}function di(e){return mt(e)?"indeterminate":e?"checked":"unchecked"}const ui=o.forwardRef(({className:e,...s},n)=>t.jsx(Nr,{ref:n,className:I("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:t.jsx(ii,{className:I("flex items-center justify-center text-current"),children:t.jsx(Je,{className:"h-4 w-4"})})}));ui.displayName=Nr.displayName;const _f=Ml("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow",outline:"text-foreground",success:"border-transparent bg-success/20 text-success",warning:"border-transparent bg-warning/20 text-warning",online:"border-transparent bg-success/20 text-success",offline:"border-transparent bg-destructive/20 text-destructive",pending:"border-transparent bg-warning/20 text-warning"}},defaultVariants:{variant:"default"}});function ce({className:e,variant:s,...n}){return t.jsx("div",{className:I(_f({variant:s}),e),...n})}function Bn(e,[s,n]){return Math.min(n,Math.max(s,e))}function kf(e,s){return o.useReducer((n,r)=>s[n][r]??n,e)}var Cr="ScrollArea",[hi]=nt(Cr),[Rf,qe]=hi(Cr),mi=o.forwardRef((e,s)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...l}=e,[c,d]=o.useState(null),[u,h]=o.useState(null),[m,p]=o.useState(null),[x,v]=o.useState(null),[f,g]=o.useState(null),[y,j]=o.useState(0),[N,R]=o.useState(0),[C,A]=o.useState(!1),[w,T]=o.useState(!1),S=Z(s,U=>d(U)),F=ns(a);return t.jsx(Rf,{scope:n,type:r,dir:F,scrollHideDelay:i,scrollArea:c,viewport:u,onViewportChange:h,content:m,onContentChange:p,scrollbarX:x,onScrollbarXChange:v,scrollbarXEnabled:C,onScrollbarXEnabledChange:A,scrollbarY:f,onScrollbarYChange:g,scrollbarYEnabled:w,onScrollbarYEnabledChange:T,onCornerWidthChange:j,onCornerHeightChange:R,children:t.jsx(V.div,{dir:F,...l,ref:S,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":N+"px",...e.style}})})});mi.displayName=Cr;var fi="ScrollAreaViewport",pi=o.forwardRef((e,s)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,l=qe(fi,n),c=o.useRef(null),d=Z(s,c,l.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),t.jsx(V.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:t.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});pi.displayName=fi;var rt="ScrollAreaScrollbar",Sr=o.forwardRef((e,s)=>{const{forceMount:n,...r}=e,a=qe(rt,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=a,c=e.orientation==="horizontal";return o.useEffect(()=>(c?i(!0):l(!0),()=>{c?i(!1):l(!1)}),[c,i,l]),a.type==="hover"?t.jsx(Ef,{...r,ref:s,forceMount:n}):a.type==="scroll"?t.jsx(Mf,{...r,ref:s,forceMount:n}):a.type==="auto"?t.jsx(xi,{...r,ref:s,forceMount:n}):a.type==="always"?t.jsx(_r,{...r,ref:s}):null});Sr.displayName=rt;var Ef=o.forwardRef((e,s)=>{const{forceMount:n,...r}=e,a=qe(rt,e.__scopeScrollArea),[i,l]=o.useState(!1);return o.useEffect(()=>{const c=a.scrollArea;let d=0;if(c){const u=()=>{window.clearTimeout(d),l(!0)},h=()=>{d=window.setTimeout(()=>l(!1),a.scrollHideDelay)};return c.addEventListener("pointerenter",u),c.addEventListener("pointerleave",h),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",u),c.removeEventListener("pointerleave",h)}}},[a.scrollArea,a.scrollHideDelay]),t.jsx(Fe,{present:n||i,children:t.jsx(xi,{"data-state":i?"visible":"hidden",...r,ref:s})})}),Mf=o.forwardRef((e,s)=>{const{forceMount:n,...r}=e,a=qe(rt,e.__scopeScrollArea),i=e.orientation==="horizontal",l=Zs(()=>d("SCROLL_END"),100),[c,d]=kf("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return o.useEffect(()=>{if(c==="idle"){const u=window.setTimeout(()=>d("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[c,a.scrollHideDelay,d]),o.useEffect(()=>{const u=a.viewport,h=i?"scrollLeft":"scrollTop";if(u){let m=u[h];const p=()=>{const x=u[h];m!==x&&(d("SCROLL"),l()),m=x};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[a.viewport,i,d,l]),t.jsx(Fe,{present:n||c!=="hidden",children:t.jsx(_r,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:s,onPointerEnter:P(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:P(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),xi=o.forwardRef((e,s)=>{const n=qe(rt,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,l]=o.useState(!1),c=e.orientation==="horizontal",d=Zs(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;l(c?u:h)}},10);return Ut(n.viewport,d),Ut(n.content,d),t.jsx(Fe,{present:r||i,children:t.jsx(_r,{"data-state":i?"visible":"hidden",...a,ref:s})})}),_r=o.forwardRef((e,s)=>{const{orientation:n="vertical",...r}=e,a=qe(rt,e.__scopeScrollArea),i=o.useRef(null),l=o.useRef(0),[c,d]=o.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=ji(c.viewport,c.content),h={...r,sizes:c,onSizesChange:d,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:p=>l.current=p};function m(p,x){return Of(p,l.current,c,x)}return n==="horizontal"?t.jsx(Tf,{...h,ref:s,onThumbPositionChange:()=>{if(a.viewport&&i.current){const p=a.viewport.scrollLeft,x=ua(p,c,a.dir);i.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollLeft=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollLeft=m(p,a.dir))}}):n==="vertical"?t.jsx(Pf,{...h,ref:s,onThumbPositionChange:()=>{if(a.viewport&&i.current){const p=a.viewport.scrollTop,x=ua(p,c);i.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollTop=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollTop=m(p))}}):null}),Tf=o.forwardRef((e,s)=>{const{sizes:n,onSizesChange:r,...a}=e,i=qe(rt,e.__scopeScrollArea),[l,c]=o.useState(),d=o.useRef(null),u=Z(s,d,i.onScrollbarXChange);return o.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),t.jsx(vi,{"data-orientation":"horizontal",...a,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Xs(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,m)=>{if(i.viewport){const p=i.viewport.scrollLeft+h.deltaX;e.onWheelScroll(p),Ni(p,m)&&h.preventDefault()}},onResize:()=>{d.current&&i.viewport&&l&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Fs(l.paddingLeft),paddingEnd:Fs(l.paddingRight)}})}})}),Pf=o.forwardRef((e,s)=>{const{sizes:n,onSizesChange:r,...a}=e,i=qe(rt,e.__scopeScrollArea),[l,c]=o.useState(),d=o.useRef(null),u=Z(s,d,i.onScrollbarYChange);return o.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),t.jsx(vi,{"data-orientation":"vertical",...a,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Xs(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,m)=>{if(i.viewport){const p=i.viewport.scrollTop+h.deltaY;e.onWheelScroll(p),Ni(p,m)&&h.preventDefault()}},onResize:()=>{d.current&&i.viewport&&l&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Fs(l.paddingTop),paddingEnd:Fs(l.paddingBottom)}})}})}),[If,gi]=hi(rt),vi=o.forwardRef((e,s)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:h,onResize:m,...p}=e,x=qe(rt,n),[v,f]=o.useState(null),g=Z(s,S=>f(S)),y=o.useRef(null),j=o.useRef(""),N=x.viewport,R=r.content-r.viewport,C=Ae(h),A=Ae(d),w=Zs(m,10);function T(S){if(y.current){const F=S.clientX-y.current.left,U=S.clientY-y.current.top;u({x:F,y:U})}}return o.useEffect(()=>{const S=F=>{const U=F.target;v?.contains(U)&&C(F,R)};return document.addEventListener("wheel",S,{passive:!1}),()=>document.removeEventListener("wheel",S,{passive:!1})},[N,v,R,C]),o.useEffect(A,[r,A]),Ut(v,w),Ut(x.content,w),t.jsx(If,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:Ae(i),onThumbPointerUp:Ae(l),onThumbPositionChange:A,onThumbPointerDown:Ae(c),children:t.jsx(V.div,{...p,ref:g,style:{position:"absolute",...p.style},onPointerDown:P(e.onPointerDown,S=>{S.button===0&&(S.target.setPointerCapture(S.pointerId),y.current=v.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),T(S))}),onPointerMove:P(e.onPointerMove,T),onPointerUp:P(e.onPointerUp,S=>{const F=S.target;F.hasPointerCapture(S.pointerId)&&F.releasePointerCapture(S.pointerId),document.body.style.webkitUserSelect=j.current,x.viewport&&(x.viewport.style.scrollBehavior=""),y.current=null})})})}),Os="ScrollAreaThumb",yi=o.forwardRef((e,s)=>{const{forceMount:n,...r}=e,a=gi(Os,e.__scopeScrollArea);return t.jsx(Fe,{present:n||a.hasThumb,children:t.jsx(Af,{ref:s,...r})})}),Af=o.forwardRef((e,s)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=qe(Os,n),l=gi(Os,n),{onThumbPositionChange:c}=l,d=Z(s,m=>l.onThumbChange(m)),u=o.useRef(void 0),h=Zs(()=>{u.current&&(u.current(),u.current=void 0)},100);return o.useEffect(()=>{const m=i.viewport;if(m){const p=()=>{if(h(),!u.current){const x=Ff(m,c);u.current=x,c()}};return c(),m.addEventListener("scroll",p),()=>m.removeEventListener("scroll",p)}},[i.viewport,h,c]),t.jsx(V.div,{"data-state":l.hasThumb?"visible":"hidden",...a,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:P(e.onPointerDownCapture,m=>{const x=m.target.getBoundingClientRect(),v=m.clientX-x.left,f=m.clientY-x.top;l.onThumbPointerDown({x:v,y:f})}),onPointerUp:P(e.onPointerUp,l.onThumbPointerUp)})});yi.displayName=Os;var kr="ScrollAreaCorner",bi=o.forwardRef((e,s)=>{const n=qe(kr,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?t.jsx(Df,{...e,ref:s}):null});bi.displayName=kr;var Df=o.forwardRef((e,s)=>{const{__scopeScrollArea:n,...r}=e,a=qe(kr,n),[i,l]=o.useState(0),[c,d]=o.useState(0),u=!!(i&&c);return Ut(a.scrollbarX,()=>{const h=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(h),d(h)}),Ut(a.scrollbarY,()=>{const h=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(h),l(h)}),u?t.jsx(V.div,{...r,ref:s,style:{width:i,height:c,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Fs(e){return e?parseInt(e,10):0}function ji(e,s){const n=e/s;return isNaN(n)?0:n}function Xs(e){const s=ji(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*s;return Math.max(r,18)}function Of(e,s,n,r="ltr"){const a=Xs(n),i=a/2,l=s||i,c=a-l,d=n.scrollbar.paddingStart+l,u=n.scrollbar.size-n.scrollbar.paddingEnd-c,h=n.content-n.viewport,m=r==="ltr"?[0,h]:[h*-1,0];return wi([d,u],m)(e)}function ua(e,s,n="ltr"){const r=Xs(s),a=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,i=s.scrollbar.size-a,l=s.content-s.viewport,c=i-r,d=n==="ltr"?[0,l]:[l*-1,0],u=Bn(e,d);return wi([0,l],[0,c])(u)}function wi(e,s){return n=>{if(e[0]===e[1]||s[0]===s[1])return s[0];const r=(s[1]-s[0])/(e[1]-e[0]);return s[0]+r*(n-e[0])}}function Ni(e,s){return e>0&&e<s}var Ff=(e,s=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return(function a(){const i={left:e.scrollLeft,top:e.scrollTop},l=n.left!==i.left,c=n.top!==i.top;(l||c)&&s(),n=i,r=window.requestAnimationFrame(a)})(),()=>window.cancelAnimationFrame(r)};function Zs(e,s){const n=Ae(e),r=o.useRef(0);return o.useEffect(()=>()=>window.clearTimeout(r.current),[]),o.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,s)},[n,s])}function Ut(e,s){const n=Ae(s);Ze(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var Ci=mi,Lf=pi,$f=bi;const Ue=o.forwardRef(({className:e,children:s,...n},r)=>t.jsxs(Ci,{ref:r,className:I("relative overflow-hidden",e),...n,children:[t.jsx(Lf,{className:"h-full w-full rounded-[inherit]",children:s}),t.jsx(Si,{}),t.jsx($f,{})]}));Ue.displayName=Ci.displayName;const Si=o.forwardRef(({className:e,orientation:s="vertical",...n},r)=>t.jsx(Sr,{ref:r,orientation:s,className:I("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:t.jsx(yi,{className:"relative flex-1 rounded-full bg-border"})}));Si.displayName=Sr.displayName;var Js="Dialog",[_i,ki]=nt(Js),[Uf,He]=_i(Js),Ri=e=>{const{__scopeDialog:s,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:l=!0}=e,c=o.useRef(null),d=o.useRef(null),[u,h]=ft({prop:r,defaultProp:a??!1,onChange:i,caller:Js});return t.jsx(Uf,{scope:s,triggerRef:c,contentRef:d,contentId:Ye(),titleId:Ye(),descriptionId:Ye(),open:u,onOpenChange:h,onOpenToggle:o.useCallback(()=>h(m=>!m),[h]),modal:l,children:n})};Ri.displayName=Js;var Ei="DialogTrigger",Mi=o.forwardRef((e,s)=>{const{__scopeDialog:n,...r}=e,a=He(Ei,n),i=Z(s,a.triggerRef);return t.jsx(V.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Mr(a.open),...r,ref:i,onClick:P(e.onClick,a.onOpenToggle)})});Mi.displayName=Ei;var Rr="DialogPortal",[qf,Ti]=_i(Rr,{forceMount:void 0}),Pi=e=>{const{__scopeDialog:s,forceMount:n,children:r,container:a}=e,i=He(Rr,s);return t.jsx(qf,{scope:s,forceMount:n,children:o.Children.map(r,l=>t.jsx(Fe,{present:n||i.open,children:t.jsx(Xn,{asChild:!0,container:a,children:l})}))})};Pi.displayName=Rr;var Ls="DialogOverlay",Ii=o.forwardRef((e,s)=>{const n=Ti(Ls,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=He(Ls,e.__scopeDialog);return i.modal?t.jsx(Fe,{present:r||i.open,children:t.jsx(zf,{...a,ref:s})}):null});Ii.displayName=Ls;var Kf=Zn("DialogOverlay.RemoveScroll"),zf=o.forwardRef((e,s)=>{const{__scopeDialog:n,...r}=e,a=He(Ls,n);return t.jsx(Vs,{as:Kf,allowPinchZoom:!0,shards:[a.contentRef],children:t.jsx(V.div,{"data-state":Mr(a.open),...r,ref:s,style:{pointerEvents:"auto",...r.style}})})}),Ct="DialogContent",Ai=o.forwardRef((e,s)=>{const n=Ti(Ct,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=He(Ct,e.__scopeDialog);return t.jsx(Fe,{present:r||i.open,children:i.modal?t.jsx(Bf,{...a,ref:s}):t.jsx(Hf,{...a,ref:s})})});Ai.displayName=Ct;var Bf=o.forwardRef((e,s)=>{const n=He(Ct,e.__scopeDialog),r=o.useRef(null),a=Z(s,n.contentRef,r);return o.useEffect(()=>{const i=r.current;if(i)return mr(i)},[]),t.jsx(Di,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:P(e.onCloseAutoFocus,i=>{i.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:P(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&i.preventDefault()}),onFocusOutside:P(e.onFocusOutside,i=>i.preventDefault())})}),Hf=o.forwardRef((e,s)=>{const n=He(Ct,e.__scopeDialog),r=o.useRef(!1),a=o.useRef(!1);return t.jsx(Di,{...e,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;n.triggerRef.current?.contains(l)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Di=o.forwardRef((e,s)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...l}=e,c=He(Ct,n),d=o.useRef(null),u=Z(s,d);return hr(),t.jsxs(t.Fragment,{children:[t.jsx(zs,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:t.jsx(Jn,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Mr(c.open),...l,ref:u,onDismiss:()=>c.onOpenChange(!1)})}),t.jsxs(t.Fragment,{children:[t.jsx(Wf,{titleId:c.titleId}),t.jsx(Qf,{contentRef:d,descriptionId:c.descriptionId})]})]})}),Er="DialogTitle",Oi=o.forwardRef((e,s)=>{const{__scopeDialog:n,...r}=e,a=He(Er,n);return t.jsx(V.h2,{id:a.titleId,...r,ref:s})});Oi.displayName=Er;var Fi="DialogDescription",Li=o.forwardRef((e,s)=>{const{__scopeDialog:n,...r}=e,a=He(Fi,n);return t.jsx(V.p,{id:a.descriptionId,...r,ref:s})});Li.displayName=Fi;var $i="DialogClose",Ui=o.forwardRef((e,s)=>{const{__scopeDialog:n,...r}=e,a=He($i,n);return t.jsx(V.button,{type:"button",...r,ref:s,onClick:P(e.onClick,()=>a.onOpenChange(!1))})});Ui.displayName=$i;function Mr(e){return e?"open":"closed"}var qi="DialogTitleWarning",[Vf,Ki]=Tl(qi,{contentName:Ct,titleName:Er,docsSlug:"dialog"}),Wf=({titleId:e})=>{const s=Ki(qi),n=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return o.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Gf="DialogDescriptionWarning",Qf=({contentRef:e,descriptionId:s})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ki(Gf).contentName}}.`;return o.useEffect(()=>{const a=e.current?.getAttribute("aria-describedby");s&&a&&(document.getElementById(s)||console.warn(r))},[r,e,s]),null},zi=Ri,Yf=Mi,Bi=Pi,Tr=Ii,Pr=Ai,Ir=Oi,Ar=Li,Dr=Ui;const Re=zi,Xf=Bi,Hi=o.forwardRef(({className:e,...s},n)=>t.jsx(Tr,{ref:n,className:I("fixed inset-0 z-50 bg-black/60 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));Hi.displayName=Tr.displayName;const Ce=o.forwardRef(({className:e,children:s,...n},r)=>t.jsxs(Xf,{children:[t.jsx(Hi,{}),t.jsxs(Pr,{ref:r,className:I("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-xl",e),...n,children:[s,t.jsxs(Dr,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[t.jsx(ks,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ce.displayName=Pr.displayName;const Se=({className:e,...s})=>t.jsx("div",{className:I("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});Se.displayName="DialogHeader";const Oe=({className:e,...s})=>t.jsx("div",{className:I("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});Oe.displayName="DialogFooter";const _e=o.forwardRef(({className:e,...s},n)=>t.jsx(Ir,{ref:n,className:I("text-lg font-semibold leading-none tracking-tight",e),...s}));_e.displayName=Ir.displayName;const ke=o.forwardRef(({className:e,...s},n)=>t.jsx(Ar,{ref:n,className:I("text-sm text-muted-foreground",e),...s}));ke.displayName=Ar.displayName;const zt=o.forwardRef(({className:e,...s},n)=>t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsx("table",{ref:n,className:I("w-full caption-bottom text-sm",e),...s})}));zt.displayName="Table";const Bt=o.forwardRef(({className:e,...s},n)=>t.jsx("thead",{ref:n,className:I("[&_tr]:border-b",e),...s}));Bt.displayName="TableHeader";const Ht=o.forwardRef(({className:e,...s},n)=>t.jsx("tbody",{ref:n,className:I("[&_tr:last-child]:border-0",e),...s}));Ht.displayName="TableBody";const Zf=o.forwardRef(({className:e,...s},n)=>t.jsx("tfoot",{ref:n,className:I("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s}));Zf.displayName="TableFooter";const De=o.forwardRef(({className:e,...s},n)=>t.jsx("tr",{ref:n,className:I("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));De.displayName="TableRow";const te=o.forwardRef(({className:e,...s},n)=>t.jsx("th",{ref:n,className:I("h-11 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s}));te.displayName="TableHead";const X=o.forwardRef(({className:e,...s},n)=>t.jsx("td",{ref:n,className:I("p-4 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s}));X.displayName="TableCell";const Jf=o.forwardRef(({className:e,...s},n)=>t.jsx("caption",{ref:n,className:I("mt-4 text-sm text-muted-foreground",e),...s}));Jf.displayName="TableCaption";var Vi="AlertDialog",[ep]=nt(Vi,[ki]),lt=ki(),Wi=e=>{const{__scopeAlertDialog:s,...n}=e,r=lt(s);return t.jsx(zi,{...r,...n,modal:!0})};Wi.displayName=Vi;var tp="AlertDialogTrigger",sp=o.forwardRef((e,s)=>{const{__scopeAlertDialog:n,...r}=e,a=lt(n);return t.jsx(Yf,{...a,...r,ref:s})});sp.displayName=tp;var np="AlertDialogPortal",Gi=e=>{const{__scopeAlertDialog:s,...n}=e,r=lt(s);return t.jsx(Bi,{...r,...n})};Gi.displayName=np;var rp="AlertDialogOverlay",Qi=o.forwardRef((e,s)=>{const{__scopeAlertDialog:n,...r}=e,a=lt(n);return t.jsx(Tr,{...a,...r,ref:s})});Qi.displayName=rp;var Ot="AlertDialogContent",[ap,op]=ep(Ot),ip=Pl("AlertDialogContent"),Yi=o.forwardRef((e,s)=>{const{__scopeAlertDialog:n,children:r,...a}=e,i=lt(n),l=o.useRef(null),c=Z(s,l),d=o.useRef(null);return t.jsx(Vf,{contentName:Ot,titleName:Xi,docsSlug:"alert-dialog",children:t.jsx(ap,{scope:n,cancelRef:d,children:t.jsxs(Pr,{role:"alertdialog",...i,...a,ref:c,onOpenAutoFocus:P(a.onOpenAutoFocus,u=>{u.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[t.jsx(ip,{children:r}),t.jsx(lp,{contentRef:l})]})})})});Yi.displayName=Ot;var Xi="AlertDialogTitle",Zi=o.forwardRef((e,s)=>{const{__scopeAlertDialog:n,...r}=e,a=lt(n);return t.jsx(Ir,{...a,...r,ref:s})});Zi.displayName=Xi;var Ji="AlertDialogDescription",ec=o.forwardRef((e,s)=>{const{__scopeAlertDialog:n,...r}=e,a=lt(n);return t.jsx(Ar,{...a,...r,ref:s})});ec.displayName=Ji;var cp="AlertDialogAction",tc=o.forwardRef((e,s)=>{const{__scopeAlertDialog:n,...r}=e,a=lt(n);return t.jsx(Dr,{...a,...r,ref:s})});tc.displayName=cp;var sc="AlertDialogCancel",nc=o.forwardRef((e,s)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=op(sc,n),i=lt(n),l=Z(s,a);return t.jsx(Dr,{...i,...r,ref:l})});nc.displayName=sc;var lp=({contentRef:e})=>{const s=`\`${Ot}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ot}\` by passing a \`${Ji}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ot}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return o.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(s)},[s,e]),null},dp=Wi,up=Gi,rc=Qi,ac=Yi,oc=tc,ic=nc,cc=Zi,lc=ec;const en=dp,hp=up,dc=o.forwardRef(({className:e,...s},n)=>t.jsx(rc,{className:I("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:n}));dc.displayName=rc.displayName;const is=o.forwardRef(({className:e,...s},n)=>t.jsxs(hp,{children:[t.jsx(dc,{}),t.jsx(ac,{ref:n,className:I("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s})]}));is.displayName=ac.displayName;const cs=({className:e,...s})=>t.jsx("div",{className:I("flex flex-col space-y-2 text-center sm:text-left",e),...s});cs.displayName="AlertDialogHeader";const ls=({className:e,...s})=>t.jsx("div",{className:I("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});ls.displayName="AlertDialogFooter";const ds=o.forwardRef(({className:e,...s},n)=>t.jsx(cc,{ref:n,className:I("text-lg font-semibold",e),...s}));ds.displayName=cc.displayName;const us=o.forwardRef(({className:e,...s},n)=>t.jsx(lc,{ref:n,className:I("text-sm text-muted-foreground",e),...s}));us.displayName=lc.displayName;const hs=o.forwardRef(({className:e,...s},n)=>t.jsx(oc,{ref:n,className:I(Na(),e),...s}));hs.displayName=oc.displayName;const ms=o.forwardRef(({className:e,...s},n)=>t.jsx(ic,{ref:n,className:I(Na({variant:"outline"}),"mt-2 sm:mt-0",e),...s}));ms.displayName=ic.displayName;function mp({open:e,onOpenChange:s}){const n=ct(),[r,a]=o.useState(!1),[i,l]=o.useState(null),[c,d]=o.useState(""),[u,h]=o.useState(""),[m,p]=o.useState(["openai.inference","openai.models.read"]),[x,v]=o.useState(null),[f,g]=o.useState(null),[y,j]=o.useState(null),{data:N,isLoading:R,refetch:C}=Ie({queryKey:["api-keys"],queryFn:xn.list,enabled:e}),A=Be({mutationFn:E=>xn.create(E),onSuccess:E=>{n.invalidateQueries({queryKey:["api-keys"]}),v(E.key),d(""),h(""),p(["openai.inference","openai.models.read"]),$({title:"API key created"})},onError:E=>{$({title:"Failed to create API key",description:E instanceof Error?E.message:"Unknown error",variant:"destructive"})}}),w=Be({mutationFn:E=>xn.delete(E),onSuccess:()=>{n.invalidateQueries({queryKey:["api-keys"]}),l(null),$({title:"API key deleted"})},onError:E=>{$({title:"Failed to delete API key",description:E instanceof Error?E.message:"Unknown error",variant:"destructive"})}});o.useEffect(()=>{e||(v(null),g(null))},[e]),o.useEffect(()=>{r||(d(""),h(""),p(["openai.inference","openai.models.read"]))},[r]);const T=async(E,q)=>{try{await navigator.clipboard.writeText(E),j(q),setTimeout(()=>j(null),2e3),$({title:"Copied to clipboard"})}catch{$({title:"Failed to copy",variant:"destructive"})}},S=()=>{A.mutate({name:c,expires_at:u||void 0,permissions:m})},F=E=>E?new Date(E)<new Date:!1,U=(E,q)=>{p(L=>q?L.includes(E)?L:[...L,E]:L.filter(z=>z!==E))},K=[{value:"openai.inference",label:"openai.inference",description:"OpenAI-compatible inference access (/v1/chat/completions, etc.)"},{value:"openai.models.read",label:"openai.models.read",description:"OpenAI-compatible model listing access (/v1/models)"},{value:"endpoints.read",label:"endpoints.read",description:"Read endpoints via /api/endpoints (GET)"},{value:"endpoints.manage",label:"endpoints.manage",description:"Manage endpoints via /api/endpoints (POST/PUT/DELETE)"},{value:"api_keys.manage",label:"api_keys.manage",description:"Manage API keys (/api/api-keys)"},{value:"users.manage",label:"users.manage",description:"Manage users (/api/users)"},{value:"invitations.manage",label:"invitations.manage",description:"Manage invitations (/api/invitations)"},{value:"models.manage",label:"models.manage",description:"Manage models (/api/models/register, delete)"},{value:"registry.read",label:"registry.read",description:"Read model registry (/api/models/registry/*)"},{value:"logs.read",label:"logs.read",description:"Read logs (/api/nodes/*/logs)"},{value:"metrics.read",label:"metrics.read",description:"Read metrics (/api/metrics/*)"}];return t.jsxs(t.Fragment,{children:[t.jsx(Re,{open:e,onOpenChange:s,children:t.jsxs(Ce,{id:"api-keys-modal",className:"max-w-3xl max-h-[80vh] overflow-hidden",children:[t.jsxs(Se,{children:[t.jsxs(_e,{className:"flex items-center gap-2",children:[t.jsx(Ts,{className:"h-5 w-5"}),"API Keys"]}),t.jsx(ke,{children:"Manage your API keys for programmatic access."})]}),t.jsxs("div",{className:"space-y-4 py-4",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsxs(M,{id:"create-api-key",onClick:()=>a(!0),children:[t.jsx(Ks,{className:"mr-2 h-4 w-4"}),"Create Key"]}),t.jsx(M,{variant:"outline",size:"icon",onClick:()=>C(),children:t.jsx(et,{className:"h-4 w-4"})})]}),x&&t.jsxs("div",{className:"rounded-lg border border-success/50 bg-success/10 p-4",children:[t.jsx("p",{className:"text-sm font-medium text-success mb-2",children:"API Key Created Successfully"}),t.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Copy this key now. You won't be able to see it again."}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("code",{className:"flex-1 rounded bg-muted px-2 py-1 text-xs font-mono break-all",children:f==="created"?x:"".repeat(32)}),t.jsx(M,{variant:"ghost",size:"icon",onClick:()=>g(f==="created"?null:"created"),children:f==="created"?t.jsx(su,{className:"h-4 w-4"}):t.jsx(ru,{className:"h-4 w-4"})}),t.jsx(M,{id:"copy-api-key",variant:"ghost",size:"icon",onClick:()=>T(x,"created"),children:y==="created"?t.jsx(Je,{className:"h-4 w-4"}):t.jsx(Nt,{className:"h-4 w-4"})})]})]}),t.jsx(Ue,{className:"h-64 rounded-md border",children:R?t.jsx("div",{className:"flex h-full items-center justify-center",children:t.jsx(Ne,{className:"h-6 w-6 animate-spin"})}):!N||N.length===0?t.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2 text-muted-foreground",children:[t.jsx(Ts,{className:"h-8 w-8"}),t.jsx("p",{children:"No API keys"})]}):t.jsxs(zt,{children:[t.jsx(Bt,{children:t.jsxs(De,{children:[t.jsx(te,{children:"Name"}),t.jsx(te,{children:"Permissions"}),t.jsx(te,{children:"Key"}),t.jsx(te,{children:"Created"}),t.jsx(te,{children:"Expires"}),t.jsx(te,{className:"text-right",children:"Actions"})]})}),t.jsx(Ht,{children:N.map(E=>t.jsxs(De,{children:[t.jsx(X,{className:"font-medium",children:E.name}),t.jsx(X,{children:t.jsx("div",{className:"flex flex-wrap gap-1",children:E.permissions.map(q=>t.jsx(ce,{variant:"secondary",children:q},q))})}),t.jsx(X,{children:E.key_prefix?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("code",{className:"text-xs font-mono",children:[E.key_prefix,"..."]}),t.jsx(M,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>T(E.key_prefix,E.id),children:y===E.id?t.jsx(Je,{className:"h-3 w-3"}):t.jsx(Nt,{className:"h-3 w-3"})})]}):t.jsxs("span",{className:"text-xs text-muted-foreground",children:[E.id.slice(0,8),"..."]})}),t.jsx(X,{className:"text-sm text-muted-foreground",children:at(E.created_at)}),t.jsx(X,{children:E.expires_at?t.jsx(ce,{variant:F(E.expires_at)?"destructive":"outline",children:F(E.expires_at)?"Expired":at(E.expires_at)}):t.jsx(ce,{variant:"secondary",children:"Never"})}),t.jsx(X,{className:"text-right",children:t.jsx(M,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>l(E),children:t.jsx(Kt,{className:"h-4 w-4 text-destructive"})})})]},E.id))})]})})]})]})}),t.jsx(Re,{open:r,onOpenChange:a,children:t.jsxs(Ce,{children:[t.jsxs(Se,{children:[t.jsx(_e,{children:"Create API Key"}),t.jsx(ke,{children:"Create a new API key for programmatic access."})]}),t.jsxs("div",{className:"space-y-4 py-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{htmlFor:"api-key-name",children:"Name"}),t.jsx(me,{id:"api-key-name",placeholder:"My API Key",value:c,onChange:E=>d(E.target.value)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{htmlFor:"key-expires",children:"Expires (optional)"}),t.jsx(me,{id:"key-expires",type:"datetime-local",value:u,onChange:E=>h(E.target.value)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{children:"Permissions"}),t.jsx("div",{className:"grid gap-2",children:K.map(E=>{const q=`permission-${E.value.replace(/[^a-z0-9]/gi,"-")}`;return t.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[t.jsx(ui,{id:q,checked:m.includes(E.value),onCheckedChange:L=>U(E.value,!!L)}),t.jsxs("label",{htmlFor:q,className:"flex flex-col gap-1 cursor-pointer",children:[t.jsx("span",{className:"font-mono text-xs",children:E.label}),t.jsx("span",{className:"text-xs text-muted-foreground",children:E.description})]})]},E.value)})})]})]}),t.jsxs(Oe,{children:[t.jsx(M,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),t.jsxs(M,{onClick:S,disabled:!c||m.length===0||A.isPending,children:[A.isPending&&t.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Create"]})]})]})}),t.jsx(en,{open:!!i,onOpenChange:()=>l(null),children:t.jsxs(is,{children:[t.jsxs(cs,{children:[t.jsx(ds,{children:"Delete API Key"}),t.jsxs(us,{children:['Are you sure you want to delete "',i?.name,'"? This action cannot be undone.']})]}),t.jsxs(ls,{children:[t.jsx(ms,{children:"Cancel"}),t.jsxs(hs,{onClick:()=>i&&w.mutate(i.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[w.isPending&&t.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Delete"]})]})]})})]})}var fp=[" ","Enter","ArrowUp","ArrowDown"],pp=[" ","Enter"],St="Select",[tn,sn,xp]=Yn(St),[Vt]=nt(St,[xp,Us]),nn=Us(),[gp,pt]=Vt(St),[vp,yp]=Vt(St),uc=e=>{const{__scopeSelect:s,children:n,open:r,defaultOpen:a,onOpenChange:i,value:l,defaultValue:c,onValueChange:d,dir:u,name:h,autoComplete:m,disabled:p,required:x,form:v}=e,f=nn(s),[g,y]=o.useState(null),[j,N]=o.useState(null),[R,C]=o.useState(!1),A=ns(u),[w,T]=ft({prop:r,defaultProp:a??!1,onChange:i,caller:St}),[S,F]=ft({prop:l,defaultProp:c,onChange:d,caller:St}),U=o.useRef(null),K=g?v||!!g.closest("form"):!0,[E,q]=o.useState(new Set),L=Array.from(E).map(z=>z.props.value).join(";");return t.jsx(ba,{...f,children:t.jsxs(gp,{required:x,scope:s,trigger:g,onTriggerChange:y,valueNode:j,onValueNodeChange:N,valueNodeHasChildren:R,onValueNodeHasChildrenChange:C,contentId:Ye(),value:S,onValueChange:F,open:w,onOpenChange:T,dir:A,triggerPointerDownPosRef:U,disabled:p,children:[t.jsx(tn.Provider,{scope:s,children:t.jsx(vp,{scope:e.__scopeSelect,onNativeOptionAdd:o.useCallback(z=>{q(ae=>new Set(ae).add(z))},[]),onNativeOptionRemove:o.useCallback(z=>{q(ae=>{const he=new Set(ae);return he.delete(z),he})},[]),children:n})}),K?t.jsxs(Dc,{"aria-hidden":!0,required:x,tabIndex:-1,name:h,autoComplete:m,value:S,onChange:z=>F(z.target.value),disabled:p,form:v,children:[S===void 0?t.jsx("option",{value:""}):null,Array.from(E)]},L):null]})})};uc.displayName=St;var hc="SelectTrigger",mc=o.forwardRef((e,s)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=nn(n),l=pt(hc,n),c=l.disabled||r,d=Z(s,l.onTriggerChange),u=sn(n),h=o.useRef("touch"),[m,p,x]=Fc(f=>{const g=u().filter(N=>!N.disabled),y=g.find(N=>N.value===l.value),j=Lc(g,f,y);j!==void 0&&l.onValueChange(j.value)}),v=f=>{c||(l.onOpenChange(!0),x()),f&&(l.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)})};return t.jsx(va,{asChild:!0,...i,children:t.jsx(V.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Oc(l.value)?"":void 0,...a,ref:d,onClick:P(a.onClick,f=>{f.currentTarget.focus(),h.current!=="mouse"&&v(f)}),onPointerDown:P(a.onPointerDown,f=>{h.current=f.pointerType;const g=f.target;g.hasPointerCapture(f.pointerId)&&g.releasePointerCapture(f.pointerId),f.button===0&&f.ctrlKey===!1&&f.pointerType==="mouse"&&(v(f),f.preventDefault())}),onKeyDown:P(a.onKeyDown,f=>{const g=m.current!=="";!(f.ctrlKey||f.altKey||f.metaKey)&&f.key.length===1&&p(f.key),!(g&&f.key===" ")&&fp.includes(f.key)&&(v(),f.preventDefault())})})})});mc.displayName=hc;var fc="SelectValue",pc=o.forwardRef((e,s)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:l="",...c}=e,d=pt(fc,n),{onValueNodeHasChildrenChange:u}=d,h=i!==void 0,m=Z(s,d.onValueNodeChange);return Ze(()=>{u(h)},[u,h]),t.jsx(V.span,{...c,ref:m,style:{pointerEvents:"none"},children:Oc(d.value)?t.jsx(t.Fragment,{children:l}):i})});pc.displayName=fc;var bp="SelectIcon",xc=o.forwardRef((e,s)=>{const{__scopeSelect:n,children:r,...a}=e;return t.jsx(V.span,{"aria-hidden":!0,...a,ref:s,children:r||""})});xc.displayName=bp;var jp="SelectPortal",gc=e=>t.jsx(Xn,{asChild:!0,...e});gc.displayName=jp;var _t="SelectContent",vc=o.forwardRef((e,s)=>{const n=pt(_t,e.__scopeSelect),[r,a]=o.useState();if(Ze(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?Ca.createPortal(t.jsx(yc,{scope:e.__scopeSelect,children:t.jsx(tn.Slot,{scope:e.__scopeSelect,children:t.jsx("div",{children:e.children})})}),i):null}return t.jsx(bc,{...e,ref:s})});vc.displayName=_t;var ze=10,[yc,xt]=Vt(_t),wp="SelectContentImpl",Np=Zn("SelectContent.RemoveScroll"),bc=o.forwardRef((e,s)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:l,side:c,sideOffset:d,align:u,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:x,sticky:v,hideWhenDetached:f,avoidCollisions:g,...y}=e,j=pt(_t,n),[N,R]=o.useState(null),[C,A]=o.useState(null),w=Z(s,b=>R(b)),[T,S]=o.useState(null),[F,U]=o.useState(null),K=sn(n),[E,q]=o.useState(!1),L=o.useRef(!1);o.useEffect(()=>{if(N)return mr(N)},[N]),hr();const z=o.useCallback(b=>{const[B,...ne]=K().map(H=>H.ref.current),[W]=ne.slice(-1),k=document.activeElement;for(const H of b)if(H===k||(H?.scrollIntoView({block:"nearest"}),H===B&&C&&(C.scrollTop=0),H===W&&C&&(C.scrollTop=C.scrollHeight),H?.focus(),document.activeElement!==k))return},[K,C]),ae=o.useCallback(()=>z([T,N]),[z,T,N]);o.useEffect(()=>{E&&ae()},[E,ae]);const{onOpenChange:he,triggerPointerDownPosRef:D}=j;o.useEffect(()=>{if(N){let b={x:0,y:0};const B=W=>{b={x:Math.abs(Math.round(W.pageX)-(D.current?.x??0)),y:Math.abs(Math.round(W.pageY)-(D.current?.y??0))}},ne=W=>{b.x<=10&&b.y<=10?W.preventDefault():N.contains(W.target)||he(!1),document.removeEventListener("pointermove",B),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",B),document.addEventListener("pointerup",ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",ne,{capture:!0})}}},[N,he,D]),o.useEffect(()=>{const b=()=>he(!1);return window.addEventListener("blur",b),window.addEventListener("resize",b),()=>{window.removeEventListener("blur",b),window.removeEventListener("resize",b)}},[he]);const[be,se]=Fc(b=>{const B=K().filter(k=>!k.disabled),ne=B.find(k=>k.ref.current===document.activeElement),W=Lc(B,b,ne);W&&setTimeout(()=>W.ref.current.focus())}),xe=o.useCallback((b,B,ne)=>{const W=!L.current&&!ne;(j.value!==void 0&&j.value===B||W)&&(S(b),W&&(L.current=!0))},[j.value]),de=o.useCallback(()=>N?.focus(),[N]),fe=o.useCallback((b,B,ne)=>{const W=!L.current&&!ne;(j.value!==void 0&&j.value===B||W)&&U(b)},[j.value]),je=r==="popper"?Hn:jc,ue=je===Hn?{side:c,sideOffset:d,align:u,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:x,sticky:v,hideWhenDetached:f,avoidCollisions:g}:{};return t.jsx(yc,{scope:n,content:N,viewport:C,onViewportChange:A,itemRefCallback:xe,selectedItem:T,onItemLeave:de,itemTextRefCallback:fe,focusSelectedItem:ae,selectedItemText:F,position:r,isPositioned:E,searchRef:be,children:t.jsx(Vs,{as:Np,allowPinchZoom:!0,children:t.jsx(zs,{asChild:!0,trapped:j.open,onMountAutoFocus:b=>{b.preventDefault()},onUnmountAutoFocus:P(a,b=>{j.trigger?.focus({preventScroll:!0}),b.preventDefault()}),children:t.jsx(Jn,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:b=>b.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:t.jsx(je,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:b=>b.preventDefault(),...y,...ue,onPlaced:()=>q(!0),ref:w,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:P(y.onKeyDown,b=>{const B=b.ctrlKey||b.altKey||b.metaKey;if(b.key==="Tab"&&b.preventDefault(),!B&&b.key.length===1&&se(b.key),["ArrowUp","ArrowDown","Home","End"].includes(b.key)){let W=K().filter(k=>!k.disabled).map(k=>k.ref.current);if(["ArrowUp","End"].includes(b.key)&&(W=W.slice().reverse()),["ArrowUp","ArrowDown"].includes(b.key)){const k=b.target,H=W.indexOf(k);W=W.slice(H+1)}setTimeout(()=>z(W)),b.preventDefault()}})})})})})})});bc.displayName=wp;var Cp="SelectItemAlignedPosition",jc=o.forwardRef((e,s)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=pt(_t,n),l=xt(_t,n),[c,d]=o.useState(null),[u,h]=o.useState(null),m=Z(s,w=>h(w)),p=sn(n),x=o.useRef(!1),v=o.useRef(!0),{viewport:f,selectedItem:g,selectedItemText:y,focusSelectedItem:j}=l,N=o.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&u&&f&&g&&y){const w=i.trigger.getBoundingClientRect(),T=u.getBoundingClientRect(),S=i.valueNode.getBoundingClientRect(),F=y.getBoundingClientRect();if(i.dir!=="rtl"){const k=F.left-T.left,H=S.left-k,G=w.left-H,ie=w.width+G,J=Math.max(ie,T.width),le=window.innerWidth-ze,re=Bn(H,[ze,Math.max(ze,le-J)]);c.style.minWidth=ie+"px",c.style.left=re+"px"}else{const k=T.right-F.right,H=window.innerWidth-S.right-k,G=window.innerWidth-w.right-H,ie=w.width+G,J=Math.max(ie,T.width),le=window.innerWidth-ze,re=Bn(H,[ze,Math.max(ze,le-J)]);c.style.minWidth=ie+"px",c.style.right=re+"px"}const U=p(),K=window.innerHeight-ze*2,E=f.scrollHeight,q=window.getComputedStyle(u),L=parseInt(q.borderTopWidth,10),z=parseInt(q.paddingTop,10),ae=parseInt(q.borderBottomWidth,10),he=parseInt(q.paddingBottom,10),D=L+z+E+he+ae,be=Math.min(g.offsetHeight*5,D),se=window.getComputedStyle(f),xe=parseInt(se.paddingTop,10),de=parseInt(se.paddingBottom,10),fe=w.top+w.height/2-ze,je=K-fe,ue=g.offsetHeight/2,b=g.offsetTop+ue,B=L+z+b,ne=D-B;if(B<=fe){const k=U.length>0&&g===U[U.length-1].ref.current;c.style.bottom="0px";const H=u.clientHeight-f.offsetTop-f.offsetHeight,G=Math.max(je,ue+(k?de:0)+H+ae),ie=B+G;c.style.height=ie+"px"}else{const k=U.length>0&&g===U[0].ref.current;c.style.top="0px";const G=Math.max(fe,L+f.offsetTop+(k?xe:0)+ue)+ne;c.style.height=G+"px",f.scrollTop=B-fe+f.offsetTop}c.style.margin=`${ze}px 0`,c.style.minHeight=be+"px",c.style.maxHeight=K+"px",r?.(),requestAnimationFrame(()=>x.current=!0)}},[p,i.trigger,i.valueNode,c,u,f,g,y,i.dir,r]);Ze(()=>N(),[N]);const[R,C]=o.useState();Ze(()=>{u&&C(window.getComputedStyle(u).zIndex)},[u]);const A=o.useCallback(w=>{w&&v.current===!0&&(N(),j?.(),v.current=!1)},[N,j]);return t.jsx(_p,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:x,onScrollButtonChange:A,children:t.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:t.jsx(V.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});jc.displayName=Cp;var Sp="SelectPopperPosition",Hn=o.forwardRef((e,s)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=ze,...i}=e,l=nn(n);return t.jsx(ya,{...l,...i,ref:s,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Hn.displayName=Sp;var[_p,Or]=Vt(_t,{}),Vn="SelectViewport",wc=o.forwardRef((e,s)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=xt(Vn,n),l=Or(Vn,n),c=Z(s,i.onViewportChange),d=o.useRef(0);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),t.jsx(tn.Slot,{scope:n,children:t.jsx(V.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:P(a.onScroll,u=>{const h=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:p}=l;if(p?.current&&m){const x=Math.abs(d.current-h.scrollTop);if(x>0){const v=window.innerHeight-ze*2,f=parseFloat(m.style.minHeight),g=parseFloat(m.style.height),y=Math.max(f,g);if(y<v){const j=y+x,N=Math.min(v,j),R=j-N;m.style.height=N+"px",m.style.bottom==="0px"&&(h.scrollTop=R>0?R:0,m.style.justifyContent="flex-end")}}}d.current=h.scrollTop})})})]})});wc.displayName=Vn;var Nc="SelectGroup",[kp,Rp]=Vt(Nc),Ep=o.forwardRef((e,s)=>{const{__scopeSelect:n,...r}=e,a=Ye();return t.jsx(kp,{scope:n,id:a,children:t.jsx(V.div,{role:"group","aria-labelledby":a,...r,ref:s})})});Ep.displayName=Nc;var Cc="SelectLabel",Sc=o.forwardRef((e,s)=>{const{__scopeSelect:n,...r}=e,a=Rp(Cc,n);return t.jsx(V.div,{id:a.id,...r,ref:s})});Sc.displayName=Cc;var $s="SelectItem",[Mp,_c]=Vt($s),kc=o.forwardRef((e,s)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...l}=e,c=pt($s,n),d=xt($s,n),u=c.value===r,[h,m]=o.useState(i??""),[p,x]=o.useState(!1),v=Z(s,j=>d.itemRefCallback?.(j,r,a)),f=Ye(),g=o.useRef("touch"),y=()=>{a||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return t.jsx(Mp,{scope:n,value:r,disabled:a,textId:f,isSelected:u,onItemTextChange:o.useCallback(j=>{m(N=>N||(j?.textContent??"").trim())},[]),children:t.jsx(tn.ItemSlot,{scope:n,value:r,disabled:a,textValue:h,children:t.jsx(V.div,{role:"option","aria-labelledby":f,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:v,onFocus:P(l.onFocus,()=>x(!0)),onBlur:P(l.onBlur,()=>x(!1)),onClick:P(l.onClick,()=>{g.current!=="mouse"&&y()}),onPointerUp:P(l.onPointerUp,()=>{g.current==="mouse"&&y()}),onPointerDown:P(l.onPointerDown,j=>{g.current=j.pointerType}),onPointerMove:P(l.onPointerMove,j=>{g.current=j.pointerType,a?d.onItemLeave?.():g.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:P(l.onPointerLeave,j=>{j.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:P(l.onKeyDown,j=>{d.searchRef?.current!==""&&j.key===" "||(pp.includes(j.key)&&y(),j.key===" "&&j.preventDefault())})})})})});kc.displayName=$s;var Yt="SelectItemText",Rc=o.forwardRef((e,s)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,l=pt(Yt,n),c=xt(Yt,n),d=_c(Yt,n),u=yp(Yt,n),[h,m]=o.useState(null),p=Z(s,y=>m(y),d.onItemTextChange,y=>c.itemTextRefCallback?.(y,d.value,d.disabled)),x=h?.textContent,v=o.useMemo(()=>t.jsx("option",{value:d.value,disabled:d.disabled,children:x},d.value),[d.disabled,d.value,x]),{onNativeOptionAdd:f,onNativeOptionRemove:g}=u;return Ze(()=>(f(v),()=>g(v)),[f,g,v]),t.jsxs(t.Fragment,{children:[t.jsx(V.span,{id:d.textId,...i,ref:p}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Ca.createPortal(i.children,l.valueNode):null]})});Rc.displayName=Yt;var Ec="SelectItemIndicator",Mc=o.forwardRef((e,s)=>{const{__scopeSelect:n,...r}=e;return _c(Ec,n).isSelected?t.jsx(V.span,{"aria-hidden":!0,...r,ref:s}):null});Mc.displayName=Ec;var Wn="SelectScrollUpButton",Tc=o.forwardRef((e,s)=>{const n=xt(Wn,e.__scopeSelect),r=Or(Wn,e.__scopeSelect),[a,i]=o.useState(!1),l=Z(s,r.onScrollButtonChange);return Ze(()=>{if(n.viewport&&n.isPositioned){let c=function(){const u=d.scrollTop>0;i(u)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),a?t.jsx(Ic,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});Tc.displayName=Wn;var Gn="SelectScrollDownButton",Pc=o.forwardRef((e,s)=>{const n=xt(Gn,e.__scopeSelect),r=Or(Gn,e.__scopeSelect),[a,i]=o.useState(!1),l=Z(s,r.onScrollButtonChange);return Ze(()=>{if(n.viewport&&n.isPositioned){let c=function(){const u=d.scrollHeight-d.clientHeight,h=Math.ceil(d.scrollTop)<u;i(h)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),a?t.jsx(Ic,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});Pc.displayName=Gn;var Ic=o.forwardRef((e,s)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=xt("SelectScrollButton",n),l=o.useRef(null),c=sn(n),d=o.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return o.useEffect(()=>()=>d(),[d]),Ze(()=>{c().find(h=>h.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),t.jsx(V.div,{"aria-hidden":!0,...a,ref:s,style:{flexShrink:0,...a.style},onPointerDown:P(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:P(a.onPointerMove,()=>{i.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:P(a.onPointerLeave,()=>{d()})})}),Tp="SelectSeparator",Ac=o.forwardRef((e,s)=>{const{__scopeSelect:n,...r}=e;return t.jsx(V.div,{"aria-hidden":!0,...r,ref:s})});Ac.displayName=Tp;var Qn="SelectArrow",Pp=o.forwardRef((e,s)=>{const{__scopeSelect:n,...r}=e,a=nn(n),i=pt(Qn,n),l=xt(Qn,n);return i.open&&l.position==="popper"?t.jsx(ja,{...a,...r,ref:s}):null});Pp.displayName=Qn;var Ip="SelectBubbleInput",Dc=o.forwardRef(({__scopeSelect:e,value:s,...n},r)=>{const a=o.useRef(null),i=Z(r,a),l=jr(s);return o.useEffect(()=>{const c=a.current;if(!c)return;const d=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==s&&h){const m=new Event("change",{bubbles:!0});h.call(c,s),c.dispatchEvent(m)}},[l,s]),t.jsx(V.select,{...n,style:{...Il,...n.style},ref:i,defaultValue:s})});Dc.displayName=Ip;function Oc(e){return e===""||e===void 0}function Fc(e){const s=Ae(e),n=o.useRef(""),r=o.useRef(0),a=o.useCallback(l=>{const c=n.current+l;s(c),(function d(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>d(""),1e3))})(c)},[s]),i=o.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return o.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function Lc(e,s,n){const a=s.length>1&&Array.from(s).every(u=>u===s[0])?s[0]:s,i=n?e.indexOf(n):-1;let l=Ap(e,Math.max(i,0));a.length===1&&(l=l.filter(u=>u!==n));const d=l.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return d!==n?d:void 0}function Ap(e,s){return e.map((n,r)=>e[(s+r)%e.length])}var Dp=uc,$c=mc,Op=pc,Fp=xc,Lp=gc,Uc=vc,$p=wc,qc=Sc,Kc=kc,Up=Rc,qp=Mc,zc=Tc,Bc=Pc,Hc=Ac;const ot=Dp,it=Op,tt=o.forwardRef(({className:e,children:s,...n},r)=>t.jsxs($c,{ref:r,className:I("flex h-10 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 transition-all duration-200",e),...n,children:[s,t.jsx(Fp,{asChild:!0,children:t.jsx(ir,{className:"h-4 w-4 opacity-50"})})]}));tt.displayName=$c.displayName;const Vc=o.forwardRef(({className:e,...s},n)=>t.jsx(zc,{ref:n,className:I("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(Ua,{className:"h-4 w-4"})}));Vc.displayName=zc.displayName;const Wc=o.forwardRef(({className:e,...s},n)=>t.jsx(Bc,{ref:n,className:I("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(ir,{className:"h-4 w-4"})}));Wc.displayName=Bc.displayName;const st=o.forwardRef(({className:e,children:s,position:n="popper",...r},a)=>t.jsx(Lp,{children:t.jsxs(Uc,{ref:a,className:I("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[t.jsx(Vc,{}),t.jsx($p,{className:I("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),t.jsx(Wc,{})]})}));st.displayName=Uc.displayName;const Kp=o.forwardRef(({className:e,...s},n)=>t.jsx(qc,{ref:n,className:I("px-2 py-1.5 text-sm font-semibold",e),...s}));Kp.displayName=qc.displayName;const Q=o.forwardRef(({className:e,children:s,...n},r)=>t.jsxs(Kc,{ref:r,className:I("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[t.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(qp,{children:t.jsx(Je,{className:"h-4 w-4"})})}),t.jsx(Up,{children:s})]}));Q.displayName=Kc.displayName;const zp=o.forwardRef(({className:e,...s},n)=>t.jsx(Hc,{ref:n,className:I("-mx-1 my-1 h-px bg-muted",e),...s}));zp.displayName=Hc.displayName;function Bp({open:e,onOpenChange:s}){const n=ct(),[r,a]=o.useState(!1),[i,l]=o.useState(null),[c,d]=o.useState(null),[u,h]=o.useState(""),[m,p]=o.useState(""),[x,v]=o.useState("user"),{data:f,isLoading:g,refetch:y}=Ie({queryKey:["users"],queryFn:xs.list,enabled:e}),j=Be({mutationFn:S=>xs.create(S),onSuccess:()=>{n.invalidateQueries({queryKey:["users"]}),C(),a(!1),$({title:"User created"})},onError:S=>{$({title:"Failed to create user",description:S instanceof Error?S.message:"Unknown error",variant:"destructive"})}}),N=Be({mutationFn:({id:S,data:F})=>xs.update(S,F),onSuccess:()=>{n.invalidateQueries({queryKey:["users"]}),C(),l(null),$({title:"User updated"})},onError:S=>{$({title:"Failed to update user",description:S instanceof Error?S.message:"Unknown error",variant:"destructive"})}}),R=Be({mutationFn:S=>xs.delete(S),onSuccess:()=>{n.invalidateQueries({queryKey:["users"]}),d(null),$({title:"User deleted"})},onError:S=>{$({title:"Failed to delete user",description:S instanceof Error?S.message:"Unknown error",variant:"destructive"})}}),C=()=>{h(""),p(""),v("user")};o.useEffect(()=>{i?(h(i.username),p(""),v(i.role)):C()},[i]);const A=()=>{j.mutate({username:u,password:m,role:x})},w=()=>{if(!i)return;const S={};u!==i.username&&(S.username=u),m&&(S.password=m),x!==i.role&&(S.role=x),N.mutate({id:i.id,data:S})},T=S=>S==="admin"?t.jsxs(ce,{variant:"default",className:"gap-1",children:[t.jsx(Uu,{className:"h-3 w-3"}),"Admin"]}):t.jsxs(ce,{variant:"secondary",className:"gap-1",children:[t.jsx(qs,{className:"h-3 w-3"}),"User"]});return t.jsxs(t.Fragment,{children:[t.jsx(Re,{open:e,onOpenChange:s,children:t.jsxs(Ce,{className:"max-w-2xl max-h-[80vh] overflow-hidden",children:[t.jsxs(Se,{children:[t.jsxs(_e,{className:"flex items-center gap-2",children:[t.jsx(Un,{className:"h-5 w-5"}),"User Management"]}),t.jsx(ke,{children:"Manage dashboard users and their permissions."})]}),t.jsxs("div",{className:"space-y-4 py-4",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsxs(M,{onClick:()=>a(!0),children:[t.jsx(Ks,{className:"mr-2 h-4 w-4"}),"Add User"]}),t.jsx(M,{variant:"outline",size:"icon",onClick:()=>y(),children:t.jsx(et,{className:"h-4 w-4"})})]}),t.jsx(Ue,{className:"h-64 rounded-md border",children:g?t.jsx("div",{className:"flex h-full items-center justify-center",children:t.jsx(Ne,{className:"h-6 w-6 animate-spin"})}):!f||f.length===0?t.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2 text-muted-foreground",children:[t.jsx(Un,{className:"h-8 w-8"}),t.jsx("p",{children:"No users"})]}):t.jsxs(zt,{children:[t.jsx(Bt,{children:t.jsxs(De,{children:[t.jsx(te,{children:"Username"}),t.jsx(te,{children:"Role"}),t.jsx(te,{children:"Created"}),t.jsx(te,{className:"text-right",children:"Actions"})]})}),t.jsx(Ht,{children:f.map(S=>t.jsxs(De,{children:[t.jsx(X,{className:"font-medium",children:S.username}),t.jsx(X,{children:T(S.role)}),t.jsx(X,{className:"text-sm text-muted-foreground",children:at(S.created_at)}),t.jsx(X,{className:"text-right",children:t.jsxs("div",{className:"flex justify-end gap-1",children:[t.jsx(M,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>l(S),children:t.jsx(Ku,{className:"h-4 w-4"})}),t.jsx(M,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>d(S),children:t.jsx(Kt,{className:"h-4 w-4 text-destructive"})})]})})]},S.id))})]})})]})]})}),t.jsx(Re,{open:r,onOpenChange:a,children:t.jsxs(Ce,{children:[t.jsxs(Se,{children:[t.jsx(_e,{children:"Create User"}),t.jsx(ke,{children:"Add a new dashboard user."})]}),t.jsxs("div",{className:"space-y-4 py-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{htmlFor:"create-username",children:"Username"}),t.jsx(me,{id:"create-username",placeholder:"johndoe",value:u,onChange:S=>h(S.target.value)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{htmlFor:"create-password",children:"Password"}),t.jsx(me,{id:"create-password",type:"password",placeholder:"",value:m,onChange:S=>p(S.target.value)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{htmlFor:"create-role",children:"Role"}),t.jsxs(ot,{value:x,onValueChange:S=>v(S),children:[t.jsx(tt,{children:t.jsx(it,{})}),t.jsxs(st,{children:[t.jsx(Q,{value:"user",children:"User"}),t.jsx(Q,{value:"admin",children:"Admin"})]})]})]})]}),t.jsxs(Oe,{children:[t.jsx(M,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),t.jsxs(M,{onClick:A,disabled:!u||!m||j.isPending,children:[j.isPending&&t.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Create"]})]})]})}),t.jsx(Re,{open:!!i,onOpenChange:()=>l(null),children:t.jsxs(Ce,{children:[t.jsxs(Se,{children:[t.jsx(_e,{children:"Edit User"}),t.jsxs(ke,{children:['Update user "',i?.username,'".']})]}),t.jsxs("div",{className:"space-y-4 py-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{htmlFor:"edit-username",children:"Username"}),t.jsx(me,{id:"edit-username",value:u,onChange:S=>h(S.target.value)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{htmlFor:"edit-password",children:"Password (leave blank to keep)"}),t.jsx(me,{id:"edit-password",type:"password",placeholder:"",value:m,onChange:S=>p(S.target.value)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{htmlFor:"edit-role",children:"Role"}),t.jsxs(ot,{value:x,onValueChange:S=>v(S),children:[t.jsx(tt,{children:t.jsx(it,{})}),t.jsxs(st,{children:[t.jsx(Q,{value:"user",children:"User"}),t.jsx(Q,{value:"admin",children:"Admin"})]})]})]})]}),t.jsxs(Oe,{children:[t.jsx(M,{variant:"outline",onClick:()=>l(null),children:"Cancel"}),t.jsxs(M,{onClick:w,disabled:!u||N.isPending,children:[N.isPending&&t.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Update"]})]})]})}),t.jsx(en,{open:!!c,onOpenChange:()=>d(null),children:t.jsxs(is,{children:[t.jsxs(cs,{children:[t.jsx(ds,{children:"Delete User"}),t.jsxs(us,{children:['Are you sure you want to delete "',c?.username,'"? This action cannot be undone.']})]}),t.jsxs(ls,{children:[t.jsx(ms,{children:"Cancel"}),t.jsxs(hs,{onClick:()=>c&&R.mutate(c.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[R.isPending&&t.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Delete"]})]})]})})]})}function Hp({open:e,onOpenChange:s}){const n=ct(),[r,a]=o.useState(!1),[i,l]=o.useState(72),[c,d]=o.useState(null),[u,h]=o.useState(null),[m,p]=o.useState(!1),{data:x,isLoading:v,refetch:f}=Ie({queryKey:["invitations"],queryFn:gn.list,enabled:e}),g=Be({mutationFn:w=>gn.create(w),onSuccess:w=>{n.invalidateQueries({queryKey:["invitations"]}),h(w),$({title:"Invitation code created"})},onError:w=>{$({title:"Failed to create invitation code",description:w instanceof Error?w.message:"Unknown error",variant:"destructive"})}}),y=Be({mutationFn:w=>gn.revoke(w),onSuccess:()=>{n.invalidateQueries({queryKey:["invitations"]}),d(null),$({title:"Invitation code revoked"})},onError:w=>{$({title:"Failed to revoke invitation code",description:w instanceof Error?w.message:"Unknown error",variant:"destructive"})}}),j=()=>{g.mutate(i)},N=async()=>{u?.code&&(await navigator.clipboard.writeText(u.code),p(!0),setTimeout(()=>p(!1),2e3))},R=()=>{h(null),a(!1),p(!1)},C=w=>{switch(w){case"active":return t.jsxs(ce,{variant:"default",className:"gap-1 bg-green-600",children:[t.jsx(Jt,{className:"h-3 w-3"}),"Active"]});case"used":return t.jsxs(ce,{variant:"secondary",className:"gap-1",children:[t.jsx(Rs,{className:"h-3 w-3"}),"Used"]});case"revoked":return t.jsxs(ce,{variant:"destructive",className:"gap-1",children:[t.jsx(Zt,{className:"h-3 w-3"}),"Revoked"]});default:return t.jsx(ce,{variant:"outline",children:w})}},A=w=>new Date(w)<new Date;return t.jsxs(t.Fragment,{children:[t.jsx(Re,{open:e,onOpenChange:s,children:t.jsxs(Ce,{className:"max-w-3xl max-h-[80vh] overflow-hidden",children:[t.jsxs(Se,{children:[t.jsxs(_e,{className:"flex items-center gap-2",children:[t.jsx(Pn,{className:"h-5 w-5"}),"Invitation Codes"]}),t.jsx(ke,{children:"Create and manage invitation codes for user registration."})]}),t.jsxs("div",{className:"space-y-4 py-4",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsxs(M,{onClick:()=>a(!0),children:[t.jsx(Ks,{className:"mr-2 h-4 w-4"}),"Create Code"]}),t.jsx(M,{variant:"outline",size:"icon",onClick:()=>f(),children:t.jsx(et,{className:"h-4 w-4"})})]}),t.jsx(Ue,{className:"h-80 rounded-md border",children:v?t.jsx("div",{className:"flex h-full items-center justify-center",children:t.jsx(Ne,{className:"h-6 w-6 animate-spin"})}):!x||x.length===0?t.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2 text-muted-foreground",children:[t.jsx(Pn,{className:"h-8 w-8"}),t.jsx("p",{children:"No invitation codes"})]}):t.jsxs(zt,{children:[t.jsx(Bt,{children:t.jsxs(De,{children:[t.jsx(te,{children:"ID"}),t.jsx(te,{children:"Status"}),t.jsx(te,{children:"Created"}),t.jsx(te,{children:"Expires"}),t.jsx(te,{children:"Used By"}),t.jsx(te,{className:"text-right",children:"Actions"})]})}),t.jsx(Ht,{children:x.map(w=>t.jsxs(De,{children:[t.jsxs(X,{className:"font-mono text-xs",children:[w.id.slice(0,8),"..."]}),t.jsx(X,{children:w.status==="active"&&A(w.expires_at)?t.jsxs(ce,{variant:"outline",className:"gap-1",children:[t.jsx(Zt,{className:"h-3 w-3"}),"Expired"]}):C(w.status)}),t.jsx(X,{className:"text-sm text-muted-foreground",children:at(w.created_at)}),t.jsx(X,{className:"text-sm text-muted-foreground",children:at(w.expires_at)}),t.jsx(X,{className:"font-mono text-xs text-muted-foreground",children:w.used_by?`${w.used_by.slice(0,8)}...`:"-"}),t.jsx(X,{className:"text-right",children:w.status==="active"&&!A(w.expires_at)&&t.jsx(M,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>d(w),children:t.jsx(kd,{className:"h-4 w-4 text-destructive"})})})]},w.id))})]})})]})]})}),t.jsx(Re,{open:r&&!u,onOpenChange:w=>!w&&a(!1),children:t.jsxs(Ce,{children:[t.jsxs(Se,{children:[t.jsx(_e,{children:"Create Invitation Code"}),t.jsx(ke,{children:"Generate a new invitation code for user registration."})]}),t.jsx("div",{className:"space-y-4 py-4",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{htmlFor:"expires-in",children:"Expires In"}),t.jsxs(ot,{value:String(i),onValueChange:w=>l(Number(w)),children:[t.jsx(tt,{children:t.jsx(it,{})}),t.jsxs(st,{children:[t.jsx(Q,{value:"24",children:"24 hours (1 day)"}),t.jsx(Q,{value:"48",children:"48 hours (2 days)"}),t.jsx(Q,{value:"72",children:"72 hours (3 days)"}),t.jsx(Q,{value:"168",children:"168 hours (1 week)"}),t.jsx(Q,{value:"720",children:"720 hours (30 days)"})]})]})]})}),t.jsxs(Oe,{children:[t.jsx(M,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),t.jsxs(M,{onClick:j,disabled:g.isPending,children:[g.isPending&&t.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Create"]})]})]})}),t.jsx(Re,{open:!!u,onOpenChange:R,children:t.jsxs(Ce,{children:[t.jsxs(Se,{children:[t.jsxs(_e,{className:"flex items-center gap-2 text-green-600",children:[t.jsx(Rs,{className:"h-5 w-5"}),"Invitation Code Created"]}),t.jsx(ke,{children:"Copy this code and share it with the user. This code will only be shown once."})]}),t.jsxs("div",{className:"space-y-4 py-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{children:"Invitation Code"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("code",{className:"flex-1 rounded-md bg-muted px-4 py-3 font-mono text-sm break-all",children:u?.code}),t.jsx(M,{variant:"outline",size:"icon",onClick:N,className:"shrink-0",children:m?t.jsx(Je,{className:"h-4 w-4 text-green-600"}):t.jsx(Nt,{className:"h-4 w-4"})})]})]}),t.jsx("div",{className:"text-sm text-muted-foreground",children:t.jsxs("p",{children:["Expires: ",u&&new Date(u.expires_at).toLocaleString()]})})]}),t.jsx(Oe,{children:t.jsx(M,{onClick:R,children:"Done"})})]})}),t.jsx(en,{open:!!c,onOpenChange:()=>d(null),children:t.jsxs(is,{children:[t.jsxs(cs,{children:[t.jsx(ds,{children:"Revoke Invitation Code"}),t.jsx(us,{children:"Are you sure you want to revoke this invitation code? It will no longer be usable for registration."})]}),t.jsxs(ls,{children:[t.jsx(ms,{children:"Cancel"}),t.jsxs(hs,{onClick:()=>c&&y.mutate(c.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[y.isPending&&t.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Revoke"]})]})]})})]})}function Vp({user:e,isConnected:s=!0,lastRefreshed:n,fetchTimeMs:r}){const{logout:a}=or(),{theme:i,toggleTheme:l}=sh(),[c,d]=o.useState(!1),[u,h]=o.useState(!1),[m,p]=o.useState(!1),[x,v]=o.useState(!1),f=()=>{v(!0),window.location.reload()};return t.jsxs(t.Fragment,{children:[t.jsx("header",{className:"sticky top-0 z-40 border-b border-border/50 bg-background/80 backdrop-blur-xl",children:t.jsxs("div",{className:"mx-auto flex h-16 max-w-[1600px] items-center justify-between px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-primary/10 glow-sm",children:t.jsx(er,{className:"h-5 w-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"font-display text-lg font-semibold tracking-tight",children:"LLM Load Balancer"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Dashboard"})]})]}),t.jsxs("div",{className:"hidden md:flex items-center gap-4 text-xs text-muted-foreground",children:[t.jsxs("span",{id:"connection-status",className:"flex items-center gap-1.5",children:[t.jsx("span",{className:`h-2 w-2 rounded-full ${s?"bg-green-500":"bg-red-500"}`}),"Connection: ",s?"Online":"Offline"]}),n&&t.jsxs("span",{id:"last-refreshed",children:["Last updated: ",n.toLocaleTimeString()]}),!n&&t.jsx("span",{id:"last-refreshed",children:"Last updated: --:--:--"}),r!=null&&t.jsxs("span",{id:"refresh-metrics",children:["Fetch time: ",r,"ms"]}),r==null&&t.jsx("span",{id:"refresh-metrics",children:"Fetch time: --ms"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(M,{id:"api-keys-button",variant:"outline",size:"sm",onClick:()=>d(!0),className:"hidden sm:inline-flex",children:[t.jsx(Ts,{className:"mr-2 h-4 w-4"}),"API Keys"]}),t.jsxs(M,{id:"lb-playground-button",variant:"outline",size:"sm",className:"hidden lg:inline-flex",onClick:()=>{window.location.hash="lb-playground"},children:[t.jsx(Ps,{className:"mr-2 h-4 w-4"}),"LB Playground"]}),t.jsx(M,{id:"refresh-button",variant:"ghost",size:"icon",onClick:f,disabled:x,children:t.jsx(et,{className:`h-4 w-4 ${x?"animate-spin":""}`})}),t.jsx(M,{id:"theme-toggle",variant:"ghost",size:"icon",onClick:l,children:i==="dark"?t.jsx(Vu,{className:"h-4 w-4"}):t.jsx(ku,{className:"h-4 w-4"})}),t.jsxs(xf,{children:[t.jsx(gf,{asChild:!0,children:t.jsx(M,{variant:"ghost",size:"icon",className:"relative",children:t.jsx(qs,{className:"h-4 w-4"})})}),t.jsxs(si,{align:"end",className:"w-56",children:[t.jsx(ni,{children:t.jsxs("div",{className:"flex flex-col space-y-1",children:[t.jsx("p",{className:"text-sm font-medium",children:e?.username}),t.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:e?.role})]})}),t.jsx(_s,{}),t.jsxs(At,{onClick:()=>d(!0),className:"sm:hidden",children:[t.jsx(Ts,{className:"mr-2 h-4 w-4"}),"API Keys"]}),t.jsxs(At,{onClick:()=>{window.location.hash="lb-playground"},className:"lg:hidden",children:[t.jsx(Ps,{className:"mr-2 h-4 w-4"}),"LB Playground"]}),t.jsx(_s,{className:"sm:hidden"}),e?.role==="admin"&&t.jsxs(t.Fragment,{children:[t.jsxs(At,{onClick:()=>h(!0),children:[t.jsx(Un,{className:"mr-2 h-4 w-4"}),"Manage Users"]}),t.jsxs(At,{onClick:()=>p(!0),children:[t.jsx(Pn,{className:"mr-2 h-4 w-4"}),"Invitation Codes"]}),t.jsx(_s,{})]}),t.jsxs(At,{onClick:a,className:"text-destructive",children:[t.jsx(Nu,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]})]})]})}),t.jsx(mp,{open:c,onOpenChange:d}),t.jsx(Bp,{open:u,onOpenChange:h}),t.jsx(Hp,{open:m,onOpenChange:p})]})}const ha={primary:"bg-primary/10 group-hover:bg-primary/20","chart-1":"bg-chart-1/10 group-hover:bg-chart-1/20","chart-2":"bg-chart-2/10 group-hover:bg-chart-2/20","chart-3":"bg-chart-3/10 group-hover:bg-chart-3/20","chart-4":"bg-chart-4/10 group-hover:bg-chart-4/20","chart-5":"bg-chart-5/10 group-hover:bg-chart-5/20",success:"bg-success/10 group-hover:bg-success/20",warning:"bg-warning/10 group-hover:bg-warning/20",destructive:"bg-destructive/10 group-hover:bg-destructive/20"};function Wp({title:e,value:s,subtitle:n,icon:r,accentColor:a="primary",isLoading:i,delay:l=0,dataStat:c}){return t.jsx(yt,{className:"stat-card group overflow-hidden animate-fade-up",style:{animationDelay:`${l}ms`},"data-stat":c,children:t.jsx(bt,{className:"p-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),i?t.jsx("div",{className:"h-8 w-24 shimmer rounded"}):t.jsx("p",{className:"text-3xl font-bold tracking-tight",children:s}),n&&!i&&t.jsx("p",{className:"text-xs text-muted-foreground",children:n})]}),t.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-lg transition-colors ${ha[a]||ha.primary}`,children:r})]})})})}function Gp({stats:e,endpoints:s,isLoading:n}){const r=e?{total:e.total_runtimes??e.total_nodes,online:e.online_runtimes??e.online_nodes,pending:e.pending_runtimes??e.pending_nodes,registering:e.registering_runtimes??e.registering_nodes,offline:e.offline_runtimes??e.offline_nodes}:void 0,a=s?{total:s.length,online:s.filter(p=>p.status==="online").length,pending:s.filter(p=>p.status==="pending").length,offline:s.filter(p=>p.status==="offline").length,error:s.filter(p=>p.status==="error").length}:void 0,i=a?.total??r?.total,l=a?.online??r?.online,c=a?.pending??r?.pending,d=a?.offline??r?.offline,u=a?.error,h=l!=null&&c!=null&&d!=null&&(u==null||u>=0)?[`${l} online`,`${c} pending`,`${d} offline`,...u!=null&&u>0?[`${u} error`]:[]].join(", "):void 0,m=[{title:"Total Endpoints",value:i!=null?we(i):"",subtitle:h,icon:t.jsx(es,{className:"h-5 w-5 text-primary"}),accentColor:"primary",dataStat:"total-endpoints"},{title:"Total Requests",value:e?we(e.total_requests):"",subtitle:e?`${we(e.successful_requests)} successful`:void 0,icon:t.jsx(Cd,{className:"h-5 w-5 text-chart-2"}),accentColor:"chart-2",dataStat:"total-requests"},{title:"Total Tokens",value:e?we(e.total_tokens):"",subtitle:e?`In: ${we(e.total_input_tokens)} / Out: ${we(e.total_output_tokens)}`:void 0,icon:t.jsx($t,{className:"h-5 w-5 text-chart-5"}),accentColor:"chart-5",dataStat:"total-tokens"},{title:"Active Requests",value:e?we(e.total_active_requests):"",icon:t.jsx(er,{className:"h-5 w-5 text-chart-1"}),accentColor:"chart-1",dataStat:"active-requests"},{title:"Queued Requests",value:e?we(e.queued_requests):"",icon:t.jsx(fu,{className:"h-5 w-5 text-chart-5"}),accentColor:"chart-5",dataStat:"queued-requests"},{title:"Success Rate",value:e&&e.total_requests>0?vn(e.successful_requests/e.total_requests*100):"",subtitle:e?`${we(e.failed_requests)} failed`:void 0,icon:e&&e.failed_requests>0?t.jsx(Zt,{className:"h-5 w-5 text-destructive"}):t.jsx(Rs,{className:"h-5 w-5 text-success"}),accentColor:e&&e.failed_requests>0?"destructive":"success",dataStat:"success-rate"},{title:"Avg Response Time",value:e?Mn(e.average_response_time_ms):"",icon:t.jsx(Jt,{className:"h-5 w-5 text-warning"}),accentColor:"warning",dataStat:"average-response-time-ms"},{title:"Avg GPU Usage",value:e?vn(e.average_gpu_usage):"",icon:t.jsx(Ju,{className:"h-5 w-5 text-chart-3"}),accentColor:"chart-3",dataStat:"average-gpu-usage"},{title:"Avg GPU Memory",value:e?vn(e.average_gpu_memory_usage):"",icon:t.jsx(uu,{className:"h-5 w-5 text-chart-4"}),accentColor:"chart-4",dataStat:"average-gpu-memory-usage"}];return t.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:m.map((p,x)=>t.jsx(Wp,{...p,isLoading:n,delay:x*50},p.title))})}const rn=o.forwardRef(({className:e,...s},n)=>t.jsx("textarea",{className:I("flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200",e),ref:n,...s}));rn.displayName="Textarea";var Qp="Separator",ma="horizontal",Yp=["horizontal","vertical"],Gc=o.forwardRef((e,s)=>{const{decorative:n,orientation:r=ma,...a}=e,i=Xp(r)?r:ma,c=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return t.jsx(Al.div,{"data-orientation":i,...c,...a,ref:s})});Gc.displayName=Qp;function Xp(e){return Yp.includes(e)}var Qc=Gc;const Xe=o.forwardRef(({className:e,orientation:s="horizontal",decorative:n=!0,...r},a)=>t.jsx(Qc,{ref:a,decorative:n,orientation:s,className:I("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Xe.displayName=Qc.displayName;const Yc=o.forwardRef(({className:e,value:s=0,...n},r)=>{const a=Math.min(100,Math.max(0,s));return t.jsx("div",{ref:r,role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100,className:I("relative h-2 w-full overflow-hidden rounded-full bg-muted",e),...n,children:t.jsx("div",{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-a}%)`}})})});Yc.displayName="Progress";function Zp({endpoint:e,open:s,onOpenChange:n}){const r=ct(),[a,i]=o.useState(""),[l,c]=o.useState("idle"),[d,u]=o.useState(null),[h,m]=o.useState(0),[p,x]=o.useState(""),[v,f]=o.useState(""),g=o.useRef(null);o.useEffect(()=>{s||(i(""),c("idle"),u(null),m(0),x(""),f(""),g.current&&(clearInterval(g.current),g.current=null))},[s]),o.useEffect(()=>()=>{g.current&&clearInterval(g.current)},[]);const y=Be({mutationFn:C=>Pe.downloadModel(e.id,C),onSuccess:C=>{c("downloading"),u(C.task_id),m(0),x("Starting download..."),j(C.task_id)},onError:C=>{c("error"),f(C instanceof Error?C.message:"Download failed"),$({title:"Download Failed",description:C instanceof Error?C.message:"Unknown error",variant:"destructive"})}}),j=C=>{g.current&&clearInterval(g.current);const A=async()=>{if(e)try{const w=await Pe.getDownloadProgress(e.id),T=w.tasks.find(S=>S.task_id===C)||w.tasks.find(S=>S.model===a);if(!T){x("Waiting for download to start...");return}T.status==="completed"?(c("completed"),m(100),x("Download completed"),g.current&&(clearInterval(g.current),g.current=null),r.invalidateQueries({queryKey:["endpoint-models",e.id]}),r.invalidateQueries({queryKey:["dashboard-endpoints"]}),$({title:"Download Completed",description:`Model ${a} has been downloaded successfully`})):T.status==="failed"||T.status==="cancelled"?(c("error"),f(T.error||"Download failed"),x(""),g.current&&(clearInterval(g.current),g.current=null)):(T.status==="downloading"||T.status==="pending")&&(m(T.progress||0),x(Jp(T)))}catch{}};A(),g.current=window.setInterval(A,2e3)},N=()=>{if(!a.trim()){$({title:"Model name required",description:"Please enter a model name",variant:"destructive"});return}f(""),y.mutate({model:a.trim()})},R=()=>{if(l==="downloading"){$({title:"Download in progress",description:"Please wait for the download to complete"});return}n(!1)};return!e||e.endpoint_type!=="xllm"?null:t.jsx(Re,{open:s,onOpenChange:C=>{if(C){n(!0);return}R()},children:t.jsxs(Ce,{className:"sm:max-w-md",children:[t.jsxs(Se,{children:[t.jsxs(_e,{className:"flex items-center gap-2",children:[t.jsx(dr,{className:"h-5 w-5"}),"Download Model"]}),t.jsxs(ke,{children:["Download a model to ",e.name]})]}),t.jsxs("div",{className:"space-y-4 py-4",children:[l==="idle"&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{htmlFor:"model-name",children:"Model Name"}),t.jsx(me,{id:"model-name",placeholder:"e.g., llama-3.1-8b-instruct",value:a,onChange:C=>i(C.target.value),disabled:y.isPending}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the model name as recognized by xLLM"})]}),l==="downloading"&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ne,{className:"h-4 w-4 animate-spin"}),t.jsxs("span",{className:"text-sm font-medium",children:["Downloading ",a]})]}),t.jsx(Yc,{value:h,className:"h-2"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:p})]}),l==="completed"&&t.jsxs("div",{className:"flex flex-col items-center gap-2 py-4",children:[t.jsx(zd,{className:"h-12 w-12 text-green-500"}),t.jsx("p",{className:"text-sm font-medium",children:"Download Completed"}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[a," is now available"]})]}),l==="error"&&t.jsxs("div",{className:"flex flex-col items-center gap-2 py-4",children:[t.jsx(Zt,{className:"h-12 w-12 text-destructive"}),t.jsx("p",{className:"text-sm font-medium text-destructive",children:"Download Failed"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:v})]})]}),t.jsxs(Oe,{children:[(l==="idle"||l==="error")&&t.jsxs(t.Fragment,{children:[t.jsx(M,{variant:"outline",onClick:R,children:"Cancel"}),t.jsxs(M,{onClick:N,disabled:!a.trim()||y.isPending,children:[y.isPending&&t.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Download"]})]}),l==="completed"&&t.jsx(M,{onClick:R,children:"Close"}),l==="downloading"&&t.jsx("p",{className:"text-xs text-muted-foreground",children:"Download in progress..."})]})]})})}function Jp(e){const s=[];return e.speed_mbps!=null&&s.push(`${e.speed_mbps.toFixed(1)} Mbps`),e.eta_seconds!=null&&s.push(`ETA ${ex(e.eta_seconds)}`),s.join(" / ")||"Downloading..."}function ex(e){if(!Number.isFinite(e))return"-";const s=Math.max(0,Math.floor(e)),n=Math.floor(s/60),r=s%60;return n<=0?`${r}s`:`${n}m ${r}s`}function tx(e){switch(e){case"online":return"default";case"pending":return"secondary";case"offline":return"outline";case"error":return"destructive";default:return"outline"}}function sx(e){switch(e){case"online":return"Online";case"pending":return"Pending";case"offline":return"Offline";case"error":return"Error";default:return e}}function nx(e){switch(e){case"xllm":return"xLLM";case"ollama":return"Ollama";case"vllm":return"vLLM";case"openai_compatible":return"OpenAI Compatible";case"unknown":return"Unknown";default:return"-"}}function rx(e){switch(e){case"xllm":return"default";case"ollama":case"vllm":return"secondary";default:return"outline"}}function ax({endpoint:e,open:s,onOpenChange:n}){const r=ct(),[a,i]=o.useState(e?.name||""),[l,c]=o.useState(e?.notes||""),[d,u]=o.useState(e?.health_check_interval_secs?.toString()||"30"),[h,m]=o.useState(e?.inference_timeout_secs?.toString()||"120"),[p,x]=o.useState(!1);o.useEffect(()=>{e&&(i(e.name||""),c(e.notes||""),u(e.health_check_interval_secs?.toString()||"30"),m(e.inference_timeout_secs?.toString()||"120"))},[e]);const{data:v,isLoading:f}=Ie({queryKey:["endpoint-models",e?.id],queryFn:()=>Pe.getModels(e.id),enabled:!!e?.id&&s}),g=()=>{e&&(window.location.hash=`playground/${e.id}`,n(!1))},y=Be({mutationFn:C=>Pe.update(e.id,C),onSuccess:()=>{r.invalidateQueries({queryKey:["dashboard-endpoints"]}),$({title:"Update Complete",description:"Endpoint settings updated"})},onError:C=>{$({title:"Update Failed",description:String(C),variant:"destructive"})}}),j=Be({mutationFn:()=>Pe.test(e.id),onSuccess:C=>{r.invalidateQueries({queryKey:["dashboard-endpoints"]}),$({title:C.success?"Connection Successful":"Connection Failed",description:C.message||(C.latency_ms?`Latency: ${C.latency_ms}ms`:""),variant:C.success?"default":"destructive"})},onError:C=>{$({title:"Connection Test Failed",description:String(C),variant:"destructive"})}}),N=Be({mutationFn:()=>Pe.sync(e.id),onSuccess:C=>{r.invalidateQueries({queryKey:["dashboard-endpoints"]}),$({title:"Sync Complete",description:`Synced ${C.synced_models} models`})},onError:C=>{$({title:"Sync Failed",description:String(C),variant:"destructive"})}}),R=()=>{y.mutate({name:a!==e?.name?a:void 0,notes:l!==e?.notes?l:void 0,health_check_interval_secs:parseInt(d)!==e?.health_check_interval_secs?parseInt(d):void 0,inference_timeout_secs:parseInt(h)!==e?.inference_timeout_secs?parseInt(h):void 0})};return e?t.jsxs(Re,{open:s,onOpenChange:n,children:[t.jsxs(Ce,{className:"max-w-2xl",children:[t.jsxs(Se,{children:[t.jsxs(_e,{className:"flex items-center gap-2",children:[t.jsx(es,{className:"h-5 w-5"}),e.name]}),t.jsx(ke,{children:e.base_url})]}),t.jsxs("div",{className:"space-y-6 py-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(ce,{variant:tx(e.status),children:sx(e.status)}),t.jsx(ce,{variant:rx(e.endpoint_type),children:nx(e.endpoint_type)}),t.jsxs("span",{className:"text-sm text-muted-foreground",children:["Models: ",e.model_count]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(M,{variant:"outline",size:"sm",onClick:()=>j.mutate(),disabled:j.isPending,children:[t.jsx(ur,{className:"h-4 w-4 mr-1"}),"Test Connection"]}),t.jsxs(M,{variant:"outline",size:"sm",onClick:()=>N.mutate(),disabled:N.isPending||e.status!=="online",children:[t.jsx(et,{className:`h-4 w-4 mr-1 ${N.isPending?"animate-spin":""}`}),"Sync Models"]})]})]}),t.jsx(Xe,{}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Latency:"}),t.jsx("span",{className:"ml-2",children:e.latency_ms!=null?`${e.latency_ms}ms`:"-"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Registered:"}),t.jsx("span",{className:"ml-2",children:at(e.registered_at)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Type Source:"}),t.jsx("span",{className:"ml-2",children:e.endpoint_type_source})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Type Detected:"}),t.jsx("span",{className:"ml-2",children:e.endpoint_type_detected_at?Sa(e.endpoint_type_detected_at):"-"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Last Seen:"}),t.jsx("span",{className:"ml-2",children:e.last_seen?at(e.last_seen):"-"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Error Count:"}),t.jsx("span",{className:"ml-2",children:e.error_count})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Type Reason:"}),t.jsx("span",{className:"ml-2",children:e.endpoint_type_reason??"-"})]})]}),e.last_error&&t.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-md p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[t.jsx(lr,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:"Last Error"})]}),t.jsx("p",{className:"text-sm text-destructive/80 mt-1",children:e.last_error})]}),t.jsx(Xe,{}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(Y,{className:"flex items-center gap-2",children:[t.jsx(Md,{className:"h-4 w-4"}),"Models (",v?.models?.length||0,")"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[e.endpoint_type==="xllm"&&t.jsxs(M,{variant:"outline",size:"sm",onClick:()=>x(!0),disabled:e.status!=="online",children:[t.jsx(dr,{className:"h-4 w-4 mr-1"}),"Download Model"]}),t.jsxs(M,{variant:"default",size:"sm",onClick:g,disabled:e.status!=="online"||!v?.models?.length,children:[t.jsx($t,{className:"h-4 w-4 mr-1"}),"Open Playground"]})]})]}),t.jsx(Ue,{className:"h-32 rounded-md border",children:t.jsx("div",{className:"p-3 space-y-2",children:f?t.jsxs("div",{className:"flex items-center justify-center py-4",children:[t.jsx(Ne,{className:"h-4 w-4 animate-spin text-muted-foreground"}),t.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading models..."})]}):v?.models?.length?v.models.map(C=>t.jsxs("div",{className:"flex items-center justify-between text-sm py-1.5 px-2 rounded hover:bg-muted/50",children:[t.jsx("span",{className:"font-mono text-xs truncate flex-1",title:C.model_id,children:C.model_id}),t.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[C.max_tokens&&t.jsxs("span",{className:"text-xs text-muted-foreground",children:[(C.max_tokens/1024).toFixed(0),"K ctx"]}),C.capabilities&&C.capabilities.length>0&&t.jsx("div",{className:"flex gap-1",children:C.capabilities.slice(0,2).map(A=>t.jsx(ce,{variant:"outline",className:"text-xs",children:A},A))})]})]},C.model_id)):t.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No models available"})})})]}),t.jsx(Xe,{}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{htmlFor:"name",children:"Display Name"}),t.jsx(me,{id:"name",value:a,onChange:C=>i(C.target.value),placeholder:"Endpoint name"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs(Y,{htmlFor:"healthCheckInterval",children:[t.jsx(Jt,{className:"h-4 w-4 inline mr-1"}),"Health Check Interval (sec)"]}),t.jsx(me,{id:"healthCheckInterval",type:"number",min:"5",max:"3600",value:d,onChange:C=>u(C.target.value)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(Y,{htmlFor:"inferenceTimeout",children:[t.jsx(Jt,{className:"h-4 w-4 inline mr-1"}),"Inference Timeout (sec)"]}),t.jsx(me,{id:"inferenceTimeout",type:"number",min:"10",max:"600",value:h,onChange:C=>m(C.target.value)})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{htmlFor:"notes",children:"Notes"}),t.jsx(rn,{id:"notes",value:l,onChange:C=>c(C.target.value),placeholder:"Notes about this endpoint...",rows:3})]})]})]}),t.jsxs(Oe,{children:[t.jsx(M,{variant:"outline",onClick:()=>n(!1),children:"Close"}),t.jsxs(M,{onClick:R,disabled:y.isPending,children:[t.jsx(Iu,{className:"h-4 w-4 mr-1"}),y.isPending?"Saving...":"Save"]})]})]}),t.jsx(Zp,{endpoint:e,open:p,onOpenChange:x})]}):null}const Wt=10;function ox(e){switch(e){case"online":return"default";case"pending":return"secondary";case"offline":return"outline";case"error":return"destructive";default:return"outline"}}function ix(e){switch(e){case"online":return"Online";case"pending":return"Pending";case"offline":return"Offline";case"error":return"Error";default:return e}}function cx(e){switch(e){case"xllm":return"xLLM";case"ollama":return"Ollama";case"vllm":return"vLLM";case"openai_compatible":return"OpenAI";case"unknown":return"Unknown";default:return e}}function lx(e){const s=[`Type source: ${e.endpoint_type_source}`];return e.endpoint_type_reason&&s.push(`Reason: ${e.endpoint_type_reason}`),e.endpoint_type_detected_at&&s.push(`Detected: ${Sa(e.endpoint_type_detected_at)}`),s.join(" | ")}function dx(e){switch(e){case"xllm":return"default";case"ollama":return"secondary";case"vllm":return"secondary";case"openai_compatible":return"outline";case"unknown":return"outline";default:return"outline"}}function ux({endpoints:e,isLoading:s}){const n=ct(),[r,a]=o.useState(""),[i,l]=o.useState("all"),[c,d]=o.useState("all"),[u,h]=o.useState("status"),[m,p]=o.useState("desc"),[x,v]=o.useState(1),[f,g]=o.useState(null),[y,j]=o.useState(null),[N,R]=o.useState(!1),[C,A]=o.useState(null),[w,T]=o.useState(null),[S,F]=o.useState(!1),[U,K]=o.useState(!1),[E,q]=o.useState(null),[L,z]=o.useState({name:"",base_url:"",api_key:"",notes:""}),ae=async()=>{if(!(!L.name||!L.base_url)){K(!0),q(null);try{await Pe.create({name:L.name,base_url:L.base_url,api_key:L.api_key||void 0,notes:L.notes||void 0}),await n.invalidateQueries({queryKey:["dashboard-endpoints"]}),F(!1),z({name:"",base_url:"",api_key:"",notes:""})}catch(b){console.error("Failed to create endpoint:",b),q(b instanceof Error?b.message:"Failed to create endpoint")}finally{K(!1)}}},he=async()=>{if(y){R(!0);try{await Pe.delete(y.id),await n.invalidateQueries({queryKey:["dashboard-endpoints"]})}catch(b){console.error("Failed to delete endpoint:",b)}finally{R(!1),j(null)}}},D=async b=>{A(b.id);try{await Pe.test(b.id),await n.invalidateQueries({queryKey:["dashboard-endpoints"]})}catch(B){console.error("Failed to test endpoint:",B)}finally{A(null)}},be=async b=>{T(b.id);try{await Pe.sync(b.id),await n.invalidateQueries({queryKey:["dashboard-endpoints"]})}catch(B){console.error("Failed to sync endpoint:",B)}finally{T(null)}},se=o.useMemo(()=>e.filter(b=>{const B=b.name.toLowerCase().includes(r.toLowerCase())||b.base_url.toLowerCase().includes(r.toLowerCase()),ne=i==="all"||b.status===i,W=c==="all"||b.endpoint_type===c;return B&&ne&&W}),[e,r,i,c]),xe=o.useMemo(()=>[...se].sort((b,B)=>{let ne=0;switch(u){case"name":ne=b.name.localeCompare(B.name);break;case"status":{const W={online:0,pending:1,offline:2,error:3};ne=W[b.status]-W[B.status];break}case"latency_ms":ne=(b.latency_ms??1/0)-(B.latency_ms??1/0);break;case"model_count":ne=b.model_count-B.model_count;break;case"registered_at":ne=new Date(b.registered_at).getTime()-new Date(B.registered_at).getTime();break}return m==="asc"?ne:-ne}),[se,u,m]),de=o.useMemo(()=>{const b=(x-1)*Wt;return xe.slice(b,b+Wt)},[xe,x]),fe=Math.ceil(xe.length/Wt),je=b=>{u===b?p(m==="asc"?"desc":"asc"):(h(b),p("desc"))},ue=({field:b})=>u!==b?null:m==="asc"?t.jsx(Ua,{className:"ml-1 h-4 w-4 inline"}):t.jsx(ir,{className:"ml-1 h-4 w-4 inline"});return s&&e.length===0?t.jsxs(yt,{children:[t.jsx(Ft,{children:t.jsxs(Lt,{className:"flex items-center gap-2",children:[t.jsx(es,{className:"h-5 w-5"}),"Endpoints"]})}),t.jsx(bt,{children:t.jsx("div",{className:"flex items-center justify-center h-32",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):t.jsxs(t.Fragment,{children:[t.jsxs(yt,{children:[t.jsx(Ft,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(Lt,{className:"flex items-center gap-2",children:[t.jsx(es,{className:"h-5 w-5"}),"Endpoints",t.jsx(ce,{variant:"secondary",className:"ml-2",children:se.length})]}),t.jsxs(M,{onClick:()=>F(!0),children:[t.jsx(Ks,{className:"h-4 w-4 mr-2"}),"Add Endpoint"]})]})}),t.jsxs(bt,{children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Du,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),t.jsx(me,{placeholder:"Search by name or URL...",value:r,onChange:b=>{a(b.target.value),v(1)},className:"pl-10"})]}),t.jsxs(ot,{value:i,onValueChange:b=>{l(b),v(1)},children:[t.jsx(tt,{className:"w-[140px]",children:t.jsx(it,{placeholder:"Status"})}),t.jsxs(st,{children:[t.jsx(Q,{value:"all",children:"All Status"}),t.jsx(Q,{value:"online",children:"Online"}),t.jsx(Q,{value:"pending",children:"Pending"}),t.jsx(Q,{value:"offline",children:"Offline"}),t.jsx(Q,{value:"error",children:"Error"})]})]}),t.jsxs(ot,{value:c,onValueChange:b=>{d(b),v(1)},children:[t.jsx(tt,{className:"w-[140px]",children:t.jsx(it,{placeholder:"Type"})}),t.jsxs(st,{children:[t.jsx(Q,{value:"all",children:"All Types"}),t.jsx(Q,{value:"xllm",children:"xLLM"}),t.jsx(Q,{value:"ollama",children:"Ollama"}),t.jsx(Q,{value:"vllm",children:"vLLM"}),t.jsx(Q,{value:"openai_compatible",children:"OpenAI"}),t.jsx(Q,{value:"unknown",children:"Unknown"})]})]})]}),t.jsx("div",{className:"rounded-md border",children:t.jsxs(zt,{children:[t.jsx(Bt,{children:t.jsxs(De,{children:[t.jsxs(te,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>je("name"),children:["Name",t.jsx(ue,{field:"name"})]}),t.jsx(te,{children:"URL"}),t.jsx(te,{children:"Type"}),t.jsxs(te,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>je("status"),children:["Status",t.jsx(ue,{field:"status"})]}),t.jsxs(te,{className:"cursor-pointer hover:bg-muted/50 text-right",onClick:()=>je("latency_ms"),children:["Latency",t.jsx(ue,{field:"latency_ms"})]}),t.jsxs(te,{className:"cursor-pointer hover:bg-muted/50 text-right",onClick:()=>je("model_count"),children:["Models",t.jsx(ue,{field:"model_count"})]}),t.jsx(te,{children:"Last Seen"}),t.jsx(te,{className:"text-right",children:"Actions"})]})}),t.jsx(Ht,{children:de.length===0?t.jsx(De,{children:t.jsx(X,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:r||i!=="all"?"No endpoints match the filter criteria":"No endpoints registered"})}):de.map(b=>t.jsxs(De,{children:[t.jsx(X,{className:"font-medium",children:t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("span",{children:b.name})})}),t.jsx(X,{children:t.jsx("span",{className:"text-muted-foreground font-mono text-sm",children:b.base_url})}),t.jsx(X,{children:t.jsx(ce,{variant:dx(b.endpoint_type),title:lx(b),children:cx(b.endpoint_type)})}),t.jsxs(X,{children:[t.jsx(ce,{variant:ox(b.status),children:ix(b.status)}),b.last_error&&t.jsxs("span",{className:"ml-2 text-xs text-destructive",children:["(",b.error_count," errors)"]})]}),t.jsx(X,{className:"text-right",children:b.latency_ms!=null?`${b.latency_ms}ms`:"-"}),t.jsx(X,{className:"text-right",children:b.model_count}),t.jsx(X,{children:b.last_seen?at(b.last_seen):"-"}),t.jsx(X,{className:"text-right",children:t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[t.jsx(M,{variant:"ghost",size:"icon",onClick:()=>g(b),title:"Details",children:t.jsx(gu,{className:"h-4 w-4"})}),t.jsx(M,{variant:"ghost",size:"icon",onClick:()=>D(b),disabled:C===b.id,title:"Test Connection",children:t.jsx(ur,{className:I("h-4 w-4",C===b.id&&"animate-pulse")})}),t.jsx(M,{variant:"ghost",size:"icon",onClick:()=>be(b),disabled:w===b.id||b.status!=="online",title:"Sync Models",children:t.jsx(et,{className:I("h-4 w-4",w===b.id&&"animate-spin")})}),t.jsx(M,{variant:"ghost",size:"icon",onClick:()=>j(b),title:"Delete",children:t.jsx(Kt,{className:"h-4 w-4 text-destructive"})})]})})]},b.id))})]})}),fe>1&&t.jsxs("div",{className:"flex items-center justify-between mt-4",children:[t.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(x-1)*Wt+1," -"," ",Math.min(x*Wt,xe.length)," of ",xe.length]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(M,{variant:"outline",size:"sm",onClick:()=>v(b=>Math.max(1,b-1)),disabled:x===1,children:t.jsx($a,{className:"h-4 w-4"})}),t.jsxs("span",{className:"text-sm",children:[x," / ",fe]}),t.jsx(M,{variant:"outline",size:"sm",onClick:()=>v(b=>Math.min(fe,b+1)),disabled:x===fe,children:t.jsx(cr,{className:"h-4 w-4"})})]})]})]})]}),f&&t.jsx(ax,{endpoint:f,open:!!f,onOpenChange:b=>!b&&g(null)}),t.jsx(en,{open:!!y,onOpenChange:b=>!b&&j(null),children:t.jsxs(is,{children:[t.jsxs(cs,{children:[t.jsx(ds,{children:"Delete Endpoint?"}),t.jsxs(us,{children:['This will delete "',y?.name,'". This action cannot be undone. Models associated with this endpoint will no longer be available.']})]}),t.jsxs(ls,{children:[t.jsx(ms,{disabled:N,children:"Cancel"}),t.jsx(hs,{onClick:he,disabled:N,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:N?"Deleting...":"Delete"})]})]})}),t.jsx(Re,{open:S,onOpenChange:b=>{b||(q(null),z({name:"",base_url:"",api_key:"",notes:""})),F(b)},children:t.jsxs(Ce,{className:"sm:max-w-[500px]",children:[t.jsxs(Se,{children:[t.jsx(_e,{children:"Add New Endpoint"}),t.jsx(ke,{children:"Register a new inference service endpoint (Ollama, vLLM, etc.)"})]}),t.jsxs("div",{className:"grid gap-4 py-4",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(Y,{htmlFor:"endpoint-name",children:"Name *"}),t.jsx(me,{id:"endpoint-name",placeholder:"e.g., Production Ollama",value:L.name,onChange:b=>z({...L,name:b.target.value})})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(Y,{htmlFor:"endpoint-url",children:"Base URL *"}),t.jsx(me,{id:"endpoint-url",placeholder:"e.g., http://localhost:11434",value:L.base_url,onChange:b=>z({...L,base_url:b.target.value})}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"The base URL of the OpenAI-compatible API endpoint"})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(Y,{htmlFor:"endpoint-api-key",children:"API Key (optional)"}),t.jsx(me,{id:"endpoint-api-key",type:"password",placeholder:"sk-...",value:L.api_key,onChange:b=>z({...L,api_key:b.target.value})})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(Y,{htmlFor:"endpoint-notes",children:"Notes (optional)"}),t.jsx(me,{id:"endpoint-notes",placeholder:"Description or notes about this endpoint",value:L.notes,onChange:b=>z({...L,notes:b.target.value})})]}),E&&t.jsx("p",{className:"text-sm text-destructive",children:E})]}),t.jsxs(Oe,{children:[t.jsx(M,{variant:"outline",onClick:()=>F(!1),disabled:U,children:"Cancel"}),t.jsx(M,{onClick:ae,disabled:U||!L.name||!L.base_url,children:U?"Creating...":"Create Endpoint"})]})]})})]})}var an="Tabs",[hx]=nt(an,[Bs]),Xc=Bs(),[mx,Fr]=hx(an),Zc=o.forwardRef((e,s)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:l="horizontal",dir:c,activationMode:d="automatic",...u}=e,h=ns(c),[m,p]=ft({prop:r,onChange:a,defaultProp:i??"",caller:an});return t.jsx(mx,{scope:n,baseId:Ye(),value:m,onValueChange:p,orientation:l,dir:h,activationMode:d,children:t.jsx(V.div,{dir:h,"data-orientation":l,...u,ref:s})})});Zc.displayName=an;var Jc="TabsList",el=o.forwardRef((e,s)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=Fr(Jc,n),l=Xc(n);return t.jsx(Za,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:r,children:t.jsx(V.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:s})})});el.displayName=Jc;var tl="TabsTrigger",sl=o.forwardRef((e,s)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,l=Fr(tl,n),c=Xc(n),d=al(l.baseId,r),u=ol(l.baseId,r),h=r===l.value;return t.jsx(Ja,{asChild:!0,...c,focusable:!a,active:h,children:t.jsx(V.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...i,ref:s,onMouseDown:P(e.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?l.onValueChange(r):m.preventDefault()}),onKeyDown:P(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&l.onValueChange(r)}),onFocus:P(e.onFocus,()=>{const m=l.activationMode!=="manual";!h&&!a&&m&&l.onValueChange(r)})})})});sl.displayName=tl;var nl="TabsContent",rl=o.forwardRef((e,s)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...l}=e,c=Fr(nl,n),d=al(c.baseId,r),u=ol(c.baseId,r),h=r===c.value,m=o.useRef(h);return o.useEffect(()=>{const p=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(p)},[]),t.jsx(Fe,{present:a||h,children:({present:p})=>t.jsx(V.div,{"data-state":h?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!p,id:u,tabIndex:0,...l,ref:s,style:{...e.style,animationDuration:m.current?"0s":void 0},children:p&&i})})});rl.displayName=nl;function al(e,s){return`${e}-trigger-${s}`}function ol(e,s){return`${e}-content-${s}`}var fx=Zc,il=el,cl=sl,ll=rl;const Lr=fx,on=o.forwardRef(({className:e,...s},n)=>t.jsx(il,{ref:n,className:I("inline-flex h-10 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...s}));on.displayName=il.displayName;const Ge=o.forwardRef(({className:e,...s},n)=>t.jsx(cl,{ref:n,className:I("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));Ge.displayName=cl.displayName;const Qe=o.forwardRef(({className:e,...s},n)=>t.jsx(ll,{ref:n,className:I("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));Qe.displayName=ll.displayName;const px=[25,50,100];function xx({history:e,isLoading:s}){const[n,r]=o.useState(25),[a,i]=o.useState(1),[l,c]=o.useState(null),[d,u]=o.useState(null),h=Math.ceil(e.length/n),m=e.slice((a-1)*n,a*n),p=async(x,v)=>{try{await navigator.clipboard.writeText(x),u(v),setTimeout(()=>u(null),2e3),$({title:"Copied to clipboard"})}catch{$({title:"Failed to copy",variant:"destructive"})}};return s?t.jsxs(yt,{children:[t.jsx(Ft,{children:t.jsxs(Lt,{className:"flex items-center gap-2",children:[t.jsx(Gt,{className:"h-5 w-5"}),"Request History"]})}),t.jsx(bt,{children:t.jsx("div",{className:"space-y-4",children:[...Array(5)].map((x,v)=>t.jsx("div",{className:"h-12 shimmer rounded"},v))})})]}):t.jsxs(t.Fragment,{children:[t.jsxs(yt,{children:[t.jsx(Ft,{className:"pb-4",children:t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs(Lt,{className:"flex items-center gap-2",children:[t.jsx(Gt,{className:"h-5 w-5"}),"Request History",t.jsx(ce,{variant:"secondary",className:"ml-2",children:e.length})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-muted-foreground",children:"Show"}),t.jsxs(ot,{value:n.toString(),onValueChange:x=>{r(Number(x)),i(1)},children:[t.jsx(tt,{id:"history-per-page",className:"w-20",children:t.jsx(it,{})}),t.jsx(st,{children:px.map(x=>t.jsx(Q,{value:x.toString(),children:x},x))})]}),t.jsx("span",{className:"text-sm text-muted-foreground",children:"entries"})]})]})}),t.jsxs(bt,{className:"px-0",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs(zt,{children:[t.jsx(Bt,{children:t.jsxs(De,{children:[t.jsx(te,{children:"Time"}),t.jsx(te,{children:"Model"}),t.jsx(te,{children:"Node"}),t.jsx(te,{children:"Status"}),t.jsx(te,{children:"Duration"}),t.jsx(te,{children:"Tokens"})]})}),t.jsx(Ht,{id:"request-history-tbody",children:m.length===0?t.jsx(De,{children:t.jsx(X,{colSpan:6,className:"h-32 text-center",children:t.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[t.jsx(Gt,{className:"h-8 w-8"}),t.jsx("p",{children:"No request history"})]})})}):m.map(x=>t.jsxs(De,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>c(x),children:[t.jsx(X,{className:"font-mono text-xs",children:at(x.timestamp)}),t.jsx(X,{children:t.jsx(ce,{variant:"secondary",children:x.model})}),t.jsx(X,{className:"text-sm",children:x.node_name||x.node_id?.slice(0,8)||""}),t.jsx(X,{children:t.jsxs(ce,{variant:x.status==="success"?"online":"destructive",className:"gap-1",children:[x.status==="success"?t.jsx(Rs,{className:"h-3 w-3"}):t.jsx(Zt,{className:"h-3 w-3"}),x.status]})}),t.jsx(X,{children:t.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[t.jsx(Jt,{className:"h-3 w-3 text-muted-foreground"}),Mn(x.duration_ms)]})}),t.jsx(X,{className:"text-sm",children:x.total_tokens?.toLocaleString()||""})]},x.request_id))})]})}),h>1&&t.jsxs("div",{className:"flex items-center justify-between border-t px-6 py-4",children:[t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",(a-1)*n+1," to"," ",Math.min(a*n,e.length)," of ",e.length]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(M,{id:"history-page-prev",variant:"outline",size:"sm",onClick:()=>i(x=>Math.max(1,x-1)),disabled:a===1,children:t.jsx($a,{className:"h-4 w-4"})}),t.jsxs("span",{id:"history-page-info",className:"text-sm",children:["Page ",a," of ",h]}),t.jsx(M,{id:"history-page-next",variant:"outline",size:"sm",onClick:()=>i(x=>Math.min(h,x+1)),disabled:a===h,children:t.jsx(cr,{className:"h-4 w-4"})})]})]})]})]}),t.jsx(Re,{open:!!l,onOpenChange:()=>c(null),children:t.jsxs(Ce,{id:"request-modal",className:"max-w-2xl max-h-[80vh] overflow-hidden",children:[t.jsxs(Se,{children:[t.jsxs(_e,{className:"flex items-center gap-2",children:[t.jsx(Gt,{className:"h-5 w-5"}),"Request Details"]}),t.jsxs(ke,{children:["Request ID: ",t.jsx("code",{className:"text-xs",children:l?.request_id})]})]}),l&&t.jsxs(Lr,{defaultValue:"overview",className:"mt-4",children:[t.jsxs(on,{className:"grid w-full grid-cols-3",children:[t.jsx(Ge,{value:"overview",children:"Overview"}),t.jsx(Ge,{value:"request",children:"Request"}),t.jsx(Ge,{value:"response",children:"Response"})]}),t.jsxs(Qe,{value:"overview",className:"space-y-4 mt-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Model"}),t.jsx(ce,{variant:"secondary",children:l.model})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),t.jsx(ce,{variant:l.status==="success"?"online":"destructive",children:l.status})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Node"}),t.jsx("p",{className:"text-sm",children:l.node_name||l.node_id||""})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Duration"}),t.jsx("p",{className:"text-sm",children:Mn(l.duration_ms)})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Timestamp"}),t.jsx("p",{className:"text-sm",children:new Date(l.timestamp).toLocaleString()})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Tokens"}),t.jsx("p",{className:"text-sm",children:l.total_tokens?.toLocaleString()||""})]})]}),l.error&&t.jsxs("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-4",children:[t.jsx("p",{className:"text-sm font-medium text-destructive",children:"Error"}),t.jsx("p",{className:"mt-1 text-sm",children:l.error})]})]}),t.jsx(Qe,{value:"request",className:"mt-4",children:t.jsxs("div",{className:"relative",children:[t.jsx(M,{variant:"ghost",size:"sm",className:"absolute right-2 top-2",onClick:()=>p(JSON.stringify(l.request_body,null,2),"request"),children:d==="request"?t.jsx(Je,{className:"h-4 w-4"}):t.jsx(Nt,{className:"h-4 w-4"})}),t.jsx(Ue,{className:"h-64 rounded-md border",children:t.jsx("pre",{className:"p-4 text-xs",children:JSON.stringify(l.request_body,null,2)||"No request body"})})]})}),t.jsx(Qe,{value:"response",className:"mt-4",children:t.jsxs("div",{className:"relative",children:[t.jsx(M,{variant:"ghost",size:"sm",className:"absolute right-2 top-2",onClick:()=>p(JSON.stringify(l.response_body,null,2),"response"),children:d==="response"?t.jsx(Je,{className:"h-4 w-4"}):t.jsx(Nt,{className:"h-4 w-4"})}),t.jsx(Ue,{className:"h-64 rounded-md border",children:t.jsx("pre",{className:"p-4 text-xs",children:JSON.stringify(l.response_body,null,2)||"No response body"})})]})})]})]})})]})}var cn="Switch",[gx]=nt(cn),[vx,yx]=gx(cn),dl=o.forwardRef((e,s)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:l,disabled:c,value:d="on",onCheckedChange:u,form:h,...m}=e,[p,x]=o.useState(null),v=Z(s,N=>x(N)),f=o.useRef(!1),g=p?h||!!p.closest("form"):!0,[y,j]=ft({prop:a,defaultProp:i??!1,onChange:u,caller:cn});return t.jsxs(vx,{scope:n,checked:y,disabled:c,children:[t.jsx(V.button,{type:"button",role:"switch","aria-checked":y,"aria-required":l,"data-state":fl(y),"data-disabled":c?"":void 0,disabled:c,value:d,...m,ref:v,onClick:P(e.onClick,N=>{j(R=>!R),g&&(f.current=N.isPropagationStopped(),f.current||N.stopPropagation())})}),g&&t.jsx(ml,{control:p,bubbles:!f.current,name:r,value:d,checked:y,required:l,disabled:c,form:h,style:{transform:"translateX(-100%)"}})]})});dl.displayName=cn;var ul="SwitchThumb",hl=o.forwardRef((e,s)=>{const{__scopeSwitch:n,...r}=e,a=yx(ul,n);return t.jsx(V.span,{"data-state":fl(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:s})});hl.displayName=ul;var bx="SwitchBubbleInput",ml=o.forwardRef(({__scopeSwitch:e,control:s,checked:n,bubbles:r=!0,...a},i)=>{const l=o.useRef(null),c=Z(l,i),d=jr(n),u=wa(s);return o.useEffect(()=>{const h=l.current;if(!h)return;const m=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(m,"checked").set;if(d!==n&&x){const v=new Event("click",{bubbles:r});x.call(h,n),h.dispatchEvent(v)}},[d,n,r]),t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:c,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ml.displayName=bx;function fl(e){return e?"checked":"unchecked"}var pl=dl,jx=hl;const ln=o.forwardRef(({className:e,...s},n)=>t.jsx(pl,{className:I("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:n,children:t.jsx(jx,{className:I("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));ln.displayName=pl.displayName;function wx(){const[e,s]=o.useState("all"),[n,r]=o.useState(!0),a=o.useRef(null),{data:i,refetch:l,isRefetching:c}=Ie({queryKey:["router-logs"],queryFn:()=>vt.getRouterLogs({limit:200}),refetchInterval:5e3}),u=i?.entries?.filter(v=>e==="all"?!0:v.level.toLowerCase()===e);o.useEffect(()=>{if(n&&a.current){const v=a.current.querySelector("[data-radix-scroll-area-viewport]");v&&(v.scrollTop=v.scrollHeight)}},[u,n]);const h=()=>{l()},m=()=>{$({title:"Log clearing is handled on the server side"})},p=()=>{if(!u||u.length===0){$({title:"No logs to download",variant:"destructive"});return}const v=u.map(j=>`[${j.timestamp}] [${j.level}] ${j.target?`[${j.target}] `:""}${j.message||""}`).join(`
`),f=new Blob([v],{type:"text/plain"}),g=URL.createObjectURL(f),y=document.createElement("a");y.href=g,y.download=`logs-llmlb-${new Date().toISOString().slice(0,10)}.txt`,y.click(),URL.revokeObjectURL(g),$({title:"Logs downloaded"})},x=v=>{const f=v.toLowerCase();return f==="error"?"text-destructive":f==="warn"||f==="warning"?"text-warning":f==="info"?"text-primary":f==="debug"?"text-muted-foreground":"text-foreground"};return t.jsxs(yt,{children:[t.jsx(Ft,{className:"pb-4",children:t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs(Lt,{className:"flex items-center gap-2",children:[t.jsx(Ka,{className:"h-5 w-5"}),"Log Viewer",u&&t.jsx(ce,{variant:"secondary",className:"ml-2",children:u.length})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border rounded-md bg-muted/30",children:[t.jsx(es,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm font-medium",children:"LLM Load Balancer"})]}),t.jsxs(ot,{value:e,onValueChange:v=>s(v),children:[t.jsx(tt,{className:"w-28",children:t.jsx(it,{})}),t.jsxs(st,{children:[t.jsx(Q,{value:"all",children:"All"}),t.jsx(Q,{value:"error",children:"Error"}),t.jsx(Q,{value:"warn",children:"Warn"}),t.jsx(Q,{value:"info",children:"Info"}),t.jsx(Q,{value:"debug",children:"Debug"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ln,{id:"auto-scroll",checked:n,onCheckedChange:r}),t.jsx(Y,{htmlFor:"auto-scroll",className:"text-sm",children:"Auto-scroll"})]})]})]})}),t.jsxs(bt,{children:[t.jsxs("div",{className:"mb-4 flex gap-2",children:[t.jsxs(M,{id:"logs-router-refresh",variant:"outline",size:"sm",onClick:h,disabled:c,children:[t.jsx(et,{className:I("mr-2 h-4 w-4",c&&"animate-spin")}),"Refresh"]}),t.jsxs(M,{variant:"outline",size:"sm",onClick:p,children:[t.jsx(dr,{className:"mr-2 h-4 w-4"}),"Download"]}),t.jsxs(M,{variant:"outline",size:"sm",onClick:m,children:[t.jsx(Kt,{className:"mr-2 h-4 w-4"}),"Clear"]})]}),t.jsx(Ue,{className:"h-96 rounded-md border bg-muted/30",ref:a,children:t.jsx("div",{id:"logs-router-list",className:"p-4 font-mono text-xs space-y-0.5",children:!u||u.length===0?t.jsx("div",{className:"flex h-32 items-center justify-center text-muted-foreground",children:"No logs available"}):u.map((v,f)=>t.jsxs("div",{className:"flex gap-2 py-0.5 hover:bg-muted/50 rounded px-1 -mx-1",children:[t.jsx("span",{className:"text-muted-foreground shrink-0",children:new Date(v.timestamp).toLocaleTimeString()}),t.jsx("span",{className:I("uppercase w-12 shrink-0 font-semibold",x(v.level)),children:v.level}),v.target&&t.jsxs("span",{className:"text-muted-foreground shrink-0",children:["[",v.target,"]"]}),t.jsx("span",{className:"break-all",children:v.message||""})]},f))})})]})]})}function Nx(){const{data:e,isLoading:s}=Ie({queryKey:["token-stats-daily"],queryFn:()=>vt.getDailyTokenStats(7)}),{data:n,isLoading:r}=Ie({queryKey:["token-stats-monthly"],queryFn:()=>vt.getMonthlyTokenStats(6)});return t.jsxs(yt,{children:[t.jsx(Ft,{children:t.jsxs(Lt,{className:"flex items-center gap-2",children:[t.jsx($t,{className:"h-5 w-5"}),"Token Statistics"]})}),t.jsx(bt,{children:t.jsxs(Lr,{defaultValue:"daily",className:"space-y-4",children:[t.jsxs(on,{children:[t.jsxs(Ge,{value:"daily",className:"gap-2",children:[t.jsx(Qu,{className:"h-4 w-4"}),"Daily"]}),t.jsxs(Ge,{value:"monthly",className:"gap-2",children:[t.jsx(Pd,{className:"h-4 w-4"}),"Monthly"]})]}),t.jsx(Qe,{value:"daily",children:s?t.jsx("div",{className:"space-y-2",children:[...Array(5)].map((a,i)=>t.jsx("div",{className:"h-10 shimmer rounded"},i))}):e&&e.length>0?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"grid grid-cols-5 gap-2 text-sm font-medium text-muted-foreground border-b pb-2",children:[t.jsx("div",{children:"Date"}),t.jsx("div",{className:"text-right",children:"Requests"}),t.jsx("div",{className:"text-right",children:"Input"}),t.jsx("div",{className:"text-right",children:"Output"}),t.jsx("div",{className:"text-right",children:"Total"})]}),e.map(a=>t.jsxs("div",{className:"grid grid-cols-5 gap-2 text-sm py-2 border-b border-border/50",children:[t.jsx("div",{className:"font-medium",children:a.date}),t.jsx("div",{className:"text-right",children:we(a.request_count)}),t.jsx("div",{className:"text-right text-muted-foreground",children:we(a.total_input_tokens)}),t.jsx("div",{className:"text-right text-muted-foreground",children:we(a.total_output_tokens)}),t.jsx("div",{className:"text-right font-medium",children:we(a.total_tokens)})]},a.date))]}):t.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No daily statistics available"})}),t.jsx(Qe,{value:"monthly",children:r?t.jsx("div",{className:"space-y-2",children:[...Array(3)].map((a,i)=>t.jsx("div",{className:"h-10 shimmer rounded"},i))}):n&&n.length>0?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"grid grid-cols-5 gap-2 text-sm font-medium text-muted-foreground border-b pb-2",children:[t.jsx("div",{children:"Month"}),t.jsx("div",{className:"text-right",children:"Requests"}),t.jsx("div",{className:"text-right",children:"Input"}),t.jsx("div",{className:"text-right",children:"Output"}),t.jsx("div",{className:"text-right",children:"Total"})]}),n.map(a=>t.jsxs("div",{className:"grid grid-cols-5 gap-2 text-sm py-2 border-b border-border/50",children:[t.jsx("div",{className:"font-medium",children:a.month}),t.jsx("div",{className:"text-right",children:we(a.request_count)}),t.jsx("div",{className:"text-right text-muted-foreground",children:we(a.total_input_tokens)}),t.jsx("div",{className:"text-right text-muted-foreground",children:we(a.total_output_tokens)}),t.jsx("div",{className:"text-right font-medium",children:we(a.total_tokens)})]},a.month))]}):t.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No monthly statistics available"})})]})})]})}function Cx(){const{user:e}=or(),{isConnected:s}=th(),[n,r]=o.useState(null),[a,i]=o.useState(null),l=o.useRef(null),[c,d]=o.useState(!1),u=s?1e4:5e3,h=o.useCallback(async()=>{l.current=performance.now();const w=await vt.getOverview(),T=performance.now();return i(Math.round(T-(l.current||T))),r(new Date),w},[]),{data:m,isLoading:p,error:x,refetch:v}=Ie({queryKey:["dashboard-overview"],queryFn:h,refetchInterval:u}),{data:f,refetch:g}=Ie({queryKey:["system-info"],queryFn:()=>qr.getSystem(),refetchInterval:u}),{data:y,isLoading:j}=Ie({queryKey:["request-responses"],queryFn:()=>vt.getRequestResponses({limit:100}),refetchInterval:u}),{data:N,isLoading:R}=Ie({queryKey:["dashboard-endpoints"],queryFn:()=>vt.getEndpoints(),refetchInterval:u}),C=o.useMemo(()=>y?.records?y.records.map(w=>({request_id:w.id,timestamp:w.timestamp,model:w.model,node_id:w.node_id,node_name:w.node_machine_name,status:w.status.type,duration_ms:w.duration_ms,error:w.status.type==="error"?w.status.message:void 0,request_body:w.request_body,response_body:w.response_body})):[],[y]),A=o.useMemo(()=>{const w=f?.update;if(!w||w.state==="up_to_date")return null;const T=e?.role==="admin",S=T&&(w.state==="available"||w.state==="failed"),F=w.state==="draining"||w.state==="applying";let U="Update",K="",E=null,q=null;w.state==="available"?(U=`Update available: v${w.latest}`,K=`Current: v${w.current}`,E=w.release_url,w.payload?.payload==="downloading"?q="Downloading...":w.payload?.payload==="ready"?q="Ready":w.payload?.payload==="error"?q="Download failed":q="Preparing..."):w.state==="draining"?(U=`Updating to v${w.latest}`,K=`Waiting for in-flight requests: ${w.in_flight}`):w.state==="applying"?(U=`Applying update: v${w.latest}`,K="Restarting..."):w.state==="failed"&&(U="Update failed",K=w.message,E=w.release_url||null);const L=async()=>{d(!0);try{await qr.applyUpdate(),$({title:"Update queued",description:"llmlb will restart after in-flight requests complete."}),await g()}catch(z){$({title:"Failed to apply update",description:z instanceof Error?z.message:String(z),variant:"destructive"})}finally{d(!1)}};return t.jsx("section",{className:"mb-6",children:t.jsx("div",{className:"rounded-2xl border border-border/60 bg-card/60 backdrop-blur-xl px-5 py-4 shadow-sm",children:t.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"mt-0.5 flex h-9 w-9 items-center justify-center rounded-xl bg-primary/10",children:F?t.jsx(Ne,{className:"h-5 w-5 animate-spin text-primary"}):t.jsx(Jr,{className:"h-5 w-5 text-primary"})}),t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx("p",{className:"font-medium leading-6",children:U}),q&&t.jsx("span",{className:"rounded-full bg-muted px-2 py-0.5 text-xs text-muted-foreground",children:q})]}),K&&t.jsx("p",{className:"mt-0.5 text-sm text-muted-foreground",children:K})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[E&&t.jsxs("a",{href:E,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 rounded-lg border border-border/60 bg-background/60 px-3 py-2 text-sm hover:bg-background",children:[t.jsx(eu,{className:"h-4 w-4"}),"Release"]}),t.jsxs("button",{onClick:L,disabled:!S||c||F,className:"inline-flex items-center gap-2 rounded-lg bg-primary px-3 py-2 text-sm font-medium text-primary-foreground disabled:opacity-50",title:T?F?"Update is in progress":void 0:"Admin role is required",children:[c?t.jsx(Ne,{className:"h-4 w-4 animate-spin"}):t.jsx(Jr,{className:"h-4 w-4"}),"Restart to update"]})]})]})})})},[f?.update,e?.role,c,g]);return x?t.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-background",children:t.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[t.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-destructive/10",children:t.jsx(lr,{className:"h-8 w-8 text-destructive"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Failed to load dashboard"}),t.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:x instanceof Error?x.message:"An error occurred"})]}),t.jsx("button",{onClick:()=>v(),className:"text-sm text-primary hover:underline",children:"Try again"})]})}):t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx("div",{className:"fixed inset-0 bg-grid opacity-20 pointer-events-none"}),t.jsx(Vp,{user:e,isConnected:!x,lastRefreshed:n,fetchTimeMs:a}),t.jsxs("main",{className:"relative mx-auto max-w-[1600px] px-4 py-6 sm:px-6 lg:px-8",children:[A,t.jsx("section",{className:"mb-8",children:t.jsx(Gp,{stats:m?.stats,endpoints:N,isLoading:p})}),t.jsxs(Lr,{defaultValue:"endpoints",className:"space-y-6",children:[t.jsxs(on,{className:"grid w-full grid-cols-4 lg:w-auto lg:inline-grid",children:[t.jsxs(Ge,{value:"endpoints",className:"gap-2",children:[t.jsx(lu,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Endpoints"})]}),t.jsxs(Ge,{value:"statistics",className:"gap-2",children:[t.jsx(Ad,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Statistics"})]}),t.jsxs(Ge,{value:"history",className:"gap-2",children:[t.jsx(Gt,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"History"})]}),t.jsxs(Ge,{value:"logs",className:"gap-2",children:[t.jsx(Ka,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Logs"})]})]}),t.jsx(Qe,{value:"endpoints",className:"animate-fade-in",children:t.jsx(ux,{endpoints:N||[],isLoading:R})}),t.jsx(Qe,{value:"statistics",className:"animate-fade-in",children:t.jsx(Nx,{})}),t.jsx(Qe,{value:"history",className:"animate-fade-in",children:t.jsx(xx,{history:C,isLoading:j})}),t.jsx(Qe,{value:"logs",className:"animate-fade-in",children:t.jsx(wx,{})})]})]})]})}function Sx({endpointId:e,onBack:s}){const[n,r]=o.useState([]),[a,i]=o.useState(""),[l,c]=o.useState(!1),[d,u]=o.useState(!1),[h,m]=o.useState(!1),[p,x]=o.useState(!1),[v,f]=o.useState(""),[g,y]=o.useState(""),[j,N]=o.useState(!0),[R,C]=o.useState(.7),[A,w]=o.useState(16384),T=o.useRef(null),S=o.useRef(null),F=o.useRef(null),U=o.useRef(null),K=o.useRef(null),[E,q]=o.useState([]),{data:L,isLoading:z}=Ie({queryKey:["endpoint",e],queryFn:()=>Pe.get(e)}),{data:ae,isLoading:he,error:D}=Ie({queryKey:["endpoint-models",e],queryFn:()=>Pe.getModels(e),retry:!1});o.useEffect(()=>{if(D){let k="Failed to fetch model list";D instanceof Tn&&(k=D.message),$({title:"Error",description:k,variant:"destructive"})}},[D]),o.useEffect(()=>{ae?.models&&!v&&ae.models.length>0&&f(ae.models[0].model_id)},[ae,v]),o.useEffect(()=>{T.current?.scrollIntoView({behavior:"smooth"})},[n]);const be=()=>{r([]),q([]),$({title:"Chat cleared"})},se=async(k,H)=>{if(k){if(k.size>4*1024*1024){$({title:"File too large",description:"Maximum size is 4MB",variant:"destructive"});return}try{const G=new FileReader;G.onload=ie=>{const J=ie.target?.result,le={type:H,name:k.name,data:J,mimeType:k.type};q(re=>[...re,le]),$({title:`${H==="image"?"Image":"Audio"} attached`})},G.readAsDataURL(k)}catch{$({title:"Failed to read file",variant:"destructive"})}}},xe=k=>{q(H=>H.filter((G,ie)=>ie!==k))},de=k=>{const H=/(data:image\/[^;]+;base64,[^\s"'<>]+|https?:\/\/[^\s"'<>]+\.(png|jpg|jpeg|gif|webp))/gi,G=/(data:audio\/[^;]+;base64,[^\s"'<>]+|https?:\/\/[^\s"'<>]+\.(mp3|wav|ogg|m4a))/gi,ie=k.match(H)||[],J=k.match(G)||[];return{imageMatches:ie,audioMatches:J}},fe=async()=>{if(!a.trim()&&E.length===0||!v||l)return;const k={role:"user",content:a.trim(),attachments:E.length>0?E:void 0},H=[...n,k];r(H),i(""),q([]),c(!0),S.current=new AbortController;try{const G=J=>{if(!J.attachments||J.attachments.length===0)return{role:J.role,content:J.content};const le=[];return J.content.trim()&&le.push({type:"text",text:J.content}),J.attachments.forEach(re=>{if(re.type==="image")le.push({type:"image_url",image_url:{url:re.data}});else if(re.type==="audio"){const Ke=re.data.startsWith("data:")?re.data.split(",")[1]:re.data;le.push({type:"input_audio",input_audio:{data:Ke,format:"wav"}})}}),{role:J.role,content:le}},ie=g?[{role:"system",content:g},...H.map(G)]:H.map(G);if(j){let J="";r(le=>[...le,{role:"assistant",content:""}]),await Pe.chatCompletions(e,{model:v,messages:ie,stream:!0,temperature:R,max_tokens:A},le=>{J+=le,r(re=>{const Ke=[...re];return Ke[Ke.length-1]={role:"assistant",content:J},Ke})})}else{const le={role:"assistant",content:(await Pe.chatCompletions(e,{model:v,messages:ie,stream:!1,temperature:R,max_tokens:A}))?.choices?.[0]?.message?.content||""};r(re=>[...re,le])}}catch(G){G.name!=="AbortError"&&($({title:"Failed to send message",description:G instanceof Error?G.message:"Unknown error",variant:"destructive"}),r(n))}finally{c(!1),S.current=null,F.current?.focus()}},je=()=>{S.current?.abort(),c(!1)},ue=()=>{const k=g?[{role:"system",content:g},...n]:n;return W?`curl -X POST '${ne}/v1/chat/completions' \\
  -H 'Content-Type: application/json' \\
  -d '${JSON.stringify({model:v,messages:k,stream:j,temperature:R,max_tokens:A},null,2)}'`:"# Error: endpoint base_url is not configured. Please set it in the dashboard."},b=async k=>{try{await navigator.clipboard.writeText(k),x(!0),setTimeout(()=>x(!1),2e3),$({title:"Copied to clipboard"})}catch{$({title:"Failed to copy",variant:"destructive"})}},B=ae?.models||[],ne=L?.base_url?.replace(/\/$/,"")||"",W=ne.length>0;return z?t.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-background",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx(Ne,{className:"h-8 w-8 animate-spin text-primary"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading endpoint..."})]})}):t.jsxs("div",{className:"flex h-screen bg-background",children:[t.jsxs("div",{className:"w-64 border-r flex flex-col",children:[t.jsx("div",{className:"p-4 border-b",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary/10",children:t.jsx(er,{className:"h-4 w-4 text-primary"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"font-semibold text-sm truncate",title:L?.name,children:L?.name||"Endpoint"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Playground"})]})]})}),t.jsxs("div",{className:"p-3 space-y-2",children:[t.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.jsx("span",{className:"font-medium",children:"URL:"})," ",t.jsx("span",{className:"truncate block",title:L?.base_url,children:W?L?.base_url:""})]}),!W&&t.jsx("div",{className:"text-xs text-destructive",children:"base_url "}),t.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.jsx("span",{className:"font-medium",children:"Status:"})," ",t.jsx(ce,{variant:L?.status==="online"?"default":"secondary",className:"text-xs",children:L?.status})]}),t.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.jsx("span",{className:"font-medium",children:"Models:"})," ",B.length]})]}),t.jsx(Xe,{}),t.jsxs("div",{className:"p-3 space-y-2",children:[t.jsxs(M,{variant:"outline",className:"w-full justify-start",onClick:s,children:[t.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]}),t.jsxs(M,{variant:"ghost",className:"w-full justify-start",onClick:()=>u(!0),children:[t.jsx(Ha,{className:"mr-2 h-4 w-4"}),"Settings"]})]}),t.jsx("div",{className:"flex-1"}),t.jsx("div",{className:"p-3 border-t",children:t.jsxs(M,{variant:"outline",size:"sm",className:"w-full",onClick:be,children:[t.jsx(Kt,{className:"mr-2 h-4 w-4"}),"Clear Chat"]})})]}),t.jsxs("div",{className:"flex-1 flex flex-col",children:[t.jsxs("div",{className:"h-14 border-b flex items-center justify-between px-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs(ot,{value:v,onValueChange:f,children:[t.jsx(tt,{className:"w-64",children:t.jsx(it,{placeholder:"Select a model"})}),t.jsx(st,{children:he?t.jsx(Q,{value:"__loading__",disabled:!0,children:"Loading models..."}):B.length===0?t.jsx(Q,{value:"__no_models__",disabled:!0,children:"No models available"}):B.map(k=>t.jsx(Q,{value:k.model_id,children:k.model_id},k.model_id))})]}),t.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[t.jsx(Hd,{className:I("h-3 w-3",L?.status==="online"?"text-green-500":"text-yellow-500")}),L?.status==="online"?"Online":L?.status]}),j&&t.jsx(ce,{variant:"secondary",className:"text-xs",children:"Streaming"})]}),t.jsxs(M,{variant:"outline",size:"sm",onClick:()=>m(!0),children:[t.jsx(qa,{className:"mr-2 h-4 w-4"}),"cURL"]})]}),t.jsx(Ue,{className:"flex-1 p-4",children:t.jsxs("div",{className:"max-w-3xl mx-auto space-y-4",children:[n.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[t.jsx($t,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),t.jsx("h2",{className:"text-lg font-medium",children:"Start a conversation"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Select a model and send a message to get started."})]}):n.map((k,H)=>t.jsxs("div",{className:I("flex gap-3",k.role==="user"?"justify-end":""),children:[k.role==="assistant"&&t.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary/10",children:t.jsx(La,{className:"h-4 w-4 text-primary"})}),t.jsxs("div",{className:I("rounded-lg px-4 py-3 max-w-[80%] space-y-2",k.role==="user"?"bg-primary text-primary-foreground":"bg-muted"),children:[k.content&&t.jsx("p",{className:"text-sm whitespace-pre-wrap",children:k.content}),k.attachments&&k.attachments.length>0&&t.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:k.attachments.map((G,ie)=>t.jsxs("div",{className:"rounded-md overflow-hidden bg-black/20 p-1",children:[G.type==="image"&&t.jsx("img",{src:G.data,alt:G.name,className:"w-full h-32 object-cover rounded-sm"}),G.type==="audio"&&t.jsxs("div",{className:"flex flex-col items-center justify-center h-32 gap-2",children:[t.jsx(Is,{className:"h-6 w-6"}),t.jsx("audio",{src:G.data,controls:!0,className:"w-full max-w-[120px]"})]})]},ie))}),k.role==="assistant"&&(()=>{const{imageMatches:G,audioMatches:ie}=de(k.content);return t.jsxs(t.Fragment,{children:[G.length>0&&t.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:G.map((J,le)=>t.jsx("div",{className:"rounded-md overflow-hidden bg-black/20 p-1",children:t.jsx("img",{src:J,alt:`assistant-image-${le}`,className:"w-full h-32 object-cover rounded-sm"})},le))}),ie.length>0&&t.jsx("div",{className:"space-y-2 mt-2",children:ie.map((J,le)=>t.jsxs("div",{className:"rounded-md overflow-hidden bg-black/20 p-2 flex flex-col items-center justify-center gap-2",children:[t.jsx(Is,{className:"h-4 w-4"}),t.jsx("audio",{src:J,controls:!0,className:"w-full max-w-[200px]"})]},le))})]})})()]}),k.role==="user"&&t.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-muted",children:t.jsx(qs,{className:"h-4 w-4"})})]},H)),t.jsx("div",{ref:T})]})}),t.jsx("div",{className:"border-t p-4 bg-gradient-to-b from-background via-background to-muted/5",children:t.jsxs("div",{className:"max-w-3xl mx-auto space-y-3",children:[E.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2 p-3 rounded-lg bg-muted/40 border border-muted-foreground/10",children:E.map((k,H)=>t.jsxs("div",{className:"relative group inline-block rounded-md overflow-hidden bg-background border border-border",children:[k.type==="image"&&t.jsxs(t.Fragment,{children:[t.jsx("img",{src:k.data,alt:k.name,className:"h-16 w-16 object-cover"}),t.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:t.jsx("button",{onClick:()=>xe(H),className:"text-white bg-destructive rounded-full p-1 hover:bg-destructive/80",children:t.jsx(ks,{className:"h-3 w-3"})})})]}),k.type==="audio"&&t.jsxs("div",{className:"h-16 w-16 flex flex-col items-center justify-center bg-muted gap-1",children:[t.jsx($n,{className:"h-5 w-5 text-muted-foreground"}),t.jsx("button",{onClick:()=>xe(H),className:"absolute -top-2 -right-2 text-white bg-destructive rounded-full p-0.5 hover:bg-destructive/80",children:t.jsx(ks,{className:"h-3 w-3"})})]})]},H))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{ref:U,type:"file",accept:"image/*",className:"hidden",onChange:k=>k.target.files?.[0]&&se(k.target.files[0],"image")}),t.jsx("input",{ref:K,type:"file",accept:"audio/*",className:"hidden",onChange:k=>k.target.files?.[0]&&se(k.target.files[0],"audio")}),t.jsx(M,{variant:"outline",size:"icon",onClick:()=>U.current?.click(),title:"Attach image",className:"shrink-0",children:t.jsx(za,{className:"h-4 w-4"})}),t.jsx(M,{variant:"outline",size:"icon",onClick:()=>K.current?.click(),title:"Attach audio",className:"shrink-0",children:t.jsx($n,{className:"h-4 w-4"})}),t.jsx(me,{ref:F,placeholder:"Type a message or attach files...",value:a,onChange:k=>i(k.target.value),onKeyDown:k=>{k.key==="Enter"&&!k.shiftKey&&!k.nativeEvent.isComposing&&(k.preventDefault(),fe())},onPaste:k=>{const H=k.clipboardData?.files;if(H)for(const G of Array.from(H)){const ie=G.type.startsWith("audio/")?"audio":G.type.startsWith("image/")?"image":null;ie&&se(G,ie)}},disabled:l,className:"flex-1"}),l?t.jsxs(M,{variant:"destructive",onClick:je,className:"shrink-0",children:[t.jsx(et,{className:"mr-2 h-4 w-4 animate-spin"}),"Stop"]}):t.jsxs(M,{onClick:fe,disabled:!a.trim()&&E.length===0||!v,className:"shrink-0",children:[t.jsx(Ba,{className:"mr-2 h-4 w-4"}),"Send"]})]})]})})]}),t.jsx(Re,{open:d,onOpenChange:u,children:t.jsxs(Ce,{children:[t.jsxs(Se,{children:[t.jsx(_e,{children:"Settings"}),t.jsx(ke,{children:"Configure your chat preferences."})]}),t.jsxs("div",{className:"space-y-4 py-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{children:"System Prompt"}),t.jsx(rn,{placeholder:"You are a helpful assistant...",value:g,onChange:k=>y(k.target.value),rows:3})]}),t.jsx(Xe,{}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx(Y,{children:"Streaming"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Stream responses as they're generated"})]}),t.jsx(ln,{checked:j,onCheckedChange:N})]}),t.jsx(Xe,{}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(Y,{children:["Temperature: ",R]}),t.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:R,onChange:k=>C(parseFloat(k.target.value)),className:"w-full"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{children:"Max Tokens"}),t.jsx(me,{type:"number",value:A,onChange:k=>w(parseInt(k.target.value)||2048),min:1,max:32e3})]})]}),t.jsx(Oe,{children:t.jsx(M,{onClick:()=>u(!1),children:"Done"})})]})}),t.jsx(Re,{open:h,onOpenChange:m,children:t.jsxs(Ce,{className:"max-w-2xl",children:[t.jsxs(Se,{children:[t.jsx(_e,{children:"cURL Command"}),t.jsx(ke,{children:"Copy this command to replicate the API call."})]}),t.jsxs("div",{className:"relative",children:[t.jsx(M,{variant:"ghost",size:"sm",className:"absolute right-2 top-2",onClick:()=>b(ue()),disabled:!W,children:p?t.jsx(Je,{className:"h-4 w-4"}):t.jsx(Nt,{className:"h-4 w-4"})}),t.jsx(Ue,{className:"h-64 rounded-md border bg-muted",children:t.jsx("pre",{className:"p-4 text-xs font-mono",children:ue()})})]}),t.jsx(Oe,{children:t.jsx(M,{variant:"outline",onClick:()=>m(!1),children:"Close"})})]})})]})}const Rn="lb_playground_api_key",_x=4*1024*1024,It={totalRequests:200,concurrency:10,intervalMs:0};function fa(e){switch(e){case 401:return"Invalid API key. Please check your settings.";case 403:return"Access denied to this resource.";case 404:return"API endpoint not found.";case 429:return"Rate limited. Please reduce request volume.";case 503:return"No available endpoints. Please check endpoint status.";case 504:return"Request timed out.";default:return`Server error occurred (HTTP ${e})`}}function pa(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`${Date.now()}-${Math.random().toString(16).slice(2)}`}function kx(e){return new Promise(s=>setTimeout(s,e))}function En(e,s){const n=Number.parseInt(e,10);return Number.isFinite(n)?n:s}function Rx(e){if(!e||typeof e!="object")return null;const s=e;return typeof s.user=="string"?s.user:null}function Ex(e){const s=new Map;return e.forEach(n=>{const r=n.node_machine_name||n.node_id||"unknown",a=s.get(r)??{count:0,success:0,error:0,totalDuration:0};a.count+=1,a.totalDuration+=n.duration_ms??0,n.status.type==="success"?a.success+=1:a.error+=1,s.set(r,a)}),Array.from(s.entries()).map(([n,r])=>({endpoint:n,count:r.count,success:r.success,error:r.error,averageDurationMs:r.count>0?Math.round(r.totalDuration/r.count):0})).sort((n,r)=>r.count-n.count)}function Ns(e){if(!e.attachments||e.attachments.length===0)return{role:e.role,content:e.content};const s=[];return e.content.trim()&&s.push({type:"text",text:e.content}),e.attachments.forEach(n=>{if(n.type==="image"){s.push({type:"image_url",image_url:{url:n.data}});return}const r=n.data.startsWith("data:")?n.data.split(",")[1]:n.data;s.push({type:"input_audio",input_audio:{data:r,format:"wav"}})}),{role:e.role,content:s}}function Mx({onBack:e}){const[s,n]=o.useState([]),[r,a]=o.useState(""),[i,l]=o.useState(!1),[c,d]=o.useState(!1),[u,h]=o.useState(!1),[m,p]=o.useState(!1),[x,v]=o.useState("chat"),[f,g]=o.useState(()=>{try{return localStorage.getItem(Rn)??""}catch{return""}}),[y,j]=o.useState(""),[N,R]=o.useState(""),[C,A]=o.useState(!0),[w,T]=o.useState(.7),[S,F]=o.useState(16384),[U,K]=o.useState(String(It.totalRequests)),[E,q]=o.useState(String(It.concurrency)),[L,z]=o.useState(String(It.intervalMs)),[ae,he]=o.useState(!1),[D,be]=o.useState(!1),[se,xe]=o.useState(null),[de,fe]=o.useState(null),[je,ue]=o.useState(null),[b,B]=o.useState(!1),ne=o.useRef(null),W=o.useRef(null),k=o.useRef(!1),H=o.useRef(null),G=o.useRef(null),ie=o.useRef(null),[J,le]=o.useState([]),re=f.trim().length>0,{data:Ke,isLoading:dn,error:Et,refetch:xl}=Ie({queryKey:["lb-playground-models",f.trim()],queryFn:()=>gs.getModels(f.trim()),enabled:re,retry:!1,staleTime:5e3});o.useEffect(()=>{try{localStorage.setItem(Rn,f)}catch{}},[f]),o.useEffect(()=>{if(!Et)return;let _="Failed to fetch model list";Et instanceof Tn?_=fa(Et.status):Et instanceof Error&&(_=Et.message),$({title:"Error",description:_,variant:"destructive"})},[Et]),o.useEffect(()=>{const _=Ke?.data;Array.isArray(_)&&!y&&_.length>0&&j(_[0].id)},[Ke,y]),o.useEffect(()=>{ne.current?.scrollIntoView({behavior:"smooth"})},[s]);const gl=o.useCallback(()=>{g(""),j("");try{localStorage.removeItem(Rn)}catch{}$({title:"API key removed"})},[]),vl=()=>{n([]),le([]),fe(null),ue(null),$({title:"Chat cleared"})},yl=_=>{const oe=/(data:image\/[^;]+;base64,[^\s"'<>]+|https?:\/\/[^\s"'<>]+\.(png|jpg|jpeg|gif|webp))/gi,ee=/(data:audio\/[^;]+;base64,[^\s"'<>]+|https?:\/\/[^\s"'<>]+\.(mp3|wav|ogg|m4a))/gi,ge=_.match(oe)||[],pe=_.match(ee)||[];return{imageMatches:ge,audioMatches:pe}},un=async(_,oe)=>{if(_){if(_.size>_x){$({title:"File too large",description:"Maximum size is 4MB",variant:"destructive"});return}try{const ee=new FileReader;ee.onload=ge=>{const pe=ge.target?.result,ve={type:oe,name:_.name,data:pe,mimeType:_.type};le(Ee=>[...Ee,ve]),$({title:`${oe==="image"?"Image":"Audio"} attached`})},ee.readAsDataURL(_)}catch{$({title:"Failed to read file",variant:"destructive"})}}},bl=_=>{le(oe=>oe.filter((ee,ge)=>ge!==_))},hn=o.useCallback(async(_,oe)=>{B(!0),ue(null);try{const ee=[];for(let ve=0;ve<30;ve+=1){const Ee=await vt.getRequestResponses({limit:100,offset:ve*100});if(Ee.records.length===0)break;for(const Ve of Ee.records)Rx(Ve.request_body)?.startsWith(`lbpg:${_}:`)&&ee.push(Ve);if(ee.length>=oe||(ve+1)*100>=Ee.total_count)break}fe({runId:_,expectedCount:oe,matchedCount:ee.length,rows:Ex(ee),updatedAt:new Date().toISOString()})}catch(ee){ue(ee instanceof Error?ee.message:"Failed to load distribution")}finally{B(!1)}},[]),$r=async()=>{if(!re){$({title:"API key required",description:"Enter an API key to send requests through the load balancer.",variant:"destructive"});return}if(!r.trim()&&J.length===0||!y||i)return;const _=pa(),oe=`lbpg:${_}:1`,ee={role:"user",content:r.trim(),attachments:J.length>0?J:void 0},ge=[...s,ee];n(ge),a(""),le([]),l(!0),W.current=new AbortController;try{const pe=N?[{role:"system",content:N}].concat(ge.map(Ns)):ge.map(Ns);if(C){let ve="";n(Ee=>[...Ee,{role:"assistant",content:""}]),await gs.complete({model:y,messages:pe,stream:!0,temperature:w,max_tokens:S,user:oe},f.trim(),Ee=>{ve+=Ee,n(Ve=>{const dt=[...Ve];return dt[dt.length-1]={role:"assistant",content:ve},dt})},W.current.signal)}else{const Ee={role:"assistant",content:(await gs.complete({model:y,messages:pe,stream:!1,temperature:w,max_tokens:S,user:oe},f.trim(),void 0,W.current.signal))?.choices?.[0]?.message?.content||""};n(Ve=>[...Ve,Ee])}await hn(_,1)}catch(pe){if(pe.name!=="AbortError"){const ve=pe instanceof Tn?fa(pe.status):pe instanceof Error?pe.message:"Unknown error";$({title:"Failed to send message",description:ve,variant:"destructive"}),n(s)}}finally{l(!1),W.current=null,H.current?.focus()}},jl=async()=>{if(!re){$({title:"API key required",description:"Enter an API key before running load tests.",variant:"destructive"});return}if(!y||ae)return;const _=Math.max(1,En(U,It.totalRequests)),oe=Math.max(1,En(E,It.concurrency)),ee=Math.max(0,En(L,It.intervalMs)),ge=r.trim()||"Load balancing validation request",pe=pa();he(!0),be(!1),xe({total:_,completed:0,success:0,error:0}),fe(null),ue(null),k.current=!1;let ve=0,Ee=0,Ve=0,dt=0;const kl=async()=>{for(;;){if(k.current)return;const fs=ve;if(fs>=_)return;ve+=1;const ps=`lbpg:${pe}:${fs+1}`,fn=N?[{role:"system",content:N},{role:"user",content:ge}]:[{role:"user",content:ge}];try{await gs.complete({model:y,messages:fn,stream:!1,temperature:w,max_tokens:S,user:ps},f.trim()),Ve+=1}catch{dt+=1}finally{Ee+=1,xe({total:_,completed:Ee,success:Ve,error:dt})}ee>0&&await kx(ee)}};try{const fs=Array.from({length:oe},()=>kl());await Promise.all(fs);const ps=Ee;await hn(pe,ps),n(fn=>[...fn,{role:"assistant",content:`Load test finished. requests=${ps}, success=${Ve}, error=${dt}`}])}finally{he(!1),be(!1),k.current=!1}},wl=()=>{W.current?.abort(),l(!1)},Nl=()=>{ae&&(k.current=!0,be(!0))},Ur=()=>{const _=N?[{role:"system",content:N}].concat(s.map(Ns)):s.map(Ns);return re?`curl -X POST '/v1/chat/completions' \\
  -H 'Content-Type: application/json' \\
  -H 'Authorization: Bearer ${f.trim()}' \\
  -d '${JSON.stringify({model:y,messages:_,stream:C,temperature:w,max_tokens:S},null,2)}'`:"# Error: API key is required. Set API key and retry."},Cl=async _=>{try{await navigator.clipboard.writeText(_),p(!0),setTimeout(()=>p(!1),2e3),$({title:"Copied to clipboard"})}catch{$({title:"Failed to copy",variant:"destructive"})}},mn=o.useMemo(()=>Array.isArray(Ke?.data)?Ke.data:[],[Ke]),Sl=re&&(r.trim().length>0||J.length>0)&&!!y,_l=se&&se.total>0?Math.round(se.completed/se.total*100):0;return t.jsxs("div",{className:"flex h-screen bg-background",children:[t.jsxs("div",{className:"w-72 border-r flex flex-col",id:"lb-playground-sidebar",children:[t.jsx("div",{className:"p-4 border-b",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary/10",children:t.jsx(Ps,{className:"h-4 w-4 text-primary"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"font-semibold text-sm",children:"Load Balancer"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Playground"})]})]})}),t.jsxs("div",{className:"p-3 space-y-2",children:[t.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[t.jsx(yu,{className:"h-3 w-3"}),t.jsx("span",{className:"font-medium",children:"API Key:"}),t.jsx(ce,{variant:re?"default":"secondary",children:re?"Configured":"Missing"})]}),t.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.jsx("span",{className:"font-medium",children:"Models:"})," ",mn.length]}),t.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.jsx("span",{className:"font-medium",children:"Mode:"})," ",x==="chat"?"Interactive chat":"Load test"]})]}),t.jsx(Xe,{}),t.jsxs("div",{className:"p-3 space-y-2",children:[t.jsxs(M,{variant:"outline",className:"w-full justify-start",onClick:e,children:[t.jsx(Fa,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]}),t.jsxs(M,{variant:"ghost",className:"w-full justify-start",onClick:()=>d(!0),children:[t.jsx(Ha,{className:"mr-2 h-4 w-4"}),"Settings"]}),t.jsxs(M,{variant:"outline",className:"w-full justify-start",onClick:()=>xl(),disabled:!re||dn,children:[t.jsx(et,{className:I("mr-2 h-4 w-4",dn&&"animate-spin")}),"Refresh Models"]})]}),t.jsxs("div",{className:"px-3 pb-3",children:[t.jsx(Y,{htmlFor:"lb-api-key",className:"text-xs",children:"API Key (stored in localStorage)"}),t.jsxs("div",{className:"mt-2 flex gap-2",children:[t.jsx(me,{id:"lb-api-key",type:"password",placeholder:"sk-...",value:f,onChange:_=>g(_.target.value),className:"h-8",autoComplete:"off"}),t.jsx(M,{size:"sm",variant:"outline",onClick:gl,disabled:!re,children:"Clear"})]}),t.jsx("p",{className:"mt-2 text-[11px] leading-4 text-muted-foreground",children:"The API key is saved as plain text in your browser storage."})]}),t.jsx("div",{className:"flex-1"}),t.jsx("div",{className:"p-3 border-t",children:t.jsxs(M,{variant:"outline",size:"sm",className:"w-full",onClick:vl,children:[t.jsx(Kt,{className:"mr-2 h-4 w-4"}),"Clear Chat"]})})]}),t.jsxs("div",{className:"flex-1 flex flex-col",children:[t.jsxs("div",{className:"h-14 border-b flex items-center justify-between px-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"inline-flex rounded-md border border-border p-1",children:[t.jsxs(M,{size:"sm",variant:x==="chat"?"default":"ghost",onClick:()=>v("chat"),className:"h-7",id:"lb-mode-chat",children:[t.jsx($t,{className:"mr-1.5 h-3.5 w-3.5"}),"Chat"]}),t.jsxs(M,{size:"sm",variant:x==="load_test"?"default":"ghost",onClick:()=>v("load_test"),className:"h-7",id:"lb-mode-load-test",children:[t.jsx(iu,{className:"mr-1.5 h-3.5 w-3.5"}),"Load Test"]})]}),t.jsxs(ot,{value:y,onValueChange:j,children:[t.jsx(tt,{className:"w-80",id:"lb-model-select",children:t.jsx(it,{placeholder:re?"Select a model":"Set API key first"})}),t.jsx(st,{children:re?dn?t.jsx(Q,{value:"__loading__",disabled:!0,children:"Loading models..."}):mn.length===0?t.jsx(Q,{value:"__empty__",disabled:!0,children:"No models available"}):mn.map(_=>t.jsx(Q,{value:_.id,children:_.id},_.id)):t.jsx(Q,{value:"__missing_key__",disabled:!0,children:"API key required"})})]}),x==="chat"&&C&&t.jsx(ce,{variant:"secondary",className:"text-xs",children:"Streaming"})]}),t.jsxs(M,{variant:"outline",size:"sm",onClick:()=>h(!0),children:[t.jsx(qa,{className:"mr-2 h-4 w-4"}),"cURL"]})]}),(de||je||b)&&t.jsxs("div",{className:"border-b bg-muted/20 px-4 py-3",id:"lb-distribution-panel",children:[t.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[t.jsx(Ps,{className:"h-4 w-4 text-primary"}),"Request Distribution"]}),de&&t.jsxs(M,{variant:"outline",size:"sm",onClick:()=>hn(de.runId,de.expectedCount),disabled:b,children:[t.jsx(et,{className:I("mr-2 h-3.5 w-3.5",b&&"animate-spin")}),"Refresh"]})]}),je&&t.jsxs("div",{className:"flex items-center gap-2 text-sm text-destructive",children:[t.jsx(lr,{className:"h-4 w-4"}),je]}),de&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-xs text-muted-foreground",id:"lb-distribution-summary",children:["Run: ",de.runId.slice(0,8)," | Matched:"," ",de.matchedCount,"/",de.expectedCount," | Updated:"," ",new Date(de.updatedAt).toLocaleTimeString()]}),t.jsxs("div",{className:"rounded-md border bg-background",children:[t.jsxs("div",{className:"grid grid-cols-[1fr_80px_80px_80px_120px] border-b px-3 py-2 text-xs font-medium text-muted-foreground",children:[t.jsx("span",{children:"Endpoint"}),t.jsx("span",{className:"text-right",children:"Count"}),t.jsx("span",{className:"text-right",children:"Success"}),t.jsx("span",{className:"text-right",children:"Error"}),t.jsx("span",{className:"text-right",children:"Avg ms"})]}),de.rows.length===0?t.jsx("p",{className:"px-3 py-3 text-xs text-muted-foreground",children:"No records found for this run yet."}):de.rows.map(_=>t.jsxs("div",{className:"grid grid-cols-[1fr_80px_80px_80px_120px] px-3 py-2 text-xs","data-testid":"lb-distribution-row",children:[t.jsx("span",{className:"truncate",title:_.endpoint,children:_.endpoint}),t.jsx("span",{className:"text-right",children:_.count}),t.jsx("span",{className:"text-right text-green-600",children:_.success}),t.jsx("span",{className:"text-right text-destructive",children:_.error}),t.jsx("span",{className:"text-right",children:_.averageDurationMs})]},_.endpoint))]})]})]}),t.jsx(Ue,{className:"flex-1 p-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto space-y-4",children:[s.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[t.jsx($t,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),t.jsx("h2",{className:"text-lg font-medium",children:"Start a load balancer conversation"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configure an API key, choose a model, and send requests through /v1/chat/completions."})]}):s.map((_,oe)=>t.jsxs("div",{className:I("flex gap-3",_.role==="user"?"justify-end":""),children:[_.role==="assistant"&&t.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary/10",children:t.jsx(La,{className:"h-4 w-4 text-primary"})}),t.jsxs("div",{className:I("rounded-lg px-4 py-3 max-w-[80%] space-y-2",_.role==="user"?"bg-primary text-primary-foreground":"bg-muted"),children:[_.content&&t.jsx("p",{className:"text-sm whitespace-pre-wrap",children:_.content}),_.attachments&&_.attachments.length>0&&t.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:_.attachments.map((ee,ge)=>t.jsxs("div",{className:"rounded-md overflow-hidden bg-black/20 p-1",children:[ee.type==="image"&&t.jsx("img",{src:ee.data,alt:ee.name,className:"w-full h-32 object-cover rounded-sm"}),ee.type==="audio"&&t.jsxs("div",{className:"flex flex-col items-center justify-center h-32 gap-2",children:[t.jsx(Is,{className:"h-6 w-6"}),t.jsx("audio",{src:ee.data,controls:!0,className:"w-full max-w-[120px]"})]})]},ge))}),_.role==="assistant"&&(()=>{const{imageMatches:ee,audioMatches:ge}=yl(_.content);return t.jsxs(t.Fragment,{children:[ee.length>0&&t.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:ee.map((pe,ve)=>t.jsx("div",{className:"rounded-md overflow-hidden bg-black/20 p-1",children:t.jsx("img",{src:pe,alt:`assistant-image-${ve}`,className:"w-full h-32 object-cover rounded-sm"})},`${pe}-${ve}`))}),ge.length>0&&t.jsx("div",{className:"space-y-2 mt-2",children:ge.map((pe,ve)=>t.jsx("div",{className:"rounded-md bg-black/20 p-2",children:t.jsx("audio",{src:pe,controls:!0,className:"w-full"})},`${pe}-${ve}`))})]})})()]}),_.role==="user"&&t.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-muted",children:t.jsx(qs,{className:"h-4 w-4"})})]},oe)),t.jsx("div",{ref:ne})]})}),t.jsx("div",{className:"border-t p-4 bg-gradient-to-b from-background via-background to-muted/5",children:t.jsxs("div",{className:"max-w-4xl mx-auto space-y-3",children:[x==="load_test"&&t.jsxs("div",{className:"rounded-lg border bg-muted/20 p-3 space-y-3",id:"lb-load-test-settings",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-sm font-medium",children:"Load test settings"}),t.jsx(ce,{variant:"secondary",children:"Default: High"})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx(Y,{htmlFor:"lb-total-requests",className:"text-xs",children:"Requests"}),t.jsx(me,{id:"lb-total-requests",type:"number",min:1,value:U,onChange:_=>K(_.target.value),disabled:ae})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx(Y,{htmlFor:"lb-concurrency",className:"text-xs",children:"Concurrency"}),t.jsx(me,{id:"lb-concurrency",type:"number",min:1,value:E,onChange:_=>q(_.target.value),disabled:ae})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx(Y,{htmlFor:"lb-interval-ms",className:"text-xs",children:"Interval (ms)"}),t.jsx(me,{id:"lb-interval-ms",type:"number",min:0,value:L,onChange:_=>z(_.target.value),disabled:ae})]})]}),se&&t.jsxs("div",{className:"space-y-2",id:"lb-load-test-progress",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[t.jsxs("span",{children:[se.completed,"/",se.total," completed"]}),t.jsxs("span",{children:["success=",se.success,", error=",se.error]})]}),t.jsx("div",{className:"h-2 rounded-full bg-muted",children:t.jsx("div",{className:"h-2 rounded-full bg-primary transition-all",style:{width:`${_l}%`}})})]})]}),x==="chat"&&J.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2 p-3 rounded-lg bg-muted/40 border border-muted-foreground/10",children:J.map((_,oe)=>t.jsx("div",{className:"relative group inline-block rounded-md overflow-hidden bg-background border border-border",children:_.type==="image"?t.jsxs(t.Fragment,{children:[t.jsx("img",{src:_.data,alt:_.name,className:"h-16 w-16 object-cover"}),t.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:t.jsx("button",{onClick:()=>bl(oe),className:"text-white bg-destructive rounded-full p-1 hover:bg-destructive/80",children:t.jsx(ks,{className:"h-3 w-3"})})})]}):t.jsx("div",{className:"h-16 w-16 flex items-center justify-center bg-muted",children:t.jsx(Is,{className:"h-4 w-4"})})},`${_.name}-${oe}`))}),t.jsxs("div",{className:"flex gap-2",children:[x==="chat"&&t.jsxs(t.Fragment,{children:[t.jsx("input",{ref:G,type:"file",accept:"image/*",className:"hidden",onChange:_=>{const oe=_.target.files?.[0];oe&&un(oe,"image"),_.currentTarget.value=""}}),t.jsx("input",{ref:ie,type:"file",accept:"audio/*",className:"hidden",onChange:_=>{const oe=_.target.files?.[0];oe&&un(oe,"audio"),_.currentTarget.value=""}}),t.jsx(M,{variant:"outline",size:"icon",onClick:()=>G.current?.click(),title:"Attach image",className:"shrink-0",children:t.jsx(za,{className:"h-4 w-4"})}),t.jsx(M,{variant:"outline",size:"icon",onClick:()=>ie.current?.click(),title:"Attach audio",className:"shrink-0",children:t.jsx($n,{className:"h-4 w-4"})})]}),t.jsx(me,{ref:H,placeholder:x==="chat"?"Type a message or attach files...":"Prompt used for each load test request...",value:r,onChange:_=>a(_.target.value),onKeyDown:_=>{_.key==="Enter"&&!_.shiftKey&&!_.nativeEvent.isComposing&&(_.preventDefault(),x==="chat"&&$r())},onPaste:_=>{if(x!=="chat")return;const oe=_.clipboardData?.files;if(oe)for(const ee of Array.from(oe)){const ge=ee.type.startsWith("audio/")?"audio":ee.type.startsWith("image/")?"image":null;ge&&un(ee,ge)}},disabled:i||ae,id:"lb-chat-input"}),x==="chat"?i?t.jsxs(M,{variant:"destructive",onClick:wl,className:"shrink-0",id:"lb-stop-chat",children:[t.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Stop"]}):t.jsxs(M,{onClick:()=>void $r(),disabled:!Sl,className:"shrink-0",id:"lb-send-chat",children:[t.jsx(Ba,{className:"mr-2 h-4 w-4"}),"Send"]}):ae?t.jsxs(M,{variant:"destructive",onClick:Nl,className:"shrink-0",id:"lb-stop-load-test",children:[t.jsx(Bu,{className:"mr-2 h-4 w-4"}),D?"Stopping...":"Stop"]}):t.jsxs(M,{onClick:()=>void jl(),disabled:!re||!y,className:"shrink-0",id:"lb-start-load-test",children:[t.jsx(ur,{className:"mr-2 h-4 w-4"}),"Start Load Test"]})]})]})})]}),t.jsx(Re,{open:c,onOpenChange:d,children:t.jsxs(Ce,{children:[t.jsxs(Se,{children:[t.jsx(_e,{children:"Settings"}),t.jsx(ke,{children:"Configure chat behavior and generation parameters."})]}),t.jsxs("div",{className:"space-y-4 py-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{children:"System Prompt"}),t.jsx(rn,{placeholder:"You are a helpful assistant...",value:N,onChange:_=>R(_.target.value),rows:3})]}),t.jsx(Xe,{}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx(Y,{children:"Streaming"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Stream responses while tokens are generated"})]}),t.jsx(ln,{checked:C,onCheckedChange:A,disabled:x==="load_test"})]}),t.jsx(Xe,{}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(Y,{children:["Temperature: ",w]}),t.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:w,onChange:_=>T(Number.parseFloat(_.target.value)),className:"w-full"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Y,{children:"Max Tokens"}),t.jsx(me,{type:"number",value:S,onChange:_=>F(Number.parseInt(_.target.value,10)||2048),min:1,max:32768})]})]}),t.jsx(Oe,{children:t.jsx(M,{onClick:()=>d(!1),children:"Done"})})]})}),t.jsx(Re,{open:u,onOpenChange:h,children:t.jsxs(Ce,{className:"max-w-2xl",children:[t.jsxs(Se,{children:[t.jsx(_e,{children:"cURL Command"}),t.jsx(ke,{children:"Copy this command to replay the current request through the load balancer."})]}),t.jsxs("div",{className:"relative",children:[t.jsx(M,{variant:"ghost",size:"sm",className:"absolute right-2 top-2",onClick:()=>void Cl(Ur()),children:m?t.jsx(Je,{className:"h-4 w-4"}):t.jsx(Nt,{className:"h-4 w-4"})}),t.jsx(Ue,{className:"h-64 rounded-md border bg-muted",children:t.jsx("pre",{className:"p-4 text-xs font-mono whitespace-pre-wrap",children:Ur()})})]}),t.jsx(Oe,{children:t.jsx(M,{variant:"outline",onClick:()=>h(!1),children:"Close"})})]})})]})}function xa(){const e=window.location.hash.slice(1);if(e==="lb-playground")return{type:"lb-playground"};if(e.startsWith("playground/")){const s=e.slice(11);if(s)return{type:"playground",endpointId:s}}return{type:"dashboard"}}function Tx(){const{isLoading:e,isLoggedIn:s}=or(),[n,r]=o.useState(xa),a=o.useCallback(()=>{window.location.hash="",r({type:"dashboard"})},[]);if(o.useEffect(()=>{const i=()=>{r(xa())};return window.addEventListener("hashchange",i),()=>window.removeEventListener("hashchange",i)},[]),o.useEffect(()=>{!e&&!s&&(window.location.href="/dashboard/login.html")},[e,s]),e)return t.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-background",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"h-12 w-12 rounded-full border-4 border-primary/20"}),t.jsx("div",{className:"absolute inset-0 h-12 w-12 animate-spin rounded-full border-4 border-transparent border-t-primary"})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})});switch(n.type){case"lb-playground":return t.jsx(Mx,{onBack:a});case"playground":return t.jsx(Sx,{endpointId:n.endpointId,onBack:a});case"dashboard":default:return t.jsx(Cx,{})}}const Px=new id({defaultOptions:{queries:{staleTime:5e3,refetchInterval:5e3,retry:1}}});Dl.createRoot(document.getElementById("root")).render(t.jsx(o.StrictMode,{children:t.jsx(cd,{client:Px,children:t.jsx(bd,{children:t.jsxs(Ol,{children:[t.jsx(Tx,{}),t.jsx(Fl,{})]})})})}));
