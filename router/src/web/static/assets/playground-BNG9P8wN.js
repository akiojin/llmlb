import{c as v,r as t,j as e,C as Me,B as r,d as L,U as De,I as Z,L as C,t as b,D as Ee,G as Oe,E as Ie,T as Pe,F as qe}from"./index-CDOLyZ7z.js";import{u as Re,f as ee,o as ze,t as _,M as se,H as Le,I as _e,J as Fe,N as Ve,v as Ae,a3 as Be,F as Ue,G as He,x as Je,y as Ke,z as Qe,A as Ge,E as te,B as $e,p as We,i as ae,j as ne,k as re,l as le,m as ce,_ as Xe,Z as ie,a2 as Ye,w as oe,q as Ze,r as es,a4 as ss,a5 as ts}from"./switch-DUY2GTm9.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=v("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=v("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=v("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=v("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=v("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function is(){Re();const[F,de]=t.useState("dark"),[me,x]=t.useState([]),[i,T]=t.useState(null),[m,o]=t.useState([]),[p,V]=t.useState(""),[M,D]=t.useState(!1),[he,E]=t.useState(!1),[xe,O]=t.useState(!1),[ue,A]=t.useState(!1),[l,I]=t.useState(""),[g,pe]=t.useState(""),[w,ge]=t.useState(!0),[j,je]=t.useState(.7),[N,fe]=t.useState(2048),B=t.useRef(null),f=t.useRef(null),{data:u}=ee({queryKey:["registered-models"],queryFn:Ee.getRegistered}),{data:P}=ee({queryKey:["chat-sessions"],queryFn:Oe.getSessions});t.useEffect(()=>{P&&x(P)},[P]),t.useEffect(()=>{if(u&&!l){const s=u.filter(a=>a.state==="ready");s.length>0&&I(s[0].name)}},[u,l]),t.useEffect(()=>{var s;(s=B.current)==null||s.scrollIntoView({behavior:"smooth"})},[m]);const ye=()=>{const s=F==="dark"?"light":"dark";de(s),document.documentElement.classList.toggle("dark",s==="dark")},ve=t.useCallback(()=>{const s={id:crypto.randomUUID(),title:"New Chat",messages:[],model:l,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};x(a=>[s,...a]),T(s.id),o([])},[l]),we=s=>{T(s.id),o(s.messages||[]),s.model&&I(s.model)},Ne=s=>{x(a=>a.filter(S=>S.id!==s)),i===s&&(T(null),o([])),b({title:"Session deleted"})},U=async()=>{var S,K,Q,G,$,W,X;if(!p.trim()||!l||M)return;const s={role:"user",content:p.trim()},a=[...m,s];o(a),V(""),i&&x(d=>d.map(n=>n.id===i?{...n,messages:a,title:a.length===1?p.trim().slice(0,30):n.title,updated_at:new Date().toISOString()}:n)),D(!0),f.current=new AbortController;try{const d=g?[{role:"system",content:g},...a]:a;if(w){const n=await fetch("/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:l,messages:d,stream:!0,temperature:j,max_tokens:N}),signal:f.current.signal});if(!n.ok)throw new Error(`HTTP ${n.status}`);const q=(S=n.body)==null?void 0:S.getReader();if(!q)throw new Error("No response body");const k=new TextDecoder;let h="";for(o(c=>[...c,{role:"assistant",content:""}]);;){const{done:c,value:y}=await q.read();if(c)break;const Ce=k.decode(y,{stream:!0}).split(`
`).filter(R=>R.startsWith("data: "));for(const R of Ce){const Y=R.slice(6);if(Y!=="[DONE]")try{const be=((G=(Q=(K=JSON.parse(Y).choices)==null?void 0:K[0])==null?void 0:Q.delta)==null?void 0:G.content)||"";h+=be,o(Te=>{const z=[...Te];return z[z.length-1]={role:"assistant",content:h},z})}catch{}}}i&&x(c=>c.map(y=>y.id===i?{...y,messages:[...a,{role:"assistant",content:h}],updated_at:new Date().toISOString()}:y))}else{const n=await fetch("/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:l,messages:d,stream:!1,temperature:j,max_tokens:N}),signal:f.current.signal});if(!n.ok)throw new Error(`HTTP ${n.status}`);const k={role:"assistant",content:((X=(W=($=(await n.json()).choices)==null?void 0:$[0])==null?void 0:W.message)==null?void 0:X.content)||""};o(h=>[...h,k]),i&&x(h=>h.map(c=>c.id===i?{...c,messages:[...a,k],updated_at:new Date().toISOString()}:c))}}catch(d){d.name!=="AbortError"&&(b({title:"Failed to send message",description:d instanceof Error?d.message:"Unknown error",variant:"destructive"}),o(m))}finally{D(!1),f.current=null}},Se=()=>{var s;(s=f.current)==null||s.abort(),D(!1)},H=()=>{const s=g?[{role:"system",content:g},...m]:m;return`curl -X POST 'http://localhost:8080/v1/chat/completions' \\
  -H 'Content-Type: application/json' \\
  -d '${JSON.stringify({model:l,messages:s,stream:w,temperature:j,max_tokens:N},null,2)}'`},ke=async s=>{try{await navigator.clipboard.writeText(s),A(!0),setTimeout(()=>A(!1),2e3),b({title:"Copied to clipboard"})}catch{b({title:"Failed to copy",variant:"destructive"})}},J=(u==null?void 0:u.filter(s=>s.state==="ready"))||[];return e.jsxs("div",{className:"flex h-screen bg-background",children:[e.jsxs("div",{className:"w-64 border-r flex flex-col",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(Me,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-semibold text-sm",children:"LLM Router"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Playground"})]})]})}),e.jsx("div",{className:"p-3",children:e.jsxs(r,{className:"w-full",onClick:ve,children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),"New Chat"]})}),e.jsx(_,{className:"flex-1",children:e.jsx("div",{className:"p-2 space-y-1",children:me.map(s=>e.jsxs("div",{className:L("group flex items-center gap-2 rounded-lg px-3 py-2 cursor-pointer hover:bg-muted/50",i===s.id&&"bg-muted"),onClick:()=>we(s),children:[e.jsx(se,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),e.jsx("span",{className:"flex-1 truncate text-sm",children:s.title}),e.jsxs(Le,{children:[e.jsx(_e,{asChild:!0,children:e.jsx(r,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:a=>a.stopPropagation(),children:e.jsx(rs,{className:"h-3 w-3"})})}),e.jsx(Fe,{align:"end",children:e.jsxs(Ve,{onClick:a=>{a.stopPropagation(),Ne(s.id)},className:"text-destructive",children:[e.jsx(Ae,{className:"mr-2 h-4 w-4"}),"Delete"]})})]})]},s.id))})}),e.jsxs("div",{className:"p-3 border-t space-y-2",children:[e.jsxs(r,{variant:"outline",className:"w-full justify-start",onClick:()=>window.location.href="/dashboard/",children:[e.jsx(Be,{className:"mr-2 h-4 w-4"}),"Dashboard"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"ghost",size:"icon",onClick:ye,children:F==="dark"?e.jsx(Ue,{className:"h-4 w-4"}):e.jsx(He,{className:"h-4 w-4"})}),e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>E(!0),children:e.jsx(cs,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"h-14 border-b flex items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Je,{value:l,onValueChange:I,children:[e.jsx(Ke,{className:"w-64",children:e.jsx(Qe,{placeholder:"Select a model"})}),e.jsx(Ge,{children:J.length===0?e.jsx(te,{value:"",disabled:!0,children:"No models available"}):J.map(s=>e.jsx(te,{value:s.name,children:s.name},s.name))})]}),w&&e.jsx($e,{variant:"secondary",className:"text-xs",children:"Streaming"})]}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>O(!0),children:[e.jsx(ns,{className:"mr-2 h-4 w-4"}),"cURL"]})]}),e.jsx(_,{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-4",children:[m.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[e.jsx(se,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),e.jsx("h2",{className:"text-lg font-medium",children:"Start a conversation"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Select a model and send a message to get started."})]}):m.map((s,a)=>e.jsxs("div",{className:L("flex gap-3",s.role==="user"&&"justify-end"),children:[s.role==="assistant"&&e.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary/10",children:e.jsx(as,{className:"h-4 w-4 text-primary"})}),e.jsx("div",{className:L("rounded-lg px-4 py-2 max-w-[80%]",s.role==="user"?"bg-primary text-primary-foreground":"bg-muted"),children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.content})}),s.role==="user"&&e.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-muted",children:e.jsx(De,{className:"h-4 w-4"})})]},a)),e.jsx("div",{ref:B})]})}),e.jsx("div",{className:"border-t p-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto flex gap-2",children:[e.jsx(Z,{placeholder:"Type a message...",value:p,onChange:s=>V(s.target.value),onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),U())},disabled:M,className:"flex-1"}),M?e.jsxs(r,{variant:"destructive",onClick:Se,children:[e.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Stop"]}):e.jsxs(r,{onClick:U,disabled:!p.trim()||!l,children:[e.jsx(ls,{className:"mr-2 h-4 w-4"}),"Send"]})]})})]}),e.jsx(ae,{open:he,onOpenChange:E,children:e.jsxs(ne,{children:[e.jsxs(re,{children:[e.jsx(le,{children:"Settings"}),e.jsx(ce,{children:"Configure your chat preferences."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"System Prompt"}),e.jsx(Xe,{placeholder:"You are a helpful assistant...",value:g,onChange:s=>pe(s.target.value),rows:3})]}),e.jsx(ie,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(C,{children:"Streaming"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Stream responses as they're generated"})]}),e.jsx(Ye,{checked:w,onCheckedChange:ge})]}),e.jsx(ie,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{children:["Temperature: ",j]}),e.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:j,onChange:s=>je(parseFloat(s.target.value)),className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"Max Tokens"}),e.jsx(Z,{type:"number",value:N,onChange:s=>fe(parseInt(s.target.value)||2048),min:1,max:32e3})]})]}),e.jsx(oe,{children:e.jsx(r,{onClick:()=>E(!1),children:"Done"})})]})}),e.jsx(ae,{open:xe,onOpenChange:O,children:e.jsxs(ne,{className:"max-w-2xl",children:[e.jsxs(re,{children:[e.jsx(le,{children:"cURL Command"}),e.jsx(ce,{children:"Copy this command to replicate the API call."})]}),e.jsxs("div",{className:"relative",children:[e.jsx(r,{variant:"ghost",size:"sm",className:"absolute right-2 top-2",onClick:()=>ke(H()),children:ue?e.jsx(Ze,{className:"h-4 w-4"}):e.jsx(es,{className:"h-4 w-4"})}),e.jsx(_,{className:"h-64 rounded-md border bg-muted",children:e.jsx("pre",{className:"p-4 text-xs font-mono",children:H()})})]}),e.jsx(oe,{children:e.jsx(r,{variant:"outline",onClick:()=>O(!1),children:"Close"})})]})})]})}const os=new ss({defaultOptions:{queries:{staleTime:3e4,retry:1}}});Ie.createRoot(document.getElementById("root")).render(e.jsx(t.StrictMode,{children:e.jsx(ts,{client:os,children:e.jsxs(Pe,{children:[e.jsx(is,{}),e.jsx(qe,{})]})})}));
