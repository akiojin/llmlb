import{c as o,r as a,j as e,d as f,C as Fe,B as r,U as Be,I as V,L as j,t as b,E as Ke,H as Ve,F as Ue,T as $e,G as Je}from"./index-DBvjhwYz.js";import{u as Qe,f as oe,o as Ge,t as U,M as ce,H as We,I as Xe,J as Ye,N as Ze,v as es,F as ss,G as ts,x as as,y as rs,z as ns,A as ls,E as de,B as me,p as is,i as he,j as xe,k as ue,l as pe,m as ge,Z as C,_ as os,a3 as cs,w as fe,q as ds,r as ms,a4 as hs,a5 as xs}from"./switch-Dt3CUsWD.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=o("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=o("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=o("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=o("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=o("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=o("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=o("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=o("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=o("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=o("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function ks(){Qe();const[$,je]=a.useState("dark"),[ye,x]=a.useState([]),[n,P]=a.useState(null),[u,c]=a.useState([]),[v,J]=a.useState(""),[O,q]=a.useState(!1),[ve,M]=a.useState(!1),[we,R]=a.useState(!1),[Ne,Q]=a.useState(!1),[L,Se]=a.useState(!1),[_,z]=a.useState("all"),[l,A]=a.useState(""),[w,ke]=a.useState(""),[T,be]=a.useState(!0),[N,Ce]=a.useState(.7),[D,Me]=a.useState(2048),[m,Te]=a.useState(()=>{if(typeof window<"u"){const s=localStorage.getItem("llm-router-api-key");if(s)return s;if(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")return"sk_debug"}return""}),G=a.useRef(null),S=a.useRef(null),W=a.useRef(null),{data:I}=oe({queryKey:["registered-models"],queryFn:Ke.getRegistered}),{data:H}=oe({queryKey:["chat-sessions"],queryFn:Ve.getSessions});a.useEffect(()=>{H&&x(H)},[H]),a.useEffect(()=>{if(I&&!l){const t=I.filter(y=>y.lifecycle_status==="registered");t.length>0&&A(t[0].name)}},[I,l]),a.useEffect(()=>{var s;(s=G.current)==null||s.scrollIntoView({behavior:"smooth"})},[u]);const De=()=>{const s=$==="dark"?"light":"dark";je(s),document.documentElement.classList.toggle("dark",s==="dark")},Ie=s=>{Te(s),localStorage.setItem("llm-router-api-key",s)},Ee=a.useCallback(()=>{const s={id:crypto.randomUUID(),title:"New Chat",messages:[],model:l,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};x(t=>[s,...t]),P(s.id),c([])},[l]),Pe=s=>{P(s.id),c(s.messages||[]),s.model&&A(s.model)},Oe=s=>{x(t=>t.filter(y=>y.id!==s)),n===s&&(P(null),c([])),b({title:"Session deleted"})},qe=()=>{c([]),n&&x(s=>s.map(t=>t.id===n?{...t,messages:[],updated_at:new Date().toISOString()}:t)),b({title:"Chat cleared"})},Re=()=>{Se(s=>!s)},X=async()=>{var y,ee,se,te,ae,re,ne,le;if(!v.trim()||!l||O)return;const s={role:"user",content:v.trim()},t=[...u,s];c(t),J(""),n&&x(h=>h.map(i=>i.id===n?{...i,messages:t,title:t.length===1?v.trim().slice(0,30):i.title,updated_at:new Date().toISOString()}:i)),q(!0),S.current=new AbortController;try{const h=w?[{role:"system",content:w},...t]:t;if(T){const i={"Content-Type":"application/json"};m&&(i.Authorization=`Bearer ${m}`);const p=await fetch("/v1/chat/completions",{method:"POST",headers:i,body:JSON.stringify({model:l,messages:h,stream:!0,temperature:N,max_tokens:D}),signal:S.current.signal});if(!p.ok)throw new Error(`HTTP ${p.status}`);const F=(y=p.body)==null?void 0:y.getReader();if(!F)throw new Error("No response body");const E=new TextDecoder;let g="";for(c(d=>[...d,{role:"assistant",content:""}]);;){const{done:d,value:k}=await F.read();if(d)break;const ze=E.decode(k,{stream:!0}).split(`
`).filter(B=>B.startsWith("data: "));for(const B of ze){const ie=B.slice(6);if(ie!=="[DONE]")try{const Ae=((te=(se=(ee=JSON.parse(ie).choices)==null?void 0:ee[0])==null?void 0:se.delta)==null?void 0:te.content)||"";g+=Ae,c(He=>{const K=[...He];return K[K.length-1]={role:"assistant",content:g},K})}catch{}}}n&&x(d=>d.map(k=>k.id===n?{...k,messages:[...t,{role:"assistant",content:g}],updated_at:new Date().toISOString()}:k))}else{const i={"Content-Type":"application/json"};m&&(i.Authorization=`Bearer ${m}`);const p=await fetch("/v1/chat/completions",{method:"POST",headers:i,body:JSON.stringify({model:l,messages:h,stream:!1,temperature:N,max_tokens:D}),signal:S.current.signal});if(!p.ok)throw new Error(`HTTP ${p.status}`);const E={role:"assistant",content:((ne=(re=(ae=(await p.json()).choices)==null?void 0:ae[0])==null?void 0:re.message)==null?void 0:ne.content)||""};c(g=>[...g,E]),n&&x(g=>g.map(d=>d.id===n?{...d,messages:[...t,E],updated_at:new Date().toISOString()}:d))}}catch(h){h.name!=="AbortError"&&(b({title:"Failed to send message",description:h instanceof Error?h.message:"Unknown error",variant:"destructive"}),c(u))}finally{q(!1),S.current=null,(le=W.current)==null||le.focus()}},Le=()=>{var s;(s=S.current)==null||s.abort(),q(!1)},Y=()=>{const s=w?[{role:"system",content:w},...u]:u;return`curl -X POST 'http://localhost:8080/v1/chat/completions' \\
  -H 'Content-Type: application/json' \\${m?`
  -H 'Authorization: Bearer ${m}' \\`:""}
  -d '${JSON.stringify({model:l,messages:s,stream:T,temperature:N,max_tokens:D},null,2)}'`},_e=async s=>{try{await navigator.clipboard.writeText(s),Q(!0),setTimeout(()=>Q(!1),2e3),b({title:"Copied to clipboard"})}catch{b({title:"Failed to copy",variant:"destructive"})}},Z=(I||[]).filter(s=>s.lifecycle_status==="registered");return e.jsxs("div",{className:"flex h-screen bg-background",children:[e.jsxs("div",{id:"sidebar",className:f("border-r flex flex-col transition-all duration-300",L?"w-0 overflow-hidden":"w-64"),children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(Fe,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-semibold text-sm",children:"LLM Router"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Playground"})]})]})}),e.jsx("div",{className:"p-3",children:e.jsxs(r,{id:"new-chat",className:"w-full",onClick:Ee,children:[e.jsx(Ge,{className:"mr-2 h-4 w-4"}),"New Chat"]})}),e.jsx(U,{className:"flex-1",children:e.jsx("div",{id:"session-list",className:"p-2 space-y-1",children:ye.map(s=>e.jsxs("div",{className:f("group flex items-center gap-2 rounded-lg px-3 py-2 cursor-pointer hover:bg-muted/50",n===s.id&&"bg-muted"),onClick:()=>Pe(s),children:[e.jsx(ce,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),e.jsx("span",{className:"flex-1 truncate text-sm",children:s.title}),e.jsxs(We,{children:[e.jsx(Xe,{asChild:!0,children:e.jsx(r,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:t=>t.stopPropagation(),children:e.jsx(fs,{className:"h-3 w-3"})})}),e.jsx(Ye,{align:"end",children:e.jsxs(Ze,{onClick:t=>{t.stopPropagation(),Oe(s.id)},className:"text-destructive",children:[e.jsx(es,{className:"mr-2 h-4 w-4"}),"Delete"]})})]})]},s.id))})}),e.jsxs("div",{className:"p-3 border-t space-y-2",children:[e.jsxs(r,{variant:"outline",className:"w-full justify-start",onClick:()=>window.location.href="/dashboard/",children:[e.jsx(js,{className:"mr-2 h-4 w-4"}),"Dashboard"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"ghost",size:"icon",onClick:De,children:$==="dark"?e.jsx(ss,{className:"h-4 w-4"}):e.jsx(ts,{className:"h-4 w-4"})}),e.jsx(r,{id:"settings-toggle",variant:"ghost",size:"icon",onClick:()=>M(!0),children:e.jsx(Ss,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"h-14 border-b flex items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(r,{id:"sidebar-toggle",variant:"ghost",size:"icon",onClick:Re,title:L?"Show sidebar":"Hide sidebar",children:L?e.jsx(vs,{className:"h-4 w-4"}):e.jsx(ys,{className:"h-4 w-4"})}),e.jsxs(as,{value:l,onValueChange:A,children:[e.jsx(rs,{id:"model-select",className:"w-64",children:e.jsx(ns,{placeholder:"Select a model"})}),e.jsx(ls,{children:Z.length===0?e.jsx(de,{value:"__no_models__",disabled:!0,children:"No models available"}):Z.filter(s=>s.name&&s.name.length>0).map(s=>e.jsx(de,{value:s.name,children:s.name},s.name))})]}),e.jsxs("span",{id:"router-status",className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(ps,{className:"h-3 w-3 text-green-500"}),"Router: Online"]}),T&&e.jsx(me,{variant:"secondary",className:"text-xs",children:"Streaming"}),!m&&e.jsx(me,{variant:"destructive",className:"text-xs cursor-pointer",onClick:()=>M(!0),children:"API Key Required"})]}),e.jsxs(r,{id:"copy-curl",variant:"outline",size:"sm",onClick:()=>R(!0),children:[e.jsx(gs,{className:"mr-2 h-4 w-4"}),"cURL"]})]}),e.jsx(U,{className:"flex-1 p-4",children:e.jsxs("div",{id:"chat-log",className:"max-w-3xl mx-auto space-y-4",children:[u.length===0?e.jsxs("div",{className:"chat-welcome flex flex-col items-center justify-center h-64 text-center",children:[e.jsx(ce,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),e.jsx("h2",{className:"text-lg font-medium",children:"Start a conversation"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Select a model and send a message to get started."})]}):u.map((s,t)=>e.jsxs("div",{className:f("flex gap-3",s.role==="user"?"message--user justify-end":"message--assistant"),children:[s.role==="assistant"&&e.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary/10",children:e.jsx(us,{className:"h-4 w-4 text-primary"})}),e.jsx("div",{className:f("rounded-lg px-4 py-2 max-w-[80%]",s.role==="user"?"bg-primary text-primary-foreground":"bg-muted"),children:e.jsx("p",{className:"message-text text-sm whitespace-pre-wrap",children:s.content})}),s.role==="user"&&e.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-muted",children:e.jsx(Be,{className:"h-4 w-4"})})]},t)),e.jsx("div",{ref:G})]})}),e.jsx("div",{className:"border-t p-4",children:e.jsxs("div",{id:"chat-form",className:"max-w-3xl mx-auto flex gap-2",children:[e.jsx(V,{ref:W,id:"chat-input",placeholder:"Type a message...",value:v,onChange:s=>J(s.target.value),onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&!s.nativeEvent.isComposing&&(s.preventDefault(),X())},disabled:O,className:"flex-1"}),O?e.jsxs(r,{id:"stop-button",variant:"destructive",onClick:Le,children:[e.jsx(is,{className:"mr-2 h-4 w-4 animate-spin"}),"Stop"]}):e.jsxs(r,{id:"send-button",onClick:X,disabled:!v.trim()||!l,children:[e.jsx(Ns,{className:"mr-2 h-4 w-4"}),"Send"]})]})})]}),e.jsx(he,{open:ve,onOpenChange:M,children:e.jsxs(xe,{id:"settings-modal",children:[e.jsxs(ue,{children:[e.jsx(pe,{children:"Settings"}),e.jsx(ge,{children:"Configure your chat preferences."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"API Key"}),e.jsx(V,{id:"api-key-input",type:"password",placeholder:"sk-...",value:m,onChange:s=>Ie(s.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for OpenAI compatible API authentication"})]}),e.jsx(C,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Model Provider Filter"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:f("provider-btn flex-1 px-3 py-1.5 text-sm rounded-md border transition-colors",_==="local"?"provider-btn--active bg-primary text-primary-foreground":"bg-muted"),"data-provider":"local",onClick:()=>z("local"),children:"Local"}),e.jsx("button",{className:f("provider-btn flex-1 px-3 py-1.5 text-sm rounded-md border transition-colors",_==="cloud"?"provider-btn--active bg-primary text-primary-foreground":"bg-muted"),"data-provider":"cloud",onClick:()=>z("cloud"),children:"Cloud"}),e.jsx("button",{className:f("provider-btn flex-1 px-3 py-1.5 text-sm rounded-md border transition-colors",_==="all"?"provider-btn--active bg-primary text-primary-foreground":"bg-muted"),"data-provider":"all",onClick:()=>z("all"),children:"All"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Filter models by provider type"})]}),e.jsx(C,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"System Prompt"}),e.jsx(os,{id:"system-prompt",placeholder:"You are a helpful assistant...",value:w,onChange:s=>ke(s.target.value),rows:3})]}),e.jsx(C,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Streaming"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Stream responses as they're generated"})]}),e.jsx(cs,{id:"stream-toggle",checked:T,onCheckedChange:be})]}),e.jsx(C,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{children:["Temperature: ",N]}),e.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:N,onChange:s=>Ce(parseFloat(s.target.value)),className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Max Tokens"}),e.jsx(V,{type:"number",value:D,onChange:s=>Me(parseInt(s.target.value)||2048),min:1,max:32e3})]}),e.jsx(C,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Clear Chat"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Clear all messages in current session"})]}),e.jsxs(r,{id:"reset-chat",variant:"outline",size:"sm",onClick:qe,children:[e.jsx(ws,{className:"mr-2 h-4 w-4"}),"Reset"]})]})]}),e.jsx(fe,{children:e.jsx(r,{onClick:()=>M(!1),children:"Done"})})]})}),e.jsx(he,{open:we,onOpenChange:R,children:e.jsxs(xe,{className:"max-w-2xl",children:[e.jsxs(ue,{children:[e.jsx(pe,{children:"cURL Command"}),e.jsx(ge,{children:"Copy this command to replicate the API call."})]}),e.jsxs("div",{className:"relative",children:[e.jsx(r,{variant:"ghost",size:"sm",className:"absolute right-2 top-2",onClick:()=>_e(Y()),children:Ne?e.jsx(ds,{className:"h-4 w-4"}):e.jsx(ms,{className:"h-4 w-4"})}),e.jsx(U,{className:"h-64 rounded-md border bg-muted",children:e.jsx("pre",{className:"p-4 text-xs font-mono",children:Y()})})]}),e.jsx(fe,{children:e.jsx(r,{variant:"outline",onClick:()=>R(!1),children:"Close"})})]})})]})}const bs=new hs({defaultOptions:{queries:{staleTime:3e4,retry:1}}});Ue.createRoot(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(xs,{client:bs,children:e.jsxs($e,{children:[e.jsx(ks,{}),e.jsx(Je,{})]})})}));
