import{c as p,r as t,j as e,C as Te,B as r,d as z,U as De,I as Z,L as C,t as b,E as Ee,H as Oe,F as Ie,T as Pe,G as qe}from"./index-DOarslIR.js";import{u as _e,f as ee,o as Re,t as L,M as se,H as ze,I as Le,J as Ve,N as Fe,v as He,F as Ae,G as Be,x as Ue,y as Je,z as Ke,A as Qe,E as te,B as Ge,p as $e,i as ae,j as ne,k as re,l as le,m as ce,_ as We,Z as ie,a2 as Xe,w as oe,q as Ye,r as Ze,a3 as es,a4 as ss}from"./switch-BT9pkm-H.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=p("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=p("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=p("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=p("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=p("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=p("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function is(){_e();const[V,de]=t.useState("dark"),[me,x]=t.useState([]),[i,M]=t.useState(null),[m,o]=t.useState([]),[g,F]=t.useState(""),[T,D]=t.useState(!1),[he,E]=t.useState(!1),[xe,O]=t.useState(!1),[ue,H]=t.useState(!1),[l,I]=t.useState(""),[j,pe]=t.useState(""),[w,ge]=t.useState(!0),[f,je]=t.useState(.7),[N,fe]=t.useState(2048),A=t.useRef(null),y=t.useRef(null),{data:u}=ee({queryKey:["registered-models"],queryFn:Ee.getRegistered}),{data:P}=ee({queryKey:["chat-sessions"],queryFn:Oe.getSessions});t.useEffect(()=>{P&&x(P)},[P]),t.useEffect(()=>{if(u&&!l){const s=u.filter(a=>a.state==="ready");s.length>0&&I(s[0].name)}},[u,l]),t.useEffect(()=>{var s;(s=A.current)==null||s.scrollIntoView({behavior:"smooth"})},[m]);const ye=()=>{const s=V==="dark"?"light":"dark";de(s),document.documentElement.classList.toggle("dark",s==="dark")},ve=t.useCallback(()=>{const s={id:crypto.randomUUID(),title:"New Chat",messages:[],model:l,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};x(a=>[s,...a]),M(s.id),o([])},[l]),we=s=>{M(s.id),o(s.messages||[]),s.model&&I(s.model)},Ne=s=>{x(a=>a.filter(S=>S.id!==s)),i===s&&(M(null),o([])),b({title:"Session deleted"})},B=async()=>{var S,K,Q,G,$,W,X;if(!g.trim()||!l||T)return;const s={role:"user",content:g.trim()},a=[...m,s];o(a),F(""),i&&x(d=>d.map(n=>n.id===i?{...n,messages:a,title:a.length===1?g.trim().slice(0,30):n.title,updated_at:new Date().toISOString()}:n)),D(!0),y.current=new AbortController;try{const d=j?[{role:"system",content:j},...a]:a;if(w){const n=await fetch("/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:l,messages:d,stream:!0,temperature:f,max_tokens:N}),signal:y.current.signal});if(!n.ok)throw new Error(`HTTP ${n.status}`);const q=(S=n.body)==null?void 0:S.getReader();if(!q)throw new Error("No response body");const k=new TextDecoder;let h="";for(o(c=>[...c,{role:"assistant",content:""}]);;){const{done:c,value:v}=await q.read();if(c)break;const Ce=k.decode(v,{stream:!0}).split(`
`).filter(_=>_.startsWith("data: "));for(const _ of Ce){const Y=_.slice(6);if(Y!=="[DONE]")try{const be=((G=(Q=(K=JSON.parse(Y).choices)==null?void 0:K[0])==null?void 0:Q.delta)==null?void 0:G.content)||"";h+=be,o(Me=>{const R=[...Me];return R[R.length-1]={role:"assistant",content:h},R})}catch{}}}i&&x(c=>c.map(v=>v.id===i?{...v,messages:[...a,{role:"assistant",content:h}],updated_at:new Date().toISOString()}:v))}else{const n=await fetch("/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:l,messages:d,stream:!1,temperature:f,max_tokens:N}),signal:y.current.signal});if(!n.ok)throw new Error(`HTTP ${n.status}`);const k={role:"assistant",content:((X=(W=($=(await n.json()).choices)==null?void 0:$[0])==null?void 0:W.message)==null?void 0:X.content)||""};o(h=>[...h,k]),i&&x(h=>h.map(c=>c.id===i?{...c,messages:[...a,k],updated_at:new Date().toISOString()}:c))}}catch(d){d.name!=="AbortError"&&(b({title:"Failed to send message",description:d instanceof Error?d.message:"Unknown error",variant:"destructive"}),o(m))}finally{D(!1),y.current=null}},Se=()=>{var s;(s=y.current)==null||s.abort(),D(!1)},U=()=>{const s=j?[{role:"system",content:j},...m]:m;return`curl -X POST 'http://localhost:8080/v1/chat/completions' \\
  -H 'Content-Type: application/json' \\
  -d '${JSON.stringify({model:l,messages:s,stream:w,temperature:f,max_tokens:N},null,2)}'`},ke=async s=>{try{await navigator.clipboard.writeText(s),H(!0),setTimeout(()=>H(!1),2e3),b({title:"Copied to clipboard"})}catch{b({title:"Failed to copy",variant:"destructive"})}},J=(u==null?void 0:u.filter(s=>s.state==="ready"))||[];return e.jsxs("div",{className:"flex h-screen bg-background",children:[e.jsxs("div",{className:"w-64 border-r flex flex-col",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(Te,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-semibold text-sm",children:"LLM Router"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Playground"})]})]})}),e.jsx("div",{className:"p-3",children:e.jsxs(r,{className:"w-full",onClick:ve,children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"New Chat"]})}),e.jsx(L,{className:"flex-1",children:e.jsx("div",{className:"p-2 space-y-1",children:me.map(s=>e.jsxs("div",{className:z("group flex items-center gap-2 rounded-lg px-3 py-2 cursor-pointer hover:bg-muted/50",i===s.id&&"bg-muted"),onClick:()=>we(s),children:[e.jsx(se,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),e.jsx("span",{className:"flex-1 truncate text-sm",children:s.title}),e.jsxs(ze,{children:[e.jsx(Le,{asChild:!0,children:e.jsx(r,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:a=>a.stopPropagation(),children:e.jsx(ns,{className:"h-3 w-3"})})}),e.jsx(Ve,{align:"end",children:e.jsxs(Fe,{onClick:a=>{a.stopPropagation(),Ne(s.id)},className:"text-destructive",children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),"Delete"]})})]})]},s.id))})}),e.jsxs("div",{className:"p-3 border-t space-y-2",children:[e.jsxs(r,{variant:"outline",className:"w-full justify-start",onClick:()=>window.location.href="/dashboard/",children:[e.jsx(rs,{className:"mr-2 h-4 w-4"}),"Dashboard"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"ghost",size:"icon",onClick:ye,children:V==="dark"?e.jsx(Ae,{className:"h-4 w-4"}):e.jsx(Be,{className:"h-4 w-4"})}),e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>E(!0),children:e.jsx(cs,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"h-14 border-b flex items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Ue,{value:l,onValueChange:I,children:[e.jsx(Je,{className:"w-64",children:e.jsx(Ke,{placeholder:"Select a model"})}),e.jsx(Qe,{children:J.length===0?e.jsx(te,{value:"__no_models__",disabled:!0,children:"No models available"}):J.filter(s=>s.name&&s.name.length>0).map(s=>e.jsx(te,{value:s.name,children:s.name},s.name))})]}),w&&e.jsx(Ge,{variant:"secondary",className:"text-xs",children:"Streaming"})]}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>O(!0),children:[e.jsx(as,{className:"mr-2 h-4 w-4"}),"cURL"]})]}),e.jsx(L,{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-4",children:[m.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[e.jsx(se,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),e.jsx("h2",{className:"text-lg font-medium",children:"Start a conversation"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Select a model and send a message to get started."})]}):m.map((s,a)=>e.jsxs("div",{className:z("flex gap-3",s.role==="user"&&"justify-end"),children:[s.role==="assistant"&&e.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary/10",children:e.jsx(ts,{className:"h-4 w-4 text-primary"})}),e.jsx("div",{className:z("rounded-lg px-4 py-2 max-w-[80%]",s.role==="user"?"bg-primary text-primary-foreground":"bg-muted"),children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.content})}),s.role==="user"&&e.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-muted",children:e.jsx(De,{className:"h-4 w-4"})})]},a)),e.jsx("div",{ref:A})]})}),e.jsx("div",{className:"border-t p-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto flex gap-2",children:[e.jsx(Z,{placeholder:"Type a message...",value:g,onChange:s=>F(s.target.value),onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),B())},disabled:T,className:"flex-1"}),T?e.jsxs(r,{variant:"destructive",onClick:Se,children:[e.jsx($e,{className:"mr-2 h-4 w-4 animate-spin"}),"Stop"]}):e.jsxs(r,{onClick:B,disabled:!g.trim()||!l,children:[e.jsx(ls,{className:"mr-2 h-4 w-4"}),"Send"]})]})})]}),e.jsx(ae,{open:he,onOpenChange:E,children:e.jsxs(ne,{children:[e.jsxs(re,{children:[e.jsx(le,{children:"Settings"}),e.jsx(ce,{children:"Configure your chat preferences."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"System Prompt"}),e.jsx(We,{placeholder:"You are a helpful assistant...",value:j,onChange:s=>pe(s.target.value),rows:3})]}),e.jsx(ie,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(C,{children:"Streaming"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Stream responses as they're generated"})]}),e.jsx(Xe,{checked:w,onCheckedChange:ge})]}),e.jsx(ie,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{children:["Temperature: ",f]}),e.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:f,onChange:s=>je(parseFloat(s.target.value)),className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{children:"Max Tokens"}),e.jsx(Z,{type:"number",value:N,onChange:s=>fe(parseInt(s.target.value)||2048),min:1,max:32e3})]})]}),e.jsx(oe,{children:e.jsx(r,{onClick:()=>E(!1),children:"Done"})})]})}),e.jsx(ae,{open:xe,onOpenChange:O,children:e.jsxs(ne,{className:"max-w-2xl",children:[e.jsxs(re,{children:[e.jsx(le,{children:"cURL Command"}),e.jsx(ce,{children:"Copy this command to replicate the API call."})]}),e.jsxs("div",{className:"relative",children:[e.jsx(r,{variant:"ghost",size:"sm",className:"absolute right-2 top-2",onClick:()=>ke(U()),children:ue?e.jsx(Ye,{className:"h-4 w-4"}):e.jsx(Ze,{className:"h-4 w-4"})}),e.jsx(L,{className:"h-64 rounded-md border bg-muted",children:e.jsx("pre",{className:"p-4 text-xs font-mono",children:U()})})]}),e.jsx(oe,{children:e.jsx(r,{variant:"outline",onClick:()=>O(!1),children:"Close"})})]})})]})}const os=new es({defaultOptions:{queries:{staleTime:3e4,retry:1}}});Ie.createRoot(document.getElementById("root")).render(e.jsx(t.StrictMode,{children:e.jsx(ss,{client:os,children:e.jsxs(Pe,{children:[e.jsx(is,{}),e.jsx(qe,{})]})})}));
