import{c as f,r as t,j as e,C as Ae,B as n,d as L,U as Re,I as H,L as S,t as D,D as _e,G as ze,E as Le,T as He,F as Be}from"./index-Dz2xB-LK.js";import{u as Ke,f as re,o as Ve,t as B,M as le,H as Fe,I as Ue,J as $e,N as Je,v as Qe,F as Ge,G as We,x as Xe,y as Ye,z as Ze,A as es,E as ie,B as oe,p as ss,i as ce,j as de,k as me,l as he,m as ue,Z as K,_ as ts,a2 as as,w as xe,q as ns,r as rs,a3 as ls,a4 as is}from"./switch-CAymjBzL.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=f("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=f("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=f("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=f("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=f("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=f("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function xs(){Ke();const[V,pe]=t.useState("dark"),[ge,p]=t.useState([]),[o,E]=t.useState(null),[h,c]=t.useState([]),[j,F]=t.useState(""),[I,O]=t.useState(!1),[fe,k]=t.useState(!1),[je,P]=t.useState(!1),[ye,U]=t.useState(!1),[r,q]=t.useState(""),[y,ve]=t.useState(""),[C,we]=t.useState(!0),[v,Ne]=t.useState(.7),[b,Se]=t.useState(2048),[d,ke]=t.useState(()=>{if(typeof window<"u"){const s=localStorage.getItem("llm-router-api-key");if(s)return s;if(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")return"sk_debug"}return""}),$=t.useRef(null),w=t.useRef(null),J=t.useRef(null),{data:g}=re({queryKey:["registered-models"],queryFn:_e.getRegistered}),{data:A}=re({queryKey:["chat-sessions"],queryFn:ze.getSessions});t.useEffect(()=>{A&&p(A)},[A]),t.useEffect(()=>{if(g&&!r){const s=g.filter(a=>a.ready);s.length>0&&q(s[0].name)}},[g,r]),t.useEffect(()=>{var s;(s=$.current)==null||s.scrollIntoView({behavior:"smooth"})},[h]);const Ce=()=>{const s=V==="dark"?"light":"dark";pe(s),document.documentElement.classList.toggle("dark",s==="dark")},be=s=>{ke(s),localStorage.setItem("llm-router-api-key",s)},Me=t.useCallback(()=>{const s={id:crypto.randomUUID(),title:"New Chat",messages:[],model:r,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};p(a=>[s,...a]),E(s.id),c([])},[r]),Te=s=>{E(s.id),c(s.messages||[]),s.model&&q(s.model)},De=s=>{p(a=>a.filter(M=>M.id!==s)),o===s&&(E(null),c([])),D({title:"Session deleted"})},Q=async()=>{var M,X,Y,Z,ee,se,te,ae;if(!j.trim()||!r||I)return;const s={role:"user",content:j.trim()},a=[...h,s];c(a),F(""),o&&p(m=>m.map(l=>l.id===o?{...l,messages:a,title:a.length===1?j.trim().slice(0,30):l.title,updated_at:new Date().toISOString()}:l)),O(!0),w.current=new AbortController;try{const m=y?[{role:"system",content:y},...a]:a;if(C){const l={"Content-Type":"application/json"};d&&(l.Authorization=`Bearer ${d}`);const u=await fetch("/v1/chat/completions",{method:"POST",headers:l,body:JSON.stringify({model:r,messages:m,stream:!0,temperature:v,max_tokens:b}),signal:w.current.signal});if(!u.ok)throw new Error(`HTTP ${u.status}`);const R=(M=u.body)==null?void 0:M.getReader();if(!R)throw new Error("No response body");const T=new TextDecoder;let x="";for(c(i=>[...i,{role:"assistant",content:""}]);;){const{done:i,value:N}=await R.read();if(i)break;const Oe=T.decode(N,{stream:!0}).split(`
`).filter(_=>_.startsWith("data: "));for(const _ of Oe){const ne=_.slice(6);if(ne!=="[DONE]")try{const Pe=((Z=(Y=(X=JSON.parse(ne).choices)==null?void 0:X[0])==null?void 0:Y.delta)==null?void 0:Z.content)||"";x+=Pe,c(qe=>{const z=[...qe];return z[z.length-1]={role:"assistant",content:x},z})}catch{}}}o&&p(i=>i.map(N=>N.id===o?{...N,messages:[...a,{role:"assistant",content:x}],updated_at:new Date().toISOString()}:N))}else{const l={"Content-Type":"application/json"};d&&(l.Authorization=`Bearer ${d}`);const u=await fetch("/v1/chat/completions",{method:"POST",headers:l,body:JSON.stringify({model:r,messages:m,stream:!1,temperature:v,max_tokens:b}),signal:w.current.signal});if(!u.ok)throw new Error(`HTTP ${u.status}`);const T={role:"assistant",content:((te=(se=(ee=(await u.json()).choices)==null?void 0:ee[0])==null?void 0:se.message)==null?void 0:te.content)||""};c(x=>[...x,T]),o&&p(x=>x.map(i=>i.id===o?{...i,messages:[...a,T],updated_at:new Date().toISOString()}:i))}}catch(m){m.name!=="AbortError"&&(D({title:"Failed to send message",description:m instanceof Error?m.message:"Unknown error",variant:"destructive"}),c(h))}finally{O(!1),w.current=null,(ae=J.current)==null||ae.focus()}},Ee=()=>{var s;(s=w.current)==null||s.abort(),O(!1)},G=()=>{const s=y?[{role:"system",content:y},...h]:h;return`curl -X POST 'http://localhost:8080/v1/chat/completions' \\
  -H 'Content-Type: application/json' \\${d?`
  -H 'Authorization: Bearer ${d}' \\`:""}
  -d '${JSON.stringify({model:r,messages:s,stream:C,temperature:v,max_tokens:b},null,2)}'`},Ie=async s=>{try{await navigator.clipboard.writeText(s),U(!0),setTimeout(()=>U(!1),2e3),D({title:"Copied to clipboard"})}catch{D({title:"Failed to copy",variant:"destructive"})}},W=(g==null?void 0:g.filter(s=>s.ready))||[];return e.jsxs("div",{className:"flex h-screen bg-background",children:[e.jsxs("div",{id:"sidebar",className:"w-64 border-r flex flex-col",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(Ae,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-semibold text-sm",children:"LLM Router"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Playground"})]})]})}),e.jsx("div",{className:"p-3",children:e.jsxs(n,{id:"new-chat",className:"w-full",onClick:Me,children:[e.jsx(Ve,{className:"mr-2 h-4 w-4"}),"New Chat"]})}),e.jsx(B,{className:"flex-1",children:e.jsx("div",{id:"session-list",className:"p-2 space-y-1",children:ge.map(s=>e.jsxs("div",{className:L("group flex items-center gap-2 rounded-lg px-3 py-2 cursor-pointer hover:bg-muted/50",o===s.id&&"bg-muted"),onClick:()=>Te(s),children:[e.jsx(le,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),e.jsx("span",{className:"flex-1 truncate text-sm",children:s.title}),e.jsxs(Fe,{children:[e.jsx(Ue,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:a=>a.stopPropagation(),children:e.jsx(ds,{className:"h-3 w-3"})})}),e.jsx($e,{align:"end",children:e.jsxs(Je,{onClick:a=>{a.stopPropagation(),De(s.id)},className:"text-destructive",children:[e.jsx(Qe,{className:"mr-2 h-4 w-4"}),"Delete"]})})]})]},s.id))})}),e.jsxs("div",{className:"p-3 border-t space-y-2",children:[e.jsxs(n,{variant:"outline",className:"w-full justify-start",onClick:()=>window.location.href="/dashboard/",children:[e.jsx(ms,{className:"mr-2 h-4 w-4"}),"Dashboard"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:"ghost",size:"icon",onClick:Ce,children:V==="dark"?e.jsx(Ge,{className:"h-4 w-4"}):e.jsx(We,{className:"h-4 w-4"})}),e.jsx(n,{id:"settings-toggle",variant:"ghost",size:"icon",onClick:()=>k(!0),children:e.jsx(us,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"h-14 border-b flex items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Xe,{value:r,onValueChange:q,children:[e.jsx(Ye,{id:"model-select",className:"w-64",children:e.jsx(Ze,{placeholder:"Select a model"})}),e.jsx(es,{children:W.length===0?e.jsx(ie,{value:"__no_models__",disabled:!0,children:"No models available"}):W.filter(s=>s.name&&s.name.length>0).map(s=>e.jsx(ie,{value:s.name,children:s.name},s.name))})]}),C&&e.jsx(oe,{variant:"secondary",className:"text-xs",children:"Streaming"}),!d&&e.jsx(oe,{variant:"destructive",className:"text-xs cursor-pointer",onClick:()=>k(!0),children:"API Key Required"})]}),e.jsxs(n,{id:"copy-curl",variant:"outline",size:"sm",onClick:()=>P(!0),children:[e.jsx(cs,{className:"mr-2 h-4 w-4"}),"cURL"]})]}),e.jsx(B,{className:"flex-1 p-4",children:e.jsxs("div",{id:"chat-log",className:"max-w-3xl mx-auto space-y-4",children:[h.length===0?e.jsxs("div",{className:"chat-welcome flex flex-col items-center justify-center h-64 text-center",children:[e.jsx(le,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),e.jsx("h2",{className:"text-lg font-medium",children:"Start a conversation"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Select a model and send a message to get started."})]}):h.map((s,a)=>e.jsxs("div",{className:L("flex gap-3",s.role==="user"?"message--user justify-end":"message--assistant"),children:[s.role==="assistant"&&e.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary/10",children:e.jsx(os,{className:"h-4 w-4 text-primary"})}),e.jsx("div",{className:L("rounded-lg px-4 py-2 max-w-[80%]",s.role==="user"?"bg-primary text-primary-foreground":"bg-muted"),children:e.jsx("p",{className:"message-text text-sm whitespace-pre-wrap",children:s.content})}),s.role==="user"&&e.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-muted",children:e.jsx(Re,{className:"h-4 w-4"})})]},a)),e.jsx("div",{ref:$})]})}),e.jsx("div",{className:"border-t p-4",children:e.jsxs("div",{id:"chat-form",className:"max-w-3xl mx-auto flex gap-2",children:[e.jsx(H,{ref:J,id:"chat-input",placeholder:"Type a message...",value:j,onChange:s=>F(s.target.value),onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&!s.nativeEvent.isComposing&&(s.preventDefault(),Q())},disabled:I,className:"flex-1"}),I?e.jsxs(n,{id:"stop-button",variant:"destructive",onClick:Ee,children:[e.jsx(ss,{className:"mr-2 h-4 w-4 animate-spin"}),"Stop"]}):e.jsxs(n,{id:"send-button",onClick:Q,disabled:!j.trim()||!r,children:[e.jsx(hs,{className:"mr-2 h-4 w-4"}),"Send"]})]})})]}),e.jsx(ce,{open:fe,onOpenChange:k,children:e.jsxs(de,{id:"settings-modal",children:[e.jsxs(me,{children:[e.jsx(he,{children:"Settings"}),e.jsx(ue,{children:"Configure your chat preferences."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"API Key"}),e.jsx(H,{id:"api-key-input",type:"password",placeholder:"sk-...",value:d,onChange:s=>be(s.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for OpenAI compatible API authentication"})]}),e.jsx(K,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"System Prompt"}),e.jsx(ts,{id:"system-prompt",placeholder:"You are a helpful assistant...",value:y,onChange:s=>ve(s.target.value),rows:3})]}),e.jsx(K,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(S,{children:"Streaming"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Stream responses as they're generated"})]}),e.jsx(as,{id:"stream-toggle",checked:C,onCheckedChange:we})]}),e.jsx(K,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{children:["Temperature: ",v]}),e.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:v,onChange:s=>Ne(parseFloat(s.target.value)),className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:"Max Tokens"}),e.jsx(H,{type:"number",value:b,onChange:s=>Se(parseInt(s.target.value)||2048),min:1,max:32e3})]})]}),e.jsx(xe,{children:e.jsx(n,{onClick:()=>k(!1),children:"Done"})})]})}),e.jsx(ce,{open:je,onOpenChange:P,children:e.jsxs(de,{className:"max-w-2xl",children:[e.jsxs(me,{children:[e.jsx(he,{children:"cURL Command"}),e.jsx(ue,{children:"Copy this command to replicate the API call."})]}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{variant:"ghost",size:"sm",className:"absolute right-2 top-2",onClick:()=>Ie(G()),children:ye?e.jsx(ns,{className:"h-4 w-4"}):e.jsx(rs,{className:"h-4 w-4"})}),e.jsx(B,{className:"h-64 rounded-md border bg-muted",children:e.jsx("pre",{className:"p-4 text-xs font-mono",children:G()})})]}),e.jsx(xe,{children:e.jsx(n,{variant:"outline",onClick:()=>P(!1),children:"Close"})})]})})]})}const ps=new ls({defaultOptions:{queries:{staleTime:3e4,retry:1}}});Le.createRoot(document.getElementById("root")).render(e.jsx(t.StrictMode,{children:e.jsx(is,{client:ps,children:e.jsxs(He,{children:[e.jsx(xs,{}),e.jsx(Be,{})]})})}));
