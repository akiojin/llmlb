import{c as S,r as t,j as e,C as Pe,B as n,d as L,U as Ae,I as B,L as N,t as D,D as _e,G as qe,E as ze,T as Re,F as Le}from"./index-BDBGsD46.js";import{u as Be,f as ae,o as He,t as H,M as ne,H as Ke,I as Fe,J as Ve,N as Ue,v as $e,a3 as Je,F as Qe,G as Ge,x as We,y as Xe,z as Ye,A as Ze,E as re,B as le,p as es,i as ie,j as oe,k as ce,l as de,m as me,Z as K,_ as ss,a2 as ts,w as he,q as as,r as ns,a4 as rs,a5 as ls}from"./switch-oMzGGiOm.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=S("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=S("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=S("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=S("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=S("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function hs(){Be();const[F,ue]=t.useState("dark"),[xe,p]=t.useState([]),[o,I]=t.useState(null),[h,c]=t.useState([]),[j,V]=t.useState(""),[E,O]=t.useState(!1),[pe,k]=t.useState(!1),[ge,P]=t.useState(!1),[je,U]=t.useState(!1),[r,A]=t.useState(""),[f,fe]=t.useState(""),[C,ye]=t.useState(!0),[y,we]=t.useState(.7),[b,ve]=t.useState(2048),[d,Ne]=t.useState(()=>{if(typeof window<"u"){const s=localStorage.getItem("llm-router-api-key");if(s)return s;if(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")return"sk_debug"}return""}),$=t.useRef(null),w=t.useRef(null),{data:g}=ae({queryKey:["registered-models"],queryFn:_e.getRegistered}),{data:_}=ae({queryKey:["chat-sessions"],queryFn:qe.getSessions});t.useEffect(()=>{_&&p(_)},[_]),t.useEffect(()=>{if(g&&!r){const s=g.filter(a=>a.ready);s.length>0&&A(s[0].name)}},[g,r]),t.useEffect(()=>{var s;(s=$.current)==null||s.scrollIntoView({behavior:"smooth"})},[h]);const Se=()=>{const s=F==="dark"?"light":"dark";ue(s),document.documentElement.classList.toggle("dark",s==="dark")},ke=s=>{Ne(s),localStorage.setItem("llm-router-api-key",s)},Ce=t.useCallback(()=>{const s={id:crypto.randomUUID(),title:"New Chat",messages:[],model:r,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};p(a=>[s,...a]),I(s.id),c([])},[r]),be=s=>{I(s.id),c(s.messages||[]),s.model&&A(s.model)},Te=s=>{p(a=>a.filter(T=>T.id!==s)),o===s&&(I(null),c([])),D({title:"Session deleted"})},J=async()=>{var T,W,X,Y,Z,ee,se;if(!j.trim()||!r||E)return;const s={role:"user",content:j.trim()},a=[...h,s];c(a),V(""),o&&p(m=>m.map(l=>l.id===o?{...l,messages:a,title:a.length===1?j.trim().slice(0,30):l.title,updated_at:new Date().toISOString()}:l)),O(!0),w.current=new AbortController;try{const m=f?[{role:"system",content:f},...a]:a;if(C){const l={"Content-Type":"application/json"};d&&(l.Authorization=`Bearer ${d}`);const u=await fetch("/v1/chat/completions",{method:"POST",headers:l,body:JSON.stringify({model:r,messages:m,stream:!0,temperature:y,max_tokens:b}),signal:w.current.signal});if(!u.ok)throw new Error(`HTTP ${u.status}`);const q=(T=u.body)==null?void 0:T.getReader();if(!q)throw new Error("No response body");const M=new TextDecoder;let x="";for(c(i=>[...i,{role:"assistant",content:""}]);;){const{done:i,value:v}=await q.read();if(i)break;const Ie=M.decode(v,{stream:!0}).split(`
`).filter(z=>z.startsWith("data: "));for(const z of Ie){const te=z.slice(6);if(te!=="[DONE]")try{const Ee=((Y=(X=(W=JSON.parse(te).choices)==null?void 0:W[0])==null?void 0:X.delta)==null?void 0:Y.content)||"";x+=Ee,c(Oe=>{const R=[...Oe];return R[R.length-1]={role:"assistant",content:x},R})}catch{}}}o&&p(i=>i.map(v=>v.id===o?{...v,messages:[...a,{role:"assistant",content:x}],updated_at:new Date().toISOString()}:v))}else{const l={"Content-Type":"application/json"};d&&(l.Authorization=`Bearer ${d}`);const u=await fetch("/v1/chat/completions",{method:"POST",headers:l,body:JSON.stringify({model:r,messages:m,stream:!1,temperature:y,max_tokens:b}),signal:w.current.signal});if(!u.ok)throw new Error(`HTTP ${u.status}`);const M={role:"assistant",content:((se=(ee=(Z=(await u.json()).choices)==null?void 0:Z[0])==null?void 0:ee.message)==null?void 0:se.content)||""};c(x=>[...x,M]),o&&p(x=>x.map(i=>i.id===o?{...i,messages:[...a,M],updated_at:new Date().toISOString()}:i))}}catch(m){m.name!=="AbortError"&&(D({title:"Failed to send message",description:m instanceof Error?m.message:"Unknown error",variant:"destructive"}),c(h))}finally{O(!1),w.current=null}},Me=()=>{var s;(s=w.current)==null||s.abort(),O(!1)},Q=()=>{const s=f?[{role:"system",content:f},...h]:h;return`curl -X POST 'http://localhost:8080/v1/chat/completions' \\
  -H 'Content-Type: application/json' \\${d?`
  -H 'Authorization: Bearer ${d}' \\`:""}
  -d '${JSON.stringify({model:r,messages:s,stream:C,temperature:y,max_tokens:b},null,2)}'`},De=async s=>{try{await navigator.clipboard.writeText(s),U(!0),setTimeout(()=>U(!1),2e3),D({title:"Copied to clipboard"})}catch{D({title:"Failed to copy",variant:"destructive"})}},G=(g==null?void 0:g.filter(s=>s.ready))||[];return e.jsxs("div",{className:"flex h-screen bg-background",children:[e.jsxs("div",{id:"sidebar",className:"w-64 border-r flex flex-col",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(Pe,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-semibold text-sm",children:"LLM Router"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Playground"})]})]})}),e.jsx("div",{className:"p-3",children:e.jsxs(n,{id:"new-chat",className:"w-full",onClick:Ce,children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),"New Chat"]})}),e.jsx(H,{className:"flex-1",children:e.jsx("div",{id:"session-list",className:"p-2 space-y-1",children:xe.map(s=>e.jsxs("div",{className:L("group flex items-center gap-2 rounded-lg px-3 py-2 cursor-pointer hover:bg-muted/50",o===s.id&&"bg-muted"),onClick:()=>be(s),children:[e.jsx(ne,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),e.jsx("span",{className:"flex-1 truncate text-sm",children:s.title}),e.jsxs(Ke,{children:[e.jsx(Fe,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100",onClick:a=>a.stopPropagation(),children:e.jsx(cs,{className:"h-3 w-3"})})}),e.jsx(Ve,{align:"end",children:e.jsxs(Ue,{onClick:a=>{a.stopPropagation(),Te(s.id)},className:"text-destructive",children:[e.jsx($e,{className:"mr-2 h-4 w-4"}),"Delete"]})})]})]},s.id))})}),e.jsxs("div",{className:"p-3 border-t space-y-2",children:[e.jsxs(n,{variant:"outline",className:"w-full justify-start",onClick:()=>window.location.href="/dashboard/",children:[e.jsx(Je,{className:"mr-2 h-4 w-4"}),"Dashboard"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:"ghost",size:"icon",onClick:Se,children:F==="dark"?e.jsx(Qe,{className:"h-4 w-4"}):e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx(n,{id:"settings-toggle",variant:"ghost",size:"icon",onClick:()=>k(!0),children:e.jsx(ms,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"h-14 border-b flex items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(We,{value:r,onValueChange:A,children:[e.jsx(Xe,{id:"model-select",className:"w-64",children:e.jsx(Ye,{placeholder:"Select a model"})}),e.jsx(Ze,{children:G.length===0?e.jsx(re,{value:"__no_models__",disabled:!0,children:"No models available"}):G.filter(s=>s.name&&s.name.length>0).map(s=>e.jsx(re,{value:s.name,children:s.name},s.name))})]}),C&&e.jsx(le,{variant:"secondary",className:"text-xs",children:"Streaming"}),!d&&e.jsx(le,{variant:"destructive",className:"text-xs cursor-pointer",onClick:()=>k(!0),children:"API Key Required"})]}),e.jsxs(n,{id:"copy-curl",variant:"outline",size:"sm",onClick:()=>P(!0),children:[e.jsx(os,{className:"mr-2 h-4 w-4"}),"cURL"]})]}),e.jsx(H,{className:"flex-1 p-4",children:e.jsxs("div",{id:"chat-log",className:"max-w-3xl mx-auto space-y-4",children:[h.length===0?e.jsxs("div",{className:"chat-welcome flex flex-col items-center justify-center h-64 text-center",children:[e.jsx(ne,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),e.jsx("h2",{className:"text-lg font-medium",children:"Start a conversation"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Select a model and send a message to get started."})]}):h.map((s,a)=>e.jsxs("div",{className:L("flex gap-3",s.role==="user"?"message--user justify-end":"message--assistant"),children:[s.role==="assistant"&&e.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary/10",children:e.jsx(is,{className:"h-4 w-4 text-primary"})}),e.jsx("div",{className:L("rounded-lg px-4 py-2 max-w-[80%]",s.role==="user"?"bg-primary text-primary-foreground":"bg-muted"),children:e.jsx("p",{className:"message-text text-sm whitespace-pre-wrap",children:s.content})}),s.role==="user"&&e.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-muted",children:e.jsx(Ae,{className:"h-4 w-4"})})]},a)),e.jsx("div",{ref:$})]})}),e.jsx("div",{className:"border-t p-4",children:e.jsxs("div",{id:"chat-form",className:"max-w-3xl mx-auto flex gap-2",children:[e.jsx(B,{id:"chat-input",placeholder:"Type a message...",value:j,onChange:s=>V(s.target.value),onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),J())},disabled:E,className:"flex-1"}),E?e.jsxs(n,{id:"stop-button",variant:"destructive",onClick:Me,children:[e.jsx(es,{className:"mr-2 h-4 w-4 animate-spin"}),"Stop"]}):e.jsxs(n,{id:"send-button",onClick:J,disabled:!j.trim()||!r,children:[e.jsx(ds,{className:"mr-2 h-4 w-4"}),"Send"]})]})})]}),e.jsx(ie,{open:pe,onOpenChange:k,children:e.jsxs(oe,{id:"settings-modal",children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Settings"}),e.jsx(me,{children:"Configure your chat preferences."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"API Key"}),e.jsx(B,{id:"api-key-input",type:"password",placeholder:"sk-...",value:d,onChange:s=>ke(s.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for OpenAI compatible API authentication"})]}),e.jsx(K,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"System Prompt"}),e.jsx(ss,{id:"system-prompt",placeholder:"You are a helpful assistant...",value:f,onChange:s=>fe(s.target.value),rows:3})]}),e.jsx(K,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Streaming"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Stream responses as they're generated"})]}),e.jsx(ts,{id:"stream-toggle",checked:C,onCheckedChange:ye})]}),e.jsx(K,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(N,{children:["Temperature: ",y]}),e.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:y,onChange:s=>we(parseFloat(s.target.value)),className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Max Tokens"}),e.jsx(B,{type:"number",value:b,onChange:s=>ve(parseInt(s.target.value)||2048),min:1,max:32e3})]})]}),e.jsx(he,{children:e.jsx(n,{onClick:()=>k(!1),children:"Done"})})]})}),e.jsx(ie,{open:ge,onOpenChange:P,children:e.jsxs(oe,{className:"max-w-2xl",children:[e.jsxs(ce,{children:[e.jsx(de,{children:"cURL Command"}),e.jsx(me,{children:"Copy this command to replicate the API call."})]}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{variant:"ghost",size:"sm",className:"absolute right-2 top-2",onClick:()=>De(Q()),children:je?e.jsx(as,{className:"h-4 w-4"}):e.jsx(ns,{className:"h-4 w-4"})}),e.jsx(H,{className:"h-64 rounded-md border bg-muted",children:e.jsx("pre",{className:"p-4 text-xs font-mono",children:Q()})})]}),e.jsx(he,{children:e.jsx(n,{variant:"outline",onClick:()=>P(!1),children:"Close"})})]})})]})}const us=new rs({defaultOptions:{queries:{staleTime:3e4,retry:1}}});ze.createRoot(document.getElementById("root")).render(e.jsx(t.StrictMode,{children:e.jsx(ls,{client:us,children:e.jsxs(Re,{children:[e.jsx(hs,{}),e.jsx(Le,{})]})})}));
