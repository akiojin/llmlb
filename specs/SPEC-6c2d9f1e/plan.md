# å®Ÿè£…è¨ˆç”»: ãƒ¢ãƒ‡ãƒ«ç™»éŒ²ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«I/Oã®å®Œå…¨å‹•ä½œ

**æ©Ÿèƒ½ID**: `SPEC-6c2d9f1e` | **æ—¥ä»˜**: 2025-12-20 | **ä»•æ§˜**: [spec.md](./spec.md)
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸŸ¡ å®Ÿè£…ä¸­ï¼ˆTDDï¼‰

## æ¦‚è¦

ãƒ¢ãƒ‡ãƒ«ç™»éŒ²ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å¥å…¨æ€§ãƒã‚§ãƒƒã‚¯ã€æŒ‡å®šãƒ¢ãƒ‡ãƒ«ã§ã®ãƒãƒ£ãƒƒãƒˆã€ç”»åƒ/éŸ³å£°å…¥å‡ºåŠ›ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€å‰Šé™¤åæ˜ ã‚’å®Œçµã•ã›ã‚‹ã€‚ãƒãƒ¼ãƒ‰ã¯ supported_runtimes ã¨éŸ³å£°/ç”»åƒã®ãƒ­ãƒ¼ãƒ‰çŠ¶æ³ã‚’ç™»éŒ²ãƒ»ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆã§é€ä¿¡ã—ã€ãƒ«ãƒ¼ã‚¿ãƒ¼ã¯ãã‚Œã‚’åˆ©ç”¨ã—ã¦ API ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é©åˆ‡ãªãƒãƒ¼ãƒ‰ã¸è»¢é€ã™ã‚‹ã€‚

## å®Ÿè£…æ–¹é‡

1. **ä»•æ§˜ãƒ»ãƒ†ã‚¹ãƒˆã‚’å…ˆè¡Œ**ï¼ˆTDDï¼‰: ãƒ«ãƒ¼ã‚¿ãƒ¼çµ±åˆãƒ†ã‚¹ãƒˆã¨ãƒãƒ¼ãƒ‰ unit/contract ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ãƒ»ä¿®æ­£ã€‚
2. **ãƒãƒ¼ãƒ‰ç™»éŒ²/ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆæ‹¡å¼µ**: supported_runtimes ã¨ loaded_asr/tts ã‚’é€ä¿¡ã€‚
3. **ã‚­ãƒ£ãƒƒã‚·ãƒ¥å¥å…¨æ€§**: 0B/ä¸å®Œå…¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç„¡åŠ¹åŒ–ã—å†å–å¾—ã€‚
4. **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: ç”»åƒ/éŸ³å£°ã® RuntimeType ã«åŸºã¥ããƒãƒ¼ãƒ‰é¸æŠã‚’å®Ÿåˆ©ç”¨ã«åˆã‚ã›ã¦æ•´å‚™ã€‚
5. **å‰Šé™¤åæ˜ **: router_model_path ã®æ¤œè¨¼å¼·åŒ–ã§ /v1/models ã® ready åˆ¤å®šã‚’å³å¯†åŒ–ã€‚

## ä¸»è¦å¤‰æ›´ç®‡æ‰€

- `node/include/api/router_client.h`, `node/src/api/router_client.cpp`: supported_runtimes/loaded_* é€ä¿¡
- `node/src/main.cpp`: runtime åˆ¤å®šã¨ heartbeat ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰æ›´æ–°
- `router/src/registry/models.rs`: ã‚­ãƒ£ãƒƒã‚·ãƒ¥å¥å…¨æ€§ãƒã‚§ãƒƒã‚¯
- `router/src/api/openai.rs`: /v1/models ready åˆ¤å®šã‚’ã‚µã‚¤ã‚ºåŸºæº–ã«
- `router/tests/integration/audio_api_test.rs`, `router/tests/integration/images_api_test.rs`: ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ†ã‚¹ãƒˆæ›´æ–°
- `node/tests/unit/router_client_test.cpp`, `node/tests/contract/router_api_test.cpp`: payloadæ¤œè¨¼æ›´æ–°

## ãƒ†ã‚¹ãƒˆæ–¹é‡

- ãƒ«ãƒ¼ã‚¿ãƒ¼çµ±åˆãƒ†ã‚¹ãƒˆ: ç”»åƒ/éŸ³å£°ã®ãƒãƒ¼ãƒ‰é¸æŠã¨APIãƒ«ãƒ¼ãƒˆã®å­˜åœ¨ç¢ºèª
- å¥‘ç´„ãƒ†ã‚¹ãƒˆ: ãƒ¢ãƒ‡ãƒ«ç™»éŒ²ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å¥å…¨æ€§ã€å‰Šé™¤åæ˜ 
- ãƒãƒ¼ãƒ‰ unit/contract ãƒ†ã‚¹ãƒˆ: register/heartbeat payloadã®è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- æ—¢å­˜ã® Playwright ã¯ãƒ¢ãƒƒã‚¯ä¾å­˜ã®ãŸã‚æœ¬ä»¶ã§ã¯æœ€å°é™ã®å½±éŸ¿ç¯„å›²ã®ã¿ç¢ºèª

