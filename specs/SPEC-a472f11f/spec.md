# 機能仕様書: 包括的E2Eテストスイート強化

**機能ID**: `SPEC-a472f11f`
**作成日**: 2026-02-13
**ステータス**: 下書き
**入力**: ユーザー説明: "包括的E2Eテストスイート強化 — 現在68テスト（61パス/7スキップ）のPlaywright E2Eテストを、全UI機能・全API・全インテグレーションシナリオを網羅する包括的テストスイートに拡張する"

## ユーザーシナリオ＆テスト

### ユーザーストーリー1 - セッション管理・認証ライフサイクルE2E (優先度: P1)

運用管理者がダッシュボードを日常的に使う際、ログイン・ログアウト・セッション切れの各フローが正しく機能することを、E2Eテストで保証する。

**この優先度の理由**: 認証はセキュリティの基盤であり、壊れた場合のビジネスインパクトが最大。

**独立テスト**: ログアウト後にAPIが401を返すこと、JWT cookieがクリアされること、ログインページへのリダイレクトを検証することで独立してテスト可能。

**受け入れシナリオ**:

1. **前提** ダッシュボードにログイン済み、**実行** ユーザーメニューから「Sign out」をクリック、**結果** ログインページにリダイレクトされ、ダッシュボードAPIが401を返す
1. **前提** ログアウト後の状態、**実行** ブラウザの戻るボタンでダッシュボードURLに遷移、**結果** ログインページにリダイレクトされる（キャッシュからのダッシュボード表示なし）
1. **前提** JWTの有効期限が切れた状態、**実行** ダッシュボードで任意の操作を試みる、**結果** ログインページにリダイレクトされる

---

### ユーザーストーリー2 - ユーザー管理E2E (優先度: P1)

管理者がダッシュボードからユーザーの作成・編集・削除・ロール変更を行い、変更が正しく反映されることを保証する。

**この優先度の理由**: ユーザー管理はマルチテナントシステムのセキュリティ境界に直結する。

**独立テスト**: ユーザー管理モーダルを開き、CRUD操作を行い、操作結果をUIとAPIの両面から検証することで独立してテスト可能。

**受け入れシナリオ**:

1. **前提** admin権限でログイン済み、**実行** ユーザー管理モーダルを開きユーザーを作成、**結果** ユーザーリストに新規ユーザーが表示される
1. **前提** テスト用ユーザーが存在する、**実行** ユーザーのロールをUser→Adminに変更、**結果** ロールバッジが更新される
1. **前提** テスト用ユーザーが存在する、**実行** ユーザーを削除、**結果** リストから消え、そのユーザーでのログインが失敗する

---

### ユーザーストーリー3 - APIキー権限マトリクスE2E (優先度: P1)

APIキーに付与された権限に基づき、許可されたAPIのみアクセス可能で、それ以外は拒否されることを、全組み合わせで保証する。

**この優先度の理由**: 権限制御の不備はデータ漏洩・不正操作に直結し、セキュリティ上最重要。

**独立テスト**: 特定の権限のみを持つAPIキーを作成し、各APIエンドポイントへのアクセス可否を検証することで独立してテスト可能。

**受け入れシナリオ**:

1. **前提** openai.inferenceのみのAPIキーを作成、**実行** `/v1/chat/completions`を呼び出す、**結果** 200（成功）
1. **前提** openai.inferenceのみのAPIキーを作成、**実行** `/api/endpoints`を呼び出す、**結果** 403（権限不足）
1. **前提** endpoints.readのみのAPIキーを作成、**実行** `/api/endpoints`を呼び出す、**結果** 200（成功）
1. **前提** 権限なしのAPIキーを作成（全unchecked）、**実行** 任意のAPIを呼び出す、**結果** 403
1. **前提** 全権限のAPIキーを作成、**実行** 全APIエンドポイントを呼び出す、**結果** 全て200

---

### ユーザーストーリー4 - APIキーライフサイクルE2E (優先度: P1)

APIキーの作成・使用・期限切れ・削除の全ライフサイクルが正しく機能することを保証する。

**この優先度の理由**: APIキーは外部システムとの連携に使われ、ライフサイクル管理の不備は長期的なセキュリティリスク。

**独立テスト**: APIキーの作成から削除までの全フェーズを順次実行し、各時点での動作を検証することで独立してテスト可能。

**受け入れシナリオ**:

1. **前提** ダッシュボードにログイン済み、**実行** APIキーを作成しコピー、**結果** 「Failed to copy」が表示されず、コピーしたキーでAPIアクセスが成功する
1. **前提** 有効期限付きAPIキーを作成、**実行** 期限切れ後にAPIアクセスを試みる、**結果** 401（期限切れ）
1. **前提** 有効なAPIキーが存在、**実行** ダッシュボードからAPIキーを削除、**結果** そのキーでのAPIアクセスが401になる
1. **前提** 複数のAPIキーが存在、**実行** API Keys一覧を表示、**結果** 期限切れキーに「Expired」バッジが表示される

---

### ユーザーストーリー5 - リクエスト履歴（History Tab）E2E (優先度: P1)

運用監視者がリクエスト履歴を閲覧・検索・詳細確認できることを保証する。

**この優先度の理由**: リクエスト履歴は運用監視・障害対応に不可欠であり、壊れると運用に直接影響。

**独立テスト**: テストリクエストを実行後、History Tabを開いてリクエストが記録されていること、詳細モーダルにリクエスト/レスポンスが表示されることを検証。

**受け入れシナリオ**:

1. **前提** モックエンドポイント経由でchat completionリクエストを実行済み、**実行** History Tabを開く、**結果** リクエストがタイムスタンプ・モデル・ステータスと共に表示される
1. **前提** 履歴が表示されている、**実行** リクエスト行をクリック、**結果** 詳細モーダルにOverview/Request/Responseの3タブが表示される
1. **前提** 詳細モーダルが開いている、**実行** Requestタブをクリック、**結果** JSONリクエストボディが表示され、コピーボタンが機能する
1. **前提** 履歴が複数ページ分ある、**実行** ページネーションで2ページ目に移動、**結果** 異なるリクエストが表示される

---

### ユーザーストーリー6 - トークン統計（Statistics Tab）E2E (優先度: P1)

運用管理者がトークン使用量を日次・月次で確認できることを保証する。

**この優先度の理由**: トークン統計はコスト管理・課金に直結し、表示が壊れると財務上の影響がある。

**独立テスト**: テストリクエストを実行後、Statistics Tabを開いてトークンカウントが表示されることを検証。

**受け入れシナリオ**:

1. **前提** モックエンドポイント経由でリクエストを実行済み、**実行** Statistics Tab→Dailyタブを開く、**結果** 本日のリクエスト数・入力/出力/合計トークンが表示される
1. **前提** Statistics Tabが表示されている、**実行** Monthlyタブに切り替え、**結果** 月別のトークン統計が表示される

---

### ユーザーストーリー7 - ログビューア（Logs Tab）E2E (優先度: P1)

運用管理者がLBログとエンドポイント別ログを閲覧できることを保証する。

**この優先度の理由**: ログは障害対応の第一歩であり、閲覧できないと問題解決が遅延する。

**独立テスト**: リクエスト実行後にLogs Tabを開き、対応するログエントリが存在することを検証。

**受け入れシナリオ**:

1. **前提** モックエンドポイント経由でリクエストを実行済み、**実行** Logs Tab→LB Logsを表示、**結果** リクエスト関連のログエントリが存在する
1. **前提** エンドポイントが登録済み、**実行** Endpoint Logsでエンドポイントを選択、**結果** 対応するログが表示される
1. **前提** ログが表示されている、**実行** リフレッシュボタンをクリック、**結果** 最新のログが反映される

---

### ユーザーストーリー8 - Endpoint編集・設定変更E2E (優先度: P1)

管理者がエンドポイントの設定（Health Check Interval、Inference Timeout、Notes）を変更し、変更がバックエンドの動作に反映されることを保証する。

**この優先度の理由**: エンドポイント設定の変更が反映されないと、運用上の期待と実際の動作に齟齬が生じる。

**独立テスト**: エンドポイント詳細モーダルから設定を変更し、APIで変更が反映されていることを検証。

**受け入れシナリオ**:

1. **前提** エンドポイントが登録済み、**実行** 詳細モーダルでDisplay Nameを変更して保存、**結果** エンドポイント一覧に新しい名前が反映される
1. **前提** エンドポイントが登録済み、**実行** Health Check Intervalを変更して保存、**結果** APIで取得した値が更新されている
1. **前提** エンドポイントが登録済み、**実行** Inference Timeoutを変更して保存、**結果** APIで取得した値が更新されている
1. **前提** エンドポイントが登録済み、**実行** Notesを変更して保存、**結果** 詳細モーダルを再度開くと新しいNotesが表示される

---

### ユーザーストーリー9 - Playground設定・cURLダイアログE2E (優先度: P1)

開発者がPlaygroundの各設定（Temperature、Max Tokens、System Prompt、Streaming）を変更してチャットに反映されること、cURLコマンドが正しく生成されることを保証する。

**この優先度の理由**: Playgroundは開発者が日常的に使うツールであり、設定が反映されないと信頼性が損なわれる。LB Playgroundは日常ツール、Endpoint Playgroundはデモ・検証用として両方カバー。

**独立テスト**: Playground設定を変更してチャットを送信し、リクエストに設定が反映されていることを検証。cURLダイアログの表示・コピーを検証。

**受け入れシナリオ**:

1. **前提** Endpoint Playgroundを開いている、**実行** System Promptを設定してメッセージ送信、**結果** レスポンスが返る（System Prompt反映）
1. **前提** Endpoint Playgroundを開いている、**実行** Streaming切替をOFF→ON、**結果** Streamingバッジの表示が切り替わる
1. **前提** Endpoint Playgroundを開いている、**実行** cURLボタンをクリック、**結果** cURLコマンドが表示され、コピーボタンが機能する
1. **前提** LB Playgroundを開いている、**実行** Temperature/Max Tokensを変更してチャット送信、**結果** レスポンスが返る

---

### ユーザーストーリー10 - OpenAI互換マルチモーダルAPI E2E (優先度: P1)

Audio API（transcriptions/speech）、Image API（generations/edits/variations）、Responses APIが正しくルーティング・プロキシされることを保証する。

**この優先度の理由**: OpenAI互換APIはシステムの中核機能であり、全エンドポイントが動作することを保証する必要がある。

**独立テスト**: モックエンドポイントを用意し、各APIの正常系・エラー系をHTTPレベルで検証。

**受け入れシナリオ**:

1. **前提** モックエンドポイントが登録済み、**実行** `/v1/audio/transcriptions`にリクエスト送信、**結果** モックの応答が正しくプロキシされる
1. **前提** モックエンドポイントが登録済み、**実行** `/v1/audio/speech`にリクエスト送信、**結果** モックの応答が正しくプロキシされる
1. **前提** モックエンドポイントが登録済み、**実行** `/v1/images/generations`にリクエスト送信、**結果** モックの応答が正しくプロキシされる
1. **前提** モックエンドポイントが登録済み、**実行** `/v1/images/edits`にリクエスト送信、**結果** モックの応答が正しくプロキシされる
1. **前提** モックエンドポイントが登録済み、**実行** `/v1/images/variations`にリクエスト送信、**結果** モックの応答が正しくプロキシされる
1. **前提** モックエンドポイントが登録済み、**実行** `/v1/responses`にリクエスト送信、**結果** モックの応答が正しくプロキシされる

---

### ユーザーストーリー11 - SSEストリーミング詳細検証E2E (優先度: P1)

SSEストリーミングレスポンスのチャンク順序、[DONE]シグナル、途中切断時のクリーンアップが正しく動作することを保証する。

**この優先度の理由**: ストリーミングはチャット体験の根幹であり、不具合は即座にユーザー体験を損なう。

**独立テスト**: 直接HTTP接続でSSEストリームを受信し、各イベントの内容と順序を検証。

**受け入れシナリオ**:

1. **前提** stream=trueでchat completionリクエスト送信、**実行** SSEイベントを受信、**結果** チャンクが順序通りに到着し、最後に`[DONE]`が送信される
1. **前提** ストリーミング中のリクエスト、**実行** クライアントが接続を切断、**結果** サーバー側でリソースが適切にクリーンアップされる
1. **前提** stream=trueでcompletionsリクエスト送信、**実行** SSEイベントを受信、**結果** チャンクが順序通りに到着する

---

### ユーザーストーリー12 - LBロードバランシング動作E2E (優先度: P1)

レイテンシ優先ルーティング、オフラインエンドポイント除外、フェイルオーバーが正しく動作することを保証する。

**この優先度の理由**: ロードバランシングはシステムの可用性・性能に直結する中核機能。

**独立テスト**: 異なるレイテンシのモックエンドポイントを用意し、リクエスト分散を検証。

**受け入れシナリオ**:

1. **前提** 高速モック（50ms）と低速モック（500ms）の2エンドポイント、**実行** 複数回リクエスト送信、**結果** 高速エンドポイントにより多くのリクエストがルーティングされる
1. **前提** 2つのオンラインエンドポイント、**実行** 1つをオフラインにしてリクエスト送信、**結果** オフラインエンドポイントにはルーティングされない
1. **前提** プライマリエンドポイントが応答不能、**実行** リクエスト送信、**結果** セカンダリエンドポイントにフォールバックして成功

---

### ユーザーストーリー13 - エンドポイントタイプ検出E2E (優先度: P2)

xLLM、Ollama、vLLM、OpenAI互換、Unknown各タイプのエンドポイントが正しく検出され、UIのタイプフィルターが機能することを保証する。

**この優先度の理由**: タイプ検出はエンドポイント管理のUXに影響するが、機能的な影響は限定的。

**独立テスト**: 各タイプの応答パターンを模したモックを用意し、検出結果とフィルター動作を検証。

**受け入れシナリオ**:

1. **前提** OpenAI互換モックを登録、**実行** 接続テスト実行、**結果** タイプが「OpenAI」と検出される
1. **前提** 複数タイプのエンドポイントが登録済み、**実行** タイプフィルターで「OpenAI」を選択、**結果** OpenAIタイプのみ表示される

---

### ユーザーストーリー14 - PrometheusメトリクスエクスポートE2E (優先度: P2)

Prometheusメトリクスが正しいフォーマットでエクスポートされ、リクエスト後にカウンターが増加することを保証する。

**この優先度の理由**: メトリクスは監視基盤の一部であり、形式不正は監視ダッシュボードの障害に繋がる。

**独立テスト**: メトリクスエンドポイントの応答形式を検証し、リクエスト前後のカウンター差分を確認。

**受け入れシナリオ**:

1. **前提** サーバーが稼働中、**実行** `/api/metrics/cloud`にGETリクエスト、**結果** Prometheus text formatのレスポンスが返る
1. **前提** 初期メトリクスを取得済み、**実行** chat completionリクエストを実行後にメトリクスを再取得、**結果** リクエストカウンターが増加している

---

### ユーザーストーリー15 - モバイルレスポンシブE2E (優先度: P2)

モバイルビューポートでダッシュボードの主要機能が正しく表示・操作できることを保証する。

**この優先度の理由**: モバイル対応はUXの一部であるが、主要ユースケースはデスクトップ。

**独立テスト**: モバイルビューポートに切り替えて主要フローを実行。

**受け入れシナリオ**:

1. **前提** モバイルビューポート（375x667）、**実行** ログイン→ダッシュボード表示、**結果** レイアウトが崩れず表示される
1. **前提** モバイルビューポートでダッシュボード表示中、**実行** ユーザードロップダウンを開く、**結果** API Keys・LB Playgroundのメニュー項目がモバイル用として表示される

---

### ユーザーストーリー16 - 大規模負荷テストE2E (優先度: P2)

100以上の同時リクエストでシステムが安定動作することを保証する。

**この優先度の理由**: 本番環境の負荷に近い条件での安定性は重要だが、機能正常性より優先度は下がる。

**独立テスト**: LB Playgroundまたは直接APIで大規模負荷を実行し、成功率・レイテンシを検証。

**受け入れシナリオ**:

1. **前提** 2つのモックエンドポイントが稼働中、**実行** 100+同時リクエストを送信、**結果** 全リクエストが成功し、レスポンスタイムが安定している
1. **前提** 大規模負荷テスト完了後、**実行** ダッシュボードの統計を確認、**結果** リクエスト数・成功率が正しく記録されている

---

### ユーザーストーリー17 - モデルダウンロード機能E2E (優先度: P2)

xLLMエンドポイントのモデルダウンロード機能のUIフローが正しく動作することを保証する（モック使用）。

**この優先度の理由**: xLLM固有の機能であり、UIフロー検証は品質保証に重要。

**独立テスト**: xLLMのダウンロードAPIをモックし、UIからのダウンロード開始・進捗表示を検証。

**受け入れシナリオ**:

1. **前提** xLLMタイプのモックエンドポイントが登録済み、**実行** 詳細モーダルでDownload Modelをクリック、**結果** ダウンロードダイアログが表示される

---

### ユーザーストーリー18 - システム更新バナーE2E (優先度: P2)

システム更新の通知バナーが正しく表示され、更新フローが機能することを保証する。

**この優先度の理由**: 更新機能は運用効率に影響するが、頻度は低い。

**独立テスト**: `/api/system`のレスポンスをモック的に検証し、バナー表示を確認。

**受け入れシナリオ**:

1. **前提** サーバーが稼働中、**実行** `/api/system`を呼び出す、**結果** バージョン情報と更新ステータスが返る
1. **前提** 更新が利用可能な状態（モック）、**実行** ダッシュボードを表示、**結果** 更新バナーにバージョン情報が表示される

---

### ユーザーストーリー19 - Endpoint詳細データビジュアライゼーションE2E (優先度: P2)

エンドポイント詳細モーダルの統計カード、日次リクエストトレンド、モデル別統計テーブルにデータが表示されることを保証する。

**この優先度の理由**: データの可視化は運用判断に使われるが、機能正常性より優先度は下がる。

**独立テスト**: リクエスト実行後にエンドポイント詳細を開き、統計データの存在を確認。

**受け入れシナリオ**:

1. **前提** モックエンドポイントで複数リクエスト実行済み、**実行** 詳細モーダルを開く、**結果** Total Requests/Today's Requests/Success Rate/Avg Response Timeの統計カードにゼロでない値が表示される
1. **前提** 詳細モーダルが開いている、**実行** 日次トレンドセクションを確認、**結果** チャートコンテナが表示されデータが存在する
1. **前提** 詳細モーダルが開いている、**実行** モデル別統計テーブルを確認、**結果** モデル名・リクエスト数・成功率・レイテンシが表示される

---

### エッジケース

- APIキーの権限を全て外した状態（0個のpermission）で作成を試みた場合、作成がブロックされるか
- 同一ユーザー名での重複ユーザー作成を試みた場合、適切なエラーが表示されるか
- History Tabのページネーションで最終ページを超えた操作をした場合の挙動
- モバイルビューポートでPlayground操作（チャット送信・設定変更）が正常に動作するか
- 権限不足のユーザーがUser Managementにアクセスしようとした場合の挙動
- 100+同時リクエスト中にエンドポイントがダウンした場合のグレースフルな処理
- SSEストリーミング中にネットワーク断が発生した場合のUI側のクリーンアップ
- Inference Timeoutに最小値（10）・最大値（600）の境界値を設定した場合の動作

## 要件

### 機能要件

#### UI機能テスト

- **FR-001**: E2Eテストスイートは、Statistics Tab（日次・月次トークン統計）の表示・タブ切替・データ存在を検証する必要がある
- **FR-002**: E2Eテストスイートは、History Tab（リクエスト履歴一覧・詳細モーダル・ページネーション・表示件数切替）を検証する必要がある
- **FR-003**: E2Eテストスイートは、Logs Tab（LBログ表示・エンドポイント選択・ログ内容の存在・リフレッシュ）を検証する必要がある
- **FR-004**: E2Eテストスイートは、User Management（ユーザーCRUD・ロール変更・削除確認・非admin拒否）を検証する必要がある
- **FR-005**: E2Eテストスイートは、Endpoint編集フォーム（Display Name/Health Check Interval/Inference Timeout/Notes の変更・保存・API反映）を検証する必要がある
- **FR-006**: E2Eテストスイートは、ログアウトフロー（Sign out→リダイレクト→API拒否→cookie削除）を検証する必要がある
- **FR-007**: E2Eテストスイートは、モバイルレスポンシブ（モバイルビューポートでの主要フロー動作）を検証する必要がある
- **FR-008**: E2Eテストスイートは、Playground設定（Temperature/Max Tokens/System Prompt/Streaming切替）の動作を検証する必要がある
- **FR-009**: E2Eテストスイートは、cURLダイアログ（表示・コマンド内容・コピーボタン）を検証する必要がある
- **FR-010**: E2Eテストスイートは、システム更新バナー（バージョン情報・更新ステータス表示）を検証する必要がある
- **FR-011**: E2Eテストスイートは、Endpoint詳細のデータビジュアライゼーション（統計カード・日次トレンド・モデル別統計テーブル）のデータ存在を検証する必要がある

#### APIテスト

- **FR-012**: E2Eテストスイートは、Audio API（`/v1/audio/transcriptions`、`/v1/audio/speech`）のルーティングをモックで検証する必要がある
- **FR-013**: E2Eテストスイートは、Image API（`/v1/images/generations`、`/v1/images/edits`、`/v1/images/variations`）のルーティングをモックで検証する必要がある
- **FR-014**: E2Eテストスイートは、Responses API（`/v1/responses`）のルーティングをモックで検証する必要がある
- **FR-015**: E2Eテストスイートは、SSEストリーミングの詳細検証（チャンク順序・[DONE]シグナル・途中切断クリーンアップ）を行う必要がある
- **FR-016**: E2Eテストスイートは、11種類のAPI権限と主要エンドポイントの全組み合わせ（権限マトリクス）を検証する必要がある
- **FR-017**: E2Eテストスイートは、APIキーライフサイクル（作成・使用・期限切れ拒否・削除・UI表示）を検証する必要がある
- **FR-018**: E2Eテストスイートは、Prometheusメトリクスエクスポート（フォーマット検証・リクエスト後のカウンター増加）を検証する必要がある

#### インテグレーションテスト

- **FR-019**: E2Eテストスイートは、LBロードバランシング動作（レイテンシ優先ルーティング・オフライン除外・フェイルオーバー）を検証する必要がある
- **FR-020**: E2Eテストスイートは、全エンドポイントタイプ（xLLM/Ollama/vLLM/OpenAI/Unknown）の検出とタイプフィルター動作を検証する必要がある
- **FR-021**: E2Eテストスイートは、モデルダウンロード機能のUIフロー（xLLMモック使用）を検証する必要がある
- **FR-022**: E2Eテストスイートは、100+同時リクエストの大規模負荷テストでの安定性を検証する必要がある
- **FR-023**: E2Eテストスイートは、システム更新フロー（バージョン確認・バナー表示）を検証する必要がある

#### テスト基盤要件

- **FR-024**: 全テストはHeadedモードで実行可能でなければならない
- **FR-025**: 全テストはモックサーバーを活用し、外部依存（xLLM/Ollama/vLLM/HuggingFace等）なしで実行可能でなければならない
- **FR-026**: 全テストは既存のPlaywright Page Object Modelパターンに準拠しなければならない
- **FR-027**: 全テストは既存の68テストと共存し、既存テストを破壊しないこと
- **FR-028**: APIキー作成・HistoryのRequest/Response・cURLコピーにおいて、`navigator.clipboard`が利用できない/失敗する環境でも、フォールバックコピーが機能し、`Failed to copy`トーストが表示されないこと

### 主要エンティティ

- **E2Eテストスペック**: Playwright specファイル。テストカテゴリ（auth/dashboard/api/workflows）ごとにディレクトリ分類される
- **Page Objectモデル**: UI要素のラッパー。auth.page.ts、dashboard.page.tsなど既存パターンに追加
- **モックサーバー**: 各種APIバックエンドをシミュレートするNode.jsサーバー。mock-openai-endpoint.tsを拡張
- **ヘルパー関数**: APIアクセス・テストデータ管理のユーティリティ。api-helpers.tsに集約

## 成功基準

### 測定可能な結果

- **SC-001**: E2Eテスト総数が既存の68から200以上に増加すること
- **SC-002**: テストゼロだった全UI機能（Statistics/History/Logs/User Management/Endpoint編集/ログアウト/モバイル/Playground設定/cURL/更新バナー）にテストが追加されること
- **SC-003**: テストゼロだった全API（Audio/Image/Responses/SSE/権限マトリクス/APIキーライフサイクル/Prometheus）にテストが追加されること
- **SC-004**: 全E2Eテストが`npx playwright test --headed`で外部依存なしに成功すること
- **SC-005**: 既存の61パステストが引き続き全てパスすること
- **SC-006**: 11種類のAPI権限と主要エンドポイントの全組み合わせテストがパスすること
- **SC-007**: 100+同時リクエストの負荷テストで全リクエストが成功すること
- **SC-008**: APIキー作成後のコピー、History/Playgroundのコピーボタンが`Failed to copy`を出力せず、`Copied full API key`などの成功通知まで到達し、対象データが正しく貼り付け可能であること
